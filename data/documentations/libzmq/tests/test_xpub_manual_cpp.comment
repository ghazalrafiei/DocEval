['text':' SPDX-License-Identifier: MPL-2.0 ','line_number':1,'multiline':True]
['text':'  Create a publisher','line_number':10,'multiline':False]
['text':'  Create a subscriber','line_number':17,'multiline':False]
['text':'  Subscribe for A','line_number':21,'multiline':False]
['text':' Receive subscriptions from subscriber','line_number':25,'multiline':False]
['text':' Subscribe socket for B instead','line_number':28,'multiline':False]
['text':' Sending A message and B Message','line_number':31,'multiline':False]
['text':'  Clean up.','line_number':37,'multiline':False]
['text':'  Create a publisher','line_number':44,'multiline':False]
['text':'  set pub socket options','line_number':48,'multiline':False]
['text':'  Create a subscriber','line_number':53,'multiline':False]
['text':'  Subscribe for A','line_number':57,'multiline':False]
['text':'  Subscribe for B','line_number':61,'multiline':False]
['text':' Receive subscription "A" from subscriber','line_number':67,'multiline':False]
['text':' Subscribe socket for XA instead','line_number':70,'multiline':False]
['text':' Receive subscription "B" from subscriber','line_number':73,'multiline':False]
['text':' Subscribe socket for XB instead','line_number':76,'multiline':False]
['text':'  Unsubscribe from A','line_number':79,'multiline':False]
['text':' Receive unsubscription "A" from subscriber','line_number':83,'multiline':False]
['text':' Unsubscribe socket from XA instead','line_number':86,'multiline':False]
['text':' Sending messages XA, XB','line_number':89,'multiline':False]
['text':' Subscriber should receive XB only','line_number':93,'multiline':False]
['text':' Close subscriber','line_number':96,'multiline':False]
['text':' Receive unsubscription "B"','line_number':99,'multiline':False]
['text':' Unsubscribe socket from XB instead','line_number':107,'multiline':False]
['text':'  Clean up.','line_number':110,'multiline':False]
['text':' proxy frontend','line_number':124,'multiline':False]
['text':' proxy backend','line_number':129,'multiline':False]
['text':' publisher','line_number':136,'multiline':False]
['text':' first subscriber subscribes','line_number':140,'multiline':False]
['text':' wait','line_number':146,'multiline':False]
['text':' proxy reroutes and confirms subscriptions','line_number':149,'multiline':False]
['text':' second subscriber subscribes','line_number':156,'multiline':False]
['text':' wait','line_number':162,'multiline':False]
['text':' proxy reroutes','line_number':165,'multiline':False]
['text':' wait','line_number':171,'multiline':False]
['text':' let publisher send a msg','line_number':174,'multiline':False]
['text':' wait','line_number':178,'multiline':False]
['text':' proxy reroutes data messages to subscribers','line_number':181,'multiline':False]
['text':' wait','line_number':187,'multiline':False]
['text':' each subscriber should now get a message','line_number':190,'multiline':False]
['text':'  Disconnect both subscribers','line_number':197,'multiline':False]
['text':' wait','line_number':201,'multiline':False]
['text':' unsubscribe messages are passed from proxy to publisher','line_number':204,'multiline':False]
['text':' should receive another unsubscribe msg','line_number':211,'multiline':False]
['text':' wait','line_number':217,'multiline':False]
['text':' let publisher send a msg','line_number':220,'multiline':False]
['text':' wait','line_number':224,'multiline':False]
['text':' nothing should come to the proxy','line_number':227,'multiline':False]
['text':' proxy frontend','line_number':248,'multiline':False]
['text':' proxy backend','line_number':253,'multiline':False]
['text':' publisher','line_number':260,'multiline':False]
['text':' Here's the problem: because subscribers subscribe in quick succession,','line_number':264,'multiline':False]
['text':' the proxy is unable to confirm the first subscription before receiving','line_number':265,'multiline':False]
['text':' the second. This causes the first subscription to get lost.','line_number':266,'multiline':False]
['text':' first subscriber','line_number':268,'multiline':False]
['text':' wait','line_number':273,'multiline':False]
['text':' proxy now reroutes and confirms subscriptions','line_number':276,'multiline':False]
['text':' second subscriber','line_number':283,'multiline':False]
['text':' wait','line_number':288,'multiline':False]
['text':' wait','line_number':297,'multiline':False]
['text':' let publisher send 2 msgs, each with its own topic_buff','line_number':300,'multiline':False]
['text':' wait','line_number':306,'multiline':False]
['text':' proxy reroutes data messages to subscribers','line_number':309,'multiline':False]
['text':' wait','line_number':320,'multiline':False]
['text':' each subscriber should now get a message','line_number':323,'multiline':False]
['text':'  Clean up','line_number':330,'multiline':False]
['text':'  Create a publisher','line_number':342,'multiline':False]
['text':'  Create a subscriber','line_number':349,'multiline':False]
['text':'  Subscribe for A','line_number':353,'multiline':False]
['text':' Receive subscriptions from subscriber','line_number':358,'multiline':False]
['text':' send 2 messages','line_number':362,'multiline':False]
['text':' receive the single message','line_number':366,'multiline':False]
['text':' should be nothing left in the queue','line_number':369,'multiline':False]
['text':' close the socket','line_number':374,'multiline':False]
['text':' closing the socket will result in an unsubscribe event','line_number':377,'multiline':False]
['text':' this doesn't really do anything','line_number':381,'multiline':False]
['text':' there is no last_pipe set it will just fail silently','line_number':382,'multiline':False]
['text':' reconnect','line_number':385,'multiline':False]
['text':' send a subscription for B','line_number':389,'multiline':False]
['text':' receive the subscription, overwrite it to XB','line_number':393,'multiline':False]
['text':' send 2 messages','line_number':397,'multiline':False]
['text':' receive the single message','line_number':401,'multiline':False]
['text':' should be nothing left in the queue','line_number':404,'multiline':False]
['text':'  Clean up.','line_number':408,'multiline':False]
['text':'  Create a publisher','line_number':415,'multiline':False]
['text':'  Create a subscriber','line_number':419,'multiline':False]
['text':'  Send some data that is neither sub nor unsub','line_number':423,'multiline':False]
['text':' Receive subscriptions from subscriber','line_number':427,'multiline':False]
['text':'  Clean up.','line_number':430,'multiline':False]
['text':'  Create a publisher','line_number':440,'multiline':False]
['text':'  Create a subscriber','line_number':447,'multiline':False]
['text':'  Send some data that is neither sub nor unsub','line_number':454,'multiline':False]
['text':'  Message starts with 0 but should still treated as user','line_number':456,'multiline':False]
['text':'  Message starts with 1 but should still treated as user','line_number':459,'multiline':False]
['text':' Test second message starting with 0','line_number':463,'multiline':False]
['text':' Receive messages from subscriber','line_number':467,'multiline':False]
['text':' Test second message starting with 1','line_number':471,'multiline':False]
['text':' Receive messages from subscriber','line_number':475,'multiline':False]
['text':' Test first message starting with 1','line_number':479,'multiline':False]
['text':'  Clean up.','line_number':490,'multiline':False]
