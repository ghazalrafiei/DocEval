['text':' possible loss of data','line_number':32,'multiline':False]
['text':' LOG_DISABLE_LOGS','line_number':117,'multiline':False]
['text':' load the model and apply lora adapter, if any','line_number':213,'multiline':False]
['text':' print system information','line_number':235,'multiline':False]
['text':' Should not run without any tokens','line_number':268,'multiline':False]
['text':' Tokenize negative prompt','line_number':274,'multiline':False]
['text':' number of tokens to keep when resetting context','line_number':298,'multiline':False]
['text':' enable interactive mode if interactive start is specified','line_number':307,'multiline':False]
['text':' the first thing we will do is to output the prompt, so set color accordingly','line_number':407,'multiline':False]
['text':' predict','line_number':416,'multiline':False]
['text':' Note: n_ctx - 4 here is to match the logic for commandline prompt handling via','line_number':418,'multiline':False]
['text':' --prompt or --file which uses the same value.','line_number':419,'multiline':False]
['text':' Ensure the input doesn't exceed the context size by truncating embd if necessary.','line_number':422,'multiline':False]
['text':' infinite text generation via context swapping','line_number':433,'multiline':False]
['text':' if we run out of context:','line_number':434,'multiline':False]
['text':' - take the n_keep first tokens from the original prompt (via n_past)','line_number':435,'multiline':False]
['text':' - take half of the last (n_ctx - n_keep) tokens and recompute the logits in batches','line_number':436,'multiline':False]
['text':' evaluate tokens in batches','line_number':464,'multiline':False]
['text':' embd is typically prepared beforehand to fit within a batch, but not always','line_number':465,'multiline':False]
['text':' Guidance context should have the same data with these modifications:','line_number':472,'multiline':False]
['text':'','line_number':473,'multiline':False]
['text':' * Replace the initial prompt','line_number':474,'multiline':False]
['text':' * Shift everything by guidance_offset','line_number':475,'multiline':False]
['text':' echo this to console','line_number':538,'multiline':False]
['text':' decrement remaining sampling budget','line_number':541,'multiline':False]
['text':' some user input remains from prompt or interaction, forward it to processing','line_number':546,'multiline':False]
['text':' push the prompt in the sampling context in order to apply repetition penalties later','line_number':551,'multiline':False]
['text':' for the prompt, we don't apply grammar rules','line_number':552,'multiline':False]
['text':' display text','line_number':562,'multiline':False]
['text':' reset color to default if we there is no pending user input','line_number':577,'multiline':False]
['text':' if not currently processing queued inputs;','line_number':582,'multiline':False]
['text':' deal with eot token in infill mode','line_number':585,'multiline':False]
['text':' print an eot token','line_number':588,'multiline':False]
['text':' set a new prefix via stdin','line_number':597,'multiline':False]
['text':' check if we got an empty line, if so we use the old input','line_number':602,'multiline':False]
['text':' set a new suffix via stdin','line_number':607,'multiline':False]
['text':' check if we got an empty line','line_number':612,'multiline':False]
['text':' done taking input, reset color','line_number':617,'multiline':False]
['text':'process escape sequences, for the initial prompt this is done in common.cpp when we load the params, but for the interactive mode we need to do it here','line_number':621,'multiline':False]
['text':' tokenize new prefix and suffix','line_number':630,'multiline':False]
['text':' LOG_TEE("took new input\n");','line_number':649,'multiline':False]
['text':' deal with end of text token in interactive mode','line_number':652,'multiline':False]
['text':' done taking input, reset color','line_number':687,'multiline':False]
['text':' Add tokens to embd only if the input buffer is non-empty','line_number':690,'multiline':False]
['text':' Entering a empty line lets the user pass control back','line_number':691,'multiline':False]
['text':' append input suffix if any','line_number':693,'multiline':False]
['text':' do not echo this again','line_number':721,'multiline':False]
['text':' end of text token','line_number':732,'multiline':False]
['text':' In interactive mode, respect the maximum number of tokens and drop back to user input when reached.','line_number':737,'multiline':False]
['text':' We skip this logic when n_predict == -1 (infinite) or -2 (stop at context size).','line_number':738,'multiline':False]
['text':' LOG_DISABLE_LOGS','line_number':761,'multiline':False]
