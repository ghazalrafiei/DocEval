['text':'! /bin/bash','line_number':1,'multiline':False]
['text':' Copyright 2016 The Kubernetes Authors.','line_number':3,'multiline':False]
['text':'','line_number':4,'multiline':False]
['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':5,'multiline':False]
['text':' you may not use this file except in compliance with the License.','line_number':6,'multiline':False]
['text':' You may obtain a copy of the License at','line_number':7,'multiline':False]
['text':'','line_number':8,'multiline':False]
['text':'     http://www.apache.org/licenses/LICENSE-2.0','line_number':9,'multiline':False]
['text':'','line_number':10,'multiline':False]
['text':' Unless required by applicable law or agreed to in writing, software','line_number':11,'multiline':False]
['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':12,'multiline':False]
['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':13,'multiline':False]
['text':' See the License for the specific language governing permissions and','line_number':14,'multiline':False]
['text':' limitations under the License.','line_number':15,'multiline':False]
['text':' This script configures zookeeper cluster member ship for version of zookeeper','line_number':19,'multiline':False]
['text':' >= 3.5.0. It should not be used with the on-change.sh script in this example.','line_number':20,'multiline':False]
['text':' As of April-2016 is 3.4.8 is the latest stable.','line_number':21,'multiline':False]
['text':' Both /opt and /tmp/zookeeper are assumed to be volumes shared with the parent.','line_number':23,'multiline':False]
['text':' The format of each line in the dynamic config file is:','line_number':24,'multiline':False]
['text':' server.<1 based index>=<server-dns-name>:<peer port>:<election port>[:role];[<client port address>:]<client port>','line_number':25,'multiline':False]
['text':' <1 based index> is the server index that matches the id in datadir/myid','line_number':26,'multiline':False]
['text':' <peer port> is the port on which peers communicate to agree on updates','line_number':27,'multiline':False]
['text':' <election port> is the port used for leader election','line_number':28,'multiline':False]
['text':' [:role] can be set to observer, participant by default','line_number':29,'multiline':False]
['text':' <client port address> is optional and defaults to 0.0.0.0','line_number':30,'multiline':False]
['text':' <client port> is the port on which the server accepts client connections','line_number':31,'multiline':False]
['text':' Don't add the first member as an observer','line_number':42,'multiline':False]
['text':'PEERS[@]} -eq 1 ]; then','line_number':43,'multiline':False]
['text':' We need to write our index in this list of servers into MY_ID_FILE.','line_number':44,'multiline':False]
['text':' Note that this may not always coincide with the hostname id.','line_number':45,'multiline':False]
['text':' TODO: zkServer-initialize is the safe way to handle changes to datadir','line_number':48,'multiline':False]
['text':' because simply starting will create a new datadir, BUT if the user changed','line_number':49,'multiline':False]
['text':' pod template they might end up with 2 datadirs and brief split brain.','line_number':50,'multiline':False]
['text':' Every subsequent member is added as an observer and promoted to a participant','line_number':54,'multiline':False]
['text':' zookeeper won't start without myid anyway.','line_number':73,'multiline':False]
['text':' This means our hostname wasn't in the peer list.','line_number':74,'multiline':False]
['text':' Once the dynamic config file is written it shouldn't be modified, so the final','line_number':79,'multiline':False]
['text':' reconfigure needs to happen through the "reconfig" command.','line_number':80,'multiline':False]
['text':' TODO: zkServer-initialize is the safe way to handle changes to datadir','line_number':83,'multiline':False]
['text':' because simply starting will create a new datadir, BUT if the user changed','line_number':84,'multiline':False]
['text':' pod template they might end up with 2 datadirs and brief split brain.','line_number':85,'multiline':False]
['text':' TODO: We shouldn't need to specify the address of the master as long as','line_number':88,'multiline':False]
['text':' there's quorum. According to the docs the new server is just not allowed to','line_number':89,'multiline':False]
['text':' vote, it's still allowed to propose config changes, and it knows the','line_number':90,'multiline':False]
['text':' existing members of the ensemble from *its* config.','line_number':91,'multiline':False]
['text':' Prove that we've actually joined the running cluster','line_number':95,'multiline':False]
