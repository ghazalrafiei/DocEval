['text':'!/usr/bin/env bash','line_number':1,'multiline':False]
['text':' Copyright 2020 The Kubernetes Authors.','line_number':3,'multiline':False]
['text':'','line_number':4,'multiline':False]
['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':5,'multiline':False]
['text':' you may not use this file except in compliance with the License.','line_number':6,'multiline':False]
['text':' You may obtain a copy of the License at','line_number':7,'multiline':False]
['text':'','line_number':8,'multiline':False]
['text':'     http://www.apache.org/licenses/LICENSE-2.0','line_number':9,'multiline':False]
['text':'','line_number':10,'multiline':False]
['text':' Unless required by applicable law or agreed to in writing, software','line_number':11,'multiline':False]
['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':12,'multiline':False]
['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':13,'multiline':False]
['text':' See the License for the specific language governing permissions and','line_number':14,'multiline':False]
['text':' limitations under the License.','line_number':15,'multiline':False]
['text':'## Pod Troubleshooting by ephemeral containers','line_number':28,'multiline':False]
['text':' Pre-Condition: Pod "nginx" is created','line_number':30,'multiline':False]
['text':' Command: create a copy of target with a new debug container','line_number':33,'multiline':False]
['text':' Post-Conditions','line_number':35,'multiline':False]
['text':' Clean up','line_number':37,'multiline':False]
['text':'## Pod Troubleshooting by Copy','line_number':40,'multiline':False]
['text':' Pre-Condition: Pod "nginx" is created','line_number':42,'multiline':False]
['text':' Command: create a copy of target with a new debug container','line_number':45,'multiline':False]
['text':' Post-Conditions','line_number':47,'multiline':False]
['text':' Clean up','line_number':51,'multiline':False]
['text':' Pre-Condition: Pod "nginx" is created','line_number':54,'multiline':False]
['text':' Command: create a copy of target with a new debug container replacing the previous pod','line_number':57,'multiline':False]
['text':' Post-Conditions','line_number':59,'multiline':False]
['text':' Clean up','line_number':63,'multiline':False]
['text':' Pre-Condition: Pod "nginx" is created','line_number':66,'multiline':False]
['text':' Command: copy the pod and replace the image of an existing container','line_number':70,'multiline':False]
['text':' Post-Conditions','line_number':72,'multiline':False]
['text':' Clean up','line_number':75,'multiline':False]
['text':' Pre-Condition: Pod "nginx" is created','line_number':78,'multiline':False]
['text':' Command: copy the pod and replace the image of an existing container','line_number':82,'multiline':False]
['text':' Post-Conditions','line_number':85,'multiline':False]
['text':' Clean up','line_number':88,'multiline':False]
['text':'## Node Troubleshooting by Privileged Container','line_number':102,'multiline':False]
['text':' Pre-Condition: Pod "nginx" is created','line_number':104,'multiline':False]
['text':' Command: create a new node debugger pod','line_number':106,'multiline':False]
['text':' Post-Conditions','line_number':108,'multiline':False]
['text':' Clean up','line_number':119,'multiline':False]
['text':' pod.spec.nodeName is set by kubectl debug node which causes the delete to hang,','line_number':120,'multiline':False]
['text':' presumably waiting for a kubelet that's not present. Force the delete.','line_number':121,'multiline':False]
['text':'## Debug by pod copy','line_number':135,'multiline':False]
['text':'## probes are removed, sets SYS_PTRACE in debugging container, sets shareProcessNamespace','line_number':136,'multiline':False]
['text':' Pre-Condition: Pod "nginx" is created','line_number':138,'multiline':False]
['text':' Command: create a copy of target with a new debug container','line_number':141,'multiline':False]
['text':' Post-Conditions','line_number':143,'multiline':False]
['text':' Clean up','line_number':152,'multiline':False]
['text':'## Debug by EC','line_number':155,'multiline':False]
['text':'## sets SYS_PTRACE in ephemeral container','line_number':156,'multiline':False]
['text':' Pre-Condition: Pod "nginx" is created','line_number':158,'multiline':False]
['text':' Command: create a copy of target with a new debug container','line_number':161,'multiline':False]
['text':' Post-Conditions','line_number':163,'multiline':False]
['text':' Clean up','line_number':166,'multiline':False]
['text':'## Debug node','line_number':180,'multiline':False]
['text':'## empty securityContext, uses host namespaces, mounts root partition','line_number':181,'multiline':False]
['text':' Pre-Condition: node exists','line_number':183,'multiline':False]
['text':' Command: create a new node debugger pod','line_number':185,'multiline':False]
['text':' Post-Conditions','line_number':187,'multiline':False]
['text':' Clean up','line_number':199,'multiline':False]
['text':' pod.spec.nodeName is set by kubectl debug node which causes the delete to hang,','line_number':200,'multiline':False]
['text':' presumably waiting for a kubelet that's not present. Force the delete.','line_number':201,'multiline':False]
['text':'## Debug by pod copy','line_number':215,'multiline':False]
['text':'## probes are removed, empty securityContext, sets shareProcessNamespace','line_number':216,'multiline':False]
['text':' Pre-Condition: Pod "nginx" is created','line_number':218,'multiline':False]
['text':' Command: create a copy of target with a new debug container','line_number':221,'multiline':False]
['text':' Post-Conditions','line_number':223,'multiline':False]
['text':' Clean up','line_number':232,'multiline':False]
['text':'## Debug by EC','line_number':235,'multiline':False]
['text':'## empty securityContext','line_number':236,'multiline':False]
['text':' Pre-Condition: Pod "nginx" is created','line_number':238,'multiline':False]
['text':' Command: create a copy of target with a new debug container','line_number':241,'multiline':False]
['text':' Post-Conditions','line_number':243,'multiline':False]
['text':' Clean up','line_number':246,'multiline':False]
['text':'## Debug node','line_number':260,'multiline':False]
['text':'## empty securityContext, uses isolated namespaces','line_number':261,'multiline':False]
['text':' Pre-Condition: node exists','line_number':263,'multiline':False]
['text':' Command: create a new node debugger pod','line_number':265,'multiline':False]
['text':' Post-Conditions','line_number':267,'multiline':False]
['text':' Clean up','line_number':277,'multiline':False]
['text':' pod.spec.nodeName is set by kubectl debug node which causes the delete to hang,','line_number':278,'multiline':False]
['text':' presumably waiting for a kubelet that's not present. Force the delete.','line_number':279,'multiline':False]
['text':'## Pod Troubleshooting by ephemeral containers with restricted profile','line_number':293,'multiline':False]
['text':' Pre-Condition: Pod "nginx" is created','line_number':294,'multiline':False]
['text':' Restricted profile just works in not restricted namespace','line_number':297,'multiline':False]
['text':' Command: add a new debug container with restricted profile','line_number':298,'multiline':False]
['text':' Post-Conditions','line_number':301,'multiline':False]
['text':' Clean up','line_number':303,'multiline':False]
['text':'## Pod Troubleshooting by pod copy with restricted profile','line_number':306,'multiline':False]
['text':' Pre-Condition: Pod "nginx" is created','line_number':307,'multiline':False]
['text':' Restricted profile just works in not restricted namespace','line_number':310,'multiline':False]
['text':' Command: create a copy of target with a new debug container','line_number':311,'multiline':False]
['text':' Post-Conditions','line_number':313,'multiline':False]
['text':' Clean up','line_number':317,'multiline':False]
['text':' Command: create namespace and add a label','line_number':321,'multiline':False]
['text':'## Pod Troubleshooting by ephemeral containers with restricted profile (restricted namespace)','line_number':327,'multiline':False]
['text':' Pre-Condition: Pod "busybox" is created that complies with the restricted policy','line_number':328,'multiline':False]
['text':' Restricted profile works when pod's seccompProfile is RuntimeDefault','line_number':331,'multiline':False]
['text':' Command: add a new debug container with restricted profile','line_number':332,'multiline':False]
['text':' Post-Conditions','line_number':335,'multiline':False]
['text':' Clean up','line_number':337,'multiline':False]
['text':'## Pod Troubleshooting by pod copy with restricted profile (restricted namespace)','line_number':340,'multiline':False]
['text':' Pre-Condition: Pod "nginx" is created','line_number':341,'multiline':False]
['text':' Restricted profile works when pod's seccompProfile is RuntimeDefault','line_number':344,'multiline':False]
['text':' Command: create a copy of target with a new debug container','line_number':345,'multiline':False]
['text':' Post-Conditions','line_number':347,'multiline':False]
['text':' Clean up','line_number':351,'multiline':False]
['text':'## Pod Troubleshooting by ephemeral containers with restricted profile (restricted namespace)','line_number':354,'multiline':False]
['text':' Pre-Condition: Pod "busybox" is created that complies with the restricted policy','line_number':355,'multiline':False]
['text':' Restricted profile works when pod's seccompProfile is Localhost','line_number':358,'multiline':False]
['text':' Command: add a new debug container with restricted profile','line_number':359,'multiline':False]
['text':' Post-Conditions','line_number':362,'multiline':False]
['text':' Clean up','line_number':364,'multiline':False]
['text':'## Pod Troubleshooting by pod copy with restricted profile (restricted namespace)','line_number':367,'multiline':False]
['text':' Pre-Condition: Pod "nginx" is created','line_number':368,'multiline':False]
['text':' Restricted profile works when pod's seccompProfile is Localhost','line_number':371,'multiline':False]
['text':' Command: create a copy of target with a new debug container','line_number':372,'multiline':False]
['text':' Post-Conditions','line_number':374,'multiline':False]
['text':' Clean up','line_number':378,'multiline':False]
['text':' Clean up restricted namespace','line_number':381,'multiline':False]
['text':'## Debug node with restricted profile','line_number':395,'multiline':False]
['text':' Pre-Condition: node exists','line_number':396,'multiline':False]
['text':' Restricted profile just works in not restricted namespace','line_number':398,'multiline':False]
['text':' Command: create a new node debugger pod','line_number':399,'multiline':False]
['text':' Post-Conditions','line_number':402,'multiline':False]
['text':' Clean up','line_number':416,'multiline':False]
['text':' pod.spec.nodeName is set by kubectl debug node which causes the delete to hang,','line_number':417,'multiline':False]
['text':' presumably waiting for a kubelet that's not present. Force the delete.','line_number':418,'multiline':False]
['text':' Command: create namespace and add a label','line_number':422,'multiline':False]
['text':'## Debug node with restricted profile (restricted namespace)','line_number':428,'multiline':False]
['text':' Pre-Condition: node exists','line_number':429,'multiline':False]
['text':' Restricted profile works in restricted namespace','line_number':431,'multiline':False]
['text':' Command: create a new node debugger pod','line_number':432,'multiline':False]
['text':' Post-Conditions','line_number':435,'multiline':False]
['text':' Clean up','line_number':449,'multiline':False]
['text':' pod.spec.nodeName is set by kubectl debug node which causes the delete to hang,','line_number':450,'multiline':False]
['text':' presumably waiting for a kubelet that's not present. Force the delete.','line_number':451,'multiline':False]
['text':' Clean up restricted namespace','line_number':454,'multiline':False]
['text':'## Pod Troubleshooting by ephemeral containers with netadmin profile  ','line_number':468,'multiline':False]
['text':' Pre-Condition: Pod "nginx" is created','line_number':469,'multiline':False]
['text':' Command: add a new debug container with netadmin profile','line_number':472,'multiline':False]
['text':' Post-Conditions','line_number':474,'multiline':False]
['text':' Clean up','line_number':477,'multiline':False]
['text':'## Pod Troubleshooting by pod copy with netadmin profile','line_number':480,'multiline':False]
['text':' Pre-Condition: Pod "nginx" is created','line_number':481,'multiline':False]
['text':' Command: create a copy of target with a new debug container','line_number':484,'multiline':False]
['text':' Post-Conditions','line_number':486,'multiline':False]
['text':' Clean up','line_number':492,'multiline':False]
['text':'## Debug node with netadmin profile','line_number':506,'multiline':False]
['text':' Pre-Condition: node exists','line_number':507,'multiline':False]
['text':' Command: create a new node debugger pod','line_number':509,'multiline':False]
['text':' Post-Conditions','line_number':511,'multiline':False]
['text':' Clean up','line_number':520,'multiline':False]
['text':' pod.spec.nodeName is set by kubectl debug node which causes the delete to hang,','line_number':521,'multiline':False]
['text':' presumably waiting for a kubelet that's not present. Force the delete.','line_number':522,'multiline':False]
