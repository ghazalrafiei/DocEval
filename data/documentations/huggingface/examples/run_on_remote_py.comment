['text':'!/usr/bin/env python','line_number':1,'multiline':False]
['text':' coding=utf-8','line_number':2,'multiline':False]
['text':' Copyright 2021 The HuggingFace Inc. team. All rights reserved.','line_number':3,'multiline':False]
['text':'','line_number':4,'multiline':False]
['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':5,'multiline':False]
['text':' you may not use this file except in compliance with the License.','line_number':6,'multiline':False]
['text':' You may obtain a copy of the License at','line_number':7,'multiline':False]
['text':'','line_number':8,'multiline':False]
['text':'     http://www.apache.org/licenses/LICENSE-2.0','line_number':9,'multiline':False]
['text':'','line_number':10,'multiline':False]
['text':' Unless required by applicable law or agreed to in writing, software','line_number':11,'multiline':False]
['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':12,'multiline':False]
['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':13,'multiline':False]
['text':' See the License for the specific language governing permissions and','line_number':14,'multiline':False]
['text':' limitations under the License.','line_number':15,'multiline':False]
['text':' Refer to https://runhouse-docs.readthedocs-hosted.com/en/latest/api/python/cluster.html#hardware-setup for cloud access','line_number':24,'multiline':False]
['text':' setup instructions, if using on-demand hardware','line_number':25,'multiline':False]
['text':' If user passes --user <user> --host <host> --key_path <key_path> <example> <args>, fill them in as BYO cluster','line_number':27,'multiline':False]
['text':' If user passes --instance <instance> --provider <provider> <example> <args>, fill them in as on-demand cluster','line_number':28,'multiline':False]
['text':' Throw an error if user passes both BYO and on-demand cluster args','line_number':29,'multiline':False]
['text':' Otherwise, use default values','line_number':30,'multiline':False]
['text':' Set up remote environment','line_number':52,'multiline':False]
['text':' Installs transformers from local source','line_number':53,'multiline':False]
['text':' Note transformers is copied into the home directory on the remote machine, so we can install from there','line_number':54,'multiline':False]
['text':' Run example. You can bypass the CLI wrapper and paste your own code here.','line_number':58,'multiline':False]
['text':' Alternatively, we can just import and run a training function (especially if there's no wrapper CLI):','line_number':61,'multiline':False]
['text':' from my_script... import train','line_number':62,'multiline':False]
['text':' reqs = ['pip:./', 'torch', 'datasets', 'accelerate', 'evaluate', 'tqdm', 'scipy', 'scikit-learn', 'tensorboard']','line_number':63,'multiline':False]
['text':' launch_train_gpu = rh.function(fn=train,','line_number':64,'multiline':False]
['text':'                                system=gpu,','line_number':65,'multiline':False]
['text':'                                reqs=reqs,','line_number':66,'multiline':False]
['text':'                                name='train_bert_glue')','line_number':67,'multiline':False]
['text':'','line_number':68,'multiline':False]
['text':' We can pass in arguments just like we would to a function:','line_number':69,'multiline':False]
['text':' launch_train_gpu(num_epochs = 3, lr = 2e-5, seed = 42, batch_size = 16','line_number':70,'multiline':False]
['text':'                  stream_logs=True)','line_number':71,'multiline':False]
