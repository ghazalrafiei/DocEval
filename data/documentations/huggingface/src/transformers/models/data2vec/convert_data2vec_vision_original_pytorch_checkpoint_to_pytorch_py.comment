['text':'!/usr/bin/env python3','line_number':1,'multiline':False]
['text':' encoder layers: output projection, 2 feedforward neural networks and 2 layernorms','line_number':23,'multiline':False]
['text':' projection layer + position embeddings','line_number':47,'multiline':False]
['text':' mask token + shared relative position bias + layernorm','line_number':57,'multiline':False]
['text':' semantic segmentation classification heads','line_number':74,'multiline':False]
['text':' layernorm + classification head','line_number':84,'multiline':False]
['text':' queries, keys and values','line_number':100,'multiline':False]
['text':' gamma_1 and gamma_2','line_number':117,'multiline':False]
['text':' we call them lambda because otherwise they are renamed when using .from_pretrained','line_number':118,'multiline':False]
['text':' relative_position bias table + index','line_number':125,'multiline':False]
['text':' each layer has its own relative position bias','line_number':127,'multiline':False]
['text':' copy state_dict so _load_from_state_dict can modify it','line_number':155,'multiline':False]
['text':' To convert Beit's data2vec_vision to HF you need to copy','line_number':262,'multiline':False]
['text':' https://github.com/facebookresearch/data2vec_vision/blob/main/beit/modeling_finetune.py','line_number':263,'multiline':False]
['text':' into this folder.','line_number':264,'multiline':False]
['text':' noqa: F401','line_number':265,'multiline':False]
['text':' To convert Beit's data2vec_vision to HF you need to copy','line_number':267,'multiline':False]
['text':' https://github.com/facebookresearch/data2vec_vision/blob/main/beit/modeling_cyclical.py','line_number':268,'multiline':False]
['text':' into this folder','line_number':269,'multiline':False]
['text':' IMPORTANT: Note that for now we've only converted the down-stream','line_number':270,'multiline':False]
['text':' model and not the full pretrained model. This means for the integration','line_number':271,'multiline':False]
['text':' test you need to add a `return x` after the following line:','line_number':272,'multiline':False]
['text':' https://github.com/facebookresearch/data2vec_vision/blob/af9a36349aaed59ae66e69b5dabeef2d62fdc5da/beit/modeling_cyclical.py#L197','line_number':273,'multiline':False]
['text':' to make the integration test pass.','line_number':274,'multiline':False]
['text':' noqa: F401','line_number':275,'multiline':False]
['text':' 1. Create model config','line_number':277,'multiline':False]
['text':' 2. Load Beit model','line_number':302,'multiline':False]
['text':' 3. Forward Beit model','line_number':306,'multiline':False]
['text':' 4. Load HF Data2VecVision model','line_number':316,'multiline':False]
['text':' 5. Forward HF Data2VecVision model','line_number':339,'multiline':False]
['text':' 6. Compare','line_number':345,'multiline':False]
['text':' 7. Save','line_number':354,'multiline':False]
['text':' Run the following to convert checkpoints','line_number':362,'multiline':False]
['text':'  python ./convert_data2vec_vision_original_pytorch_checkpoint_to_pytorch.py \','line_number':363,'multiline':False]
['text':'          --beit_checkpoint ./pretrained_base.pt \','line_number':364,'multiline':False]
['text':'          --hf_checkpoint_name "./data2vec-vision-base"','line_number':365,'multiline':False]
['text':'  python ./convert_data2vec_vision_original_pytorch_checkpoint_to_pytorch.py \','line_number':366,'multiline':False]
['text':'          --beit_checkpoint ./finetuned_base.pt \','line_number':367,'multiline':False]
['text':'          --hf_checkpoint_name "./data2vec-vision-base-ft1k"','line_number':368,'multiline':False]
['text':'  python ./convert_data2vec_vision_original_pytorch_checkpoint_to_pytorch.py \','line_number':369,'multiline':False]
['text':'          --beit_checkpoint ./pretrained_large.pt \','line_number':370,'multiline':False]
['text':'          --hf_checkpoint_name "./data2vec-vision-large"','line_number':371,'multiline':False]
['text':'  python ./convert_data2vec_vision_original_pytorch_checkpoint_to_pytorch.py \','line_number':372,'multiline':False]
['text':'          --beit_checkpoint ./finetuned_large.pt \','line_number':373,'multiline':False]
['text':'          --hf_checkpoint_name "./data2vec-vision-large-ft1k"','line_number':374,'multiline':False]
