['text':' coding=utf-8','line_number':1,'multiline':False]
['text':' Copyright 2021, The HuggingFace Inc. team. All rights reserved.','line_number':2,'multiline':False]
['text':'','line_number':3,'multiline':False]
['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':4,'multiline':False]
['text':' you may not use this file except in compliance with the License.','line_number':5,'multiline':False]
['text':' You may obtain a copy of the License at','line_number':6,'multiline':False]
['text':'','line_number':7,'multiline':False]
['text':'     http://www.apache.org/licenses/LICENSE-2.0','line_number':8,'multiline':False]
['text':'','line_number':9,'multiline':False]
['text':' Unless required by applicable law or agreed to in writing, software','line_number':10,'multiline':False]
['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':11,'multiline':False]
['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':12,'multiline':False]
['text':' See the License for the specific language governing permissions and','line_number':13,'multiline':False]
['text':' limitations under the License.','line_number':14,'multiline':False]
['text':' we don't want to run all the generation tests, only a specific subset','line_number':178,'multiline':False]
['text':' override since we have to compute the input embeddings over codebooks','line_number':190,'multiline':False]
['text':' override since we have embeddings / LM heads over multiple codebooks','line_number':215,'multiline':False]
['text':' skip as this model doesn't support all arguments tested','line_number':226,'multiline':False]
['text':' skip as this model has multiple inputs embeds and lm heads that should not be tied','line_number':230,'multiline':False]
['text':' skip as this model has multiple inputs embeds and lm heads that should not be tied','line_number':234,'multiline':False]
['text':' take max batch_size','line_number':242,'multiline':False]
['text':' generate max 3 tokens','line_number':246,'multiline':False]
['text':' override since we don't expect the outputs of `.generate` and `.greedy_search` to be the same, since we perform','line_number':266,'multiline':False]
['text':' additional post-processing in the former','line_number':267,'multiline':False]
['text':' disable cache','line_number':270,'multiline':False]
['text':' override since we don't expect the outputs of `.generate` and `.greedy_search` to be the same, since we perform','line_number':290,'multiline':False]
['text':' additional post-processing in the former','line_number':291,'multiline':False]
['text':' enable cache','line_number':294,'multiline':False]
['text':' override since we don't expect the outputs of `.generate` and `.sample` to be the same, since we perform','line_number':314,'multiline':False]
['text':' additional post-processing in the former','line_number':315,'multiline':False]
['text':' check `generate()` and `sample()` are equal','line_number':330,'multiline':False]
['text':' override since we don't expect the outputs of `.generate` and `.sample` to be the same, since we perform','line_number':345,'multiline':False]
['text':' additional post-processing in the former','line_number':346,'multiline':False]
['text':' disable cache','line_number':349,'multiline':False]
['text':' training is not supported yet for MusicGen','line_number':533,'multiline':False]
['text':' not to test torchscript as the model tester doesn't prepare `input_values` and `padding_mask`','line_number':536,'multiline':False]
['text':' (and `torchscript` hates `None` values).','line_number':537,'multiline':False]
['text':' Similar to `check_musicgen_model_output_attentions`, but with `output_attentions` triggered from the','line_number':608,'multiline':False]
['text':' config file. Contrarily to most models, changing the model's config won't work -- the defaults are loaded','line_number':609,'multiline':False]
['text':' from the inner models' configurations.','line_number':610,'multiline':False]
['text':' model config -> won't work','line_number':611,'multiline':False]
['text':' inner model config -> will work','line_number':628,'multiline':False]
['text':' override since changing `output_attentions` from the top-level model config won't work','line_number':646,'multiline':False]
['text':' override since we have a specific forward signature for musicgen','line_number':654,'multiline':False]
['text':' signature.parameters is an OrderedDict => so arg_names order is deterministic','line_number':661,'multiline':False]
['text':' override since changing `gradient_checkpointing` from the top-level model config won't work','line_number':679,'multiline':False]
['text':' skip as this model has multiple inputs embeds and lm heads that should not be tied','line_number':693,'multiline':False]
['text':' skip as this model has multiple inputs embeds and lm heads that should not be tied','line_number':697,'multiline':False]
['text':' skip as this model has multiple inputs embeds and lm heads that should not be tied','line_number':701,'multiline':False]
['text':' override since changing `output_hidden_states` / `output_attentions` from the top-level model config won't work','line_number':705,'multiline':False]
['text':' no need to test all models as different heads yield the same functionality','line_number':715,'multiline':False]
['text':' override since changing `output_hidden_states` from the top-level model config won't work','line_number':752,'multiline':False]
['text':' check that output_hidden_states also work using config','line_number':788,'multiline':False]
['text':' override since the conv layers and lstm's in encodec are exceptions','line_number':796,'multiline':False]
['text':' override since we have embeddings / LM heads over multiple codebooks','line_number':819,'multiline':False]
['text':' take max batch_size','line_number':833,'multiline':False]
['text':' generate max 3 tokens','line_number':838,'multiline':False]
['text':' override since the `input_ids` cannot be used as the `decoder_input_ids` for musicgen (input / outputs are','line_number':844,'multiline':False]
['text':' different modalities -> different shapes)','line_number':845,'multiline':False]
['text':' override since the `input_ids` cannot be used as the `decoder_input_ids` for musicgen (input / outputs are','line_number':904,'multiline':False]
['text':' different modalities -> different shapes)','line_number':905,'multiline':False]
['text':' prevent flaky generation test failures','line_number':951,'multiline':False]
['text':' disable cache','line_number':988,'multiline':False]
['text':' enable cache','line_number':1011,'multiline':False]
['text':' check `generate()` and `sample()` are equal','line_number':1046,'multiline':False]
['text':' disable cache','line_number':1064,'multiline':False]
['text':' if no bos token id => cannot generate from None','line_number':1101,'multiline':False]
['text':' greedy','line_number':1119,'multiline':False]
['text':' sampling','line_number':1121,'multiline':False]
['text':' prepare the encoder inputs','line_number':1183,'multiline':False]
['text':' prepare the decoder inputs','line_number':1187,'multiline':False]
['text':' fmt: off','line_number':1201,'multiline':False]
['text':' fmt: on','line_number':1208,'multiline':False]
['text':' prepare the text encoder inputs','line_number':1223,'multiline':False]
['text':' prepare the audio encoder inputs','line_number':1227,'multiline':False]
['text':' fmt: off','line_number':1239,'multiline':False]
['text':' fmt: on','line_number':1246,'multiline':False]
['text':' only generate 1 sample with greedy - since it's deterministic all elements of the batch will be the same','line_number':1255,'multiline':False]
['text':' fmt: off','line_number':1261,'multiline':False]
['text':' fmt: on','line_number':1268,'multiline':False]
['text':' for stochastic sampling we can generate multiple outputs','line_number':1277,'multiline':False]
['text':' fmt: off','line_number':1284,'multiline':False]
['text':' fmt: on','line_number':1291,'multiline':False]
['text':' prepare the encoder inputs','line_number':1303,'multiline':False]
['text':' fmt: off','line_number':1311,'multiline':False]
['text':' fmt: on','line_number':1318,'multiline':False]
['text':' prepare the encoder inputs','line_number':1330,'multiline':False]
['text':' fmt: off','line_number':1338,'multiline':False]
['text':' fmt: on','line_number':1345,'multiline':False]
['text':' prepare the encoder inputs','line_number':1357,'multiline':False]
['text':' fmt: off','line_number':1366,'multiline':False]
['text':' fmt: on','line_number':1373,'multiline':False]
['text':' fmt: off','line_number':1391,'multiline':False]
['text':' fmt: on','line_number':1398,'multiline':False]
['text':' input values take shape 32000 and we generate from there','line_number':1402,'multiline':False]
['text':' only generate 1 sample with greedy - since it's deterministic all elements of the batch will be the same','line_number':1420,'multiline':False]
['text':' fmt: off','line_number':1426,'multiline':False]
['text':' fmt: on','line_number':1439,'multiline':False]
['text':' (bsz, channels, seq_len)','line_number':1441,'multiline':False]
['text':' create stereo inputs','line_number':1451,'multiline':False]
['text':' fmt: off','line_number':1460,'multiline':False]
['text':' fmt: on','line_number':1473,'multiline':False]
['text':' (bsz, channels, seq_len)','line_number':1475,'multiline':False]
['text':' input values take shape 32000 and we generate from there - we check the last (generated) values','line_number':1477,'multiline':False]
