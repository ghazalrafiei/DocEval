['text':' Test closing connections from internal clients on featureCompatibilityVersion changes.','line_number':1,'multiline':False]
['text':' Mimic running a find command from an internal client with a lower binary version.','line_number':16,'multiline':False]
['text':' The value of the 'internalClient.maxWireVersion' does not matter for the purpose of this','line_number':20,'multiline':False]
['text':' test as long as it is less than the latest server's maxWireVersion. The server will tag','line_number':21,'multiline':False]
['text':' this connection as an internal client connection with a lower binary version on receiving','line_number':22,'multiline':False]
['text':' a 'hello' with 'internalClient.maxWireVersion' less than the server's maxWireVersion.','line_number':23,'multiline':False]
['text':' Connections with such a tag are closed by the server on certain FCV changes.','line_number':24,'multiline':False]
['text':'','line_number':25,'multiline':False]
['text':' The 'hello' command below will succeed because this is run through the shell and the','line_number':26,'multiline':False]
['text':' shell is always compatible talking to the server. In reality though, a real internal','line_number':27,'multiline':False]
['text':' client with a lower binary version is expected to hang up immediately after receiving the','line_number':28,'multiline':False]
['text':' response to the 'hello' command from a latest server with an upgraded FCV.','line_number':29,'multiline':False]
['text':' Since mongod expects other cluster members to always include explicit read/write concern','line_number':35,'multiline':False]
['text':' (on commands that accept read/write concern), this test must be careful to mimic this','line_number':36,'multiline':False]
['text':' behavior.','line_number':37,'multiline':False]
['text':' Downgrading to oldVersion.','line_number':67,'multiline':False]
['text':' Test that connections from internal clients with lower binary versions are closed on FCV','line_number':68,'multiline':False]
['text':' downgrade. In reality, there shouldn't be any long-lived open connections from internal','line_number':69,'multiline':False]
['text':' clients with lower binary versions before the downgrade, because they are expected to hang up','line_number':70,'multiline':False]
['text':' immediately after receiving the response to the initial 'hello' command from an incompatible','line_number':71,'multiline':False]
['text':' server. But we still want to test that the server also try to close those incompatible','line_number':72,'multiline':False]
['text':' connections proactively on FCV downgrade.','line_number':73,'multiline':False]
['text':' Downgraded to oldVersion.','line_number':78,'multiline':False]
['text':' Test that connections from internal clients with lower binary versions are not closed on FCV','line_number':79,'multiline':False]
['text':' fully downgraded to oldVersion.','line_number':80,'multiline':False]
['text':' Upgrading from oldVersion to 'latest'.','line_number':83,'multiline':False]
['text':' Test that connections from internal clients with lower binary versions are closed on FCV','line_number':84,'multiline':False]
['text':' upgrade.','line_number':85,'multiline':False]
['text':' Upgraded to 'latest'.','line_number':88,'multiline':False]
['text':' Test that connections from internal clients with lower binary versions are closed on FCV','line_number':89,'multiline':False]
['text':' fully upgraded to 'latest'.','line_number':90,'multiline':False]
['text':' Test upgrade/downgrade between 'latest' and 'last-continuous' if 'last-continuous' is not','line_number':94,'multiline':False]
['text':' 'last-lts'.','line_number':95,'multiline':False]
['text':' Upgrading from last-lts to last-continuous. This FCV transition is allowed through the','line_number':99,'multiline':False]
['text':' setFeatureCompatibilityVersion command with fromConfigServer: true.','line_number':100,'multiline':False]
['text':' Test upgrade/downgrade between 'latest' and 'last-lts'.','line_number':104,'multiline':False]
