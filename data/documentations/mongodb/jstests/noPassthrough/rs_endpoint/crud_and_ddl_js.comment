['text':'
 * Tests that CRUD and DDL commands work correctly when the replica set endpoint is used.
 *
 * @tags: [
 *   requires_fcv_73,
 *   featureFlagEmbeddedRouter,
 *   featureFlagSecurityToken,
 *   requires_persistence
 * ]
 ','line_number':1,'multiline':True]
['text':' Requires getMore commands.','line_number':36,'multiline':False]
['text':' Currently, sharding isn't supported in serverless. So the cluster cannot become','line_number':47,'multiline':False]
['text':' multi-shard.','line_number':48,'multiline':False]
['text':' Add a second shard to the cluster.','line_number':53,'multiline':False]
['text':' Run the enableSharding and addShard commands against shard0's primary mongod instead','line_number':61,'multiline':False]
['text':' to verify that replica set endpoint supports router commands.','line_number':62,'multiline':False]
['text':' TODO (PM-3364): Remove the enableSharding command below once we start tracking unsharded','line_number':63,'multiline':False]
['text':' collections.','line_number':64,'multiline':False]
['text':' TODO (SERVER-83380): Connect to the router port on a shardsvr mongod instead.','line_number':70,'multiline':False]
['text':' shard0 has two documents for the collection.','line_number':78,'multiline':False]
['text':' shard1 doesn't have any documents for the collection.','line_number':80,'multiline':False]
['text':' shard0 and shard1 each have one document for the collection.','line_number':89,'multiline':False]
['text':' There is now only one document left in the collection and it is on shard0.','line_number':95,'multiline':False]
['text':' Remove the second shard from the cluster.','line_number':99,'multiline':False]
['text':' Add the second shard back but convert the config shard to dedicated config server.','line_number':115,'multiline':False]
['text':' shard0Primary ','line_number':140,'multiline':True]
['text':' TODO (SERVER-83433): Make the replica set have secondaries to get test coverage for','line_number':146,'multiline':False]
['text':' running db hash check while the replica set is fsync locked.','line_number':147,'multiline':False]
['text':' shard0Primary ','line_number':163,'multiline':True]
['text':' TODO (SERVER-81968): Re-enable single-shard cluster test cases once config shards support','line_number':166,'multiline':False]
['text':' embedded routers.','line_number':167,'multiline':False]
['text':' {','line_number':168,'multiline':False]
['text':'     jsTest.log("Running tests for a single-shard cluster");','line_number':169,'multiline':False]
['text':'     const st = new ShardingTest({','line_number':170,'multiline':False]
['text':'         shards: 1,','line_number':171,'multiline':False]
['text':'         rs: {','line_number':172,'multiline':False]
['text':'             // TODO (SERVER-83433): Make the replica set have secondaries to get test coverage','line_number':173,'multiline':False]
['text':'             // for running db hash check while the replica set is fsync locked.','line_number':174,'multiline':False]
['text':'             nodes: 1,','line_number':175,'multiline':False]
['text':'             setParameter: {featureFlagReplicaSetEndpoint: true}','line_number':176,'multiline':False]
['text':'         },','line_number':177,'multiline':False]
['text':'         configShard: true,','line_number':178,'multiline':False]
['text':'     });','line_number':179,'multiline':False]
['text':'     const tearDownFunc = () => st.stop();','line_number':180,'multiline':False]
['text':'     runTests(st.rs0.getPrimary() /* shard0Primary */, tearDownFunc);','line_number':182,'multiline':False]
['text':' }','line_number':183,'multiline':False]
['text':' For serverless, commands against user collections require the "$tenant" field and auth.','line_number':187,'multiline':False]
['text':' shard0Primary ','line_number':234,'multiline':True]
['text':' isMultitenant ','line_number':234,'multiline':True]
