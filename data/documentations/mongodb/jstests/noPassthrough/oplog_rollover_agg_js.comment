['text':' Tests the behaviour of an agg with $_requestReshardingResumeToken on an oplog which rolls over.','line_number':1,'multiline':False]
['text':' @tags: [','line_number':2,'multiline':False]
['text':'   requires_replication,','line_number':3,'multiline':False]
['text':'   requires_majority_read_concern,','line_number':4,'multiline':False]
['text':' ]','line_number':5,'multiline':False]
['text':' size in MB','line_number':8,'multiline':False]
['text':' Insert one document into the test collection.','line_number':20,'multiline':False]
['text':' Record the optime of the insert to resume from later in the test.','line_number':24,'multiline':False]
['text':' Update the document to create another oplog entry.','line_number':27,'multiline':False]
['text':' Verify that an aggregation which requests a resharding resume token but does not include a filter','line_number':30,'multiline':False]
['text':' on 'ts' is rejected.','line_number':31,'multiline':False]
['text':' Verify that we can start an aggregation from the timestamp that we took earlier, and that we see','line_number':40,'multiline':False]
['text':' the subsequent update operation.','line_number':41,'multiline':False]
['text':' Confirm that we can begin an aggregation at a timestamp that precedes the start of the oplog, if','line_number':55,'multiline':False]
['text':' the first entry in the oplog is the replica set initialization message.','line_number':56,'multiline':False]
['text':' Roll over the entire oplog such that none of the events are still present.','line_number':76,'multiline':False]
['text':' The oplog has rolled over if the op that used to be newest is now older than the','line_number':83,'multiline':False]
['text':' oplog's current oldest entry. Said another way, the oplog is rolled over when','line_number':84,'multiline':False]
['text':' everything in the oplog is newer than what used to be the newest entry.','line_number':85,'multiline':False]
['text':' Test that attempting to start from a timestamp that has already fallen off the oplog fails, if we','line_number':94,'multiline':False]
['text':' specify $_requestReshardingResumeToken.','line_number':95,'multiline':False]
['text':' However, the same aggregation succeeds if we do not specify $_requestReshardingResumeToken. Since','line_number':112,'multiline':False]
['text':' we have just rolled over the oplog, we may encounter a "CappedPositionLost" error, which can be','line_number':113,'multiline':False]
['text':' safely retried.','line_number':114,'multiline':False]
['text':' Requesting resume tokens on a find command does not imply 'assertMinTsHasNotFallenOffOplog'.','line_number':131,'multiline':False]
['text':' Since we have just rolled over the oplog, we may encounter a "CappedPositionLost" error, which','line_number':132,'multiline':False]
['text':' can be safely retried.','line_number':133,'multiline':False]
