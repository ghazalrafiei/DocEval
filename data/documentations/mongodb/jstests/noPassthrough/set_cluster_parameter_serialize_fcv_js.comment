['text':' Test setClusterParameter-setFeatureCompatibilityVersion serialization.','line_number':1,'multiline':False]
['text':' @tags: [','line_number':2,'multiline':False]
['text':'  creates_and_authenticates_user,','line_number':3,'multiline':False]
['text':'  requires_auth,','line_number':4,'multiline':False]
['text':'  requires_non_retryable_commands,','line_number':5,'multiline':False]
['text':'  requires_persistence,','line_number':6,'multiline':False]
['text':'  requires_replication,','line_number':7,'multiline':False]
['text':' ]','line_number':8,'multiline':False]
['text':' Functions run in parallel shells to downgrade FCV and update a cluster parameter.','line_number':13,'multiline':False]
['text':' Assert that the cluster parameter is initially at default value of 0.','line_number':30,'multiline':False]
['text':' Set a failpoint to make setFeatureCompatibilityVersion hang when modifying the FCV document.','line_number':39,'multiline':False]
['text':' setClusterParameter should also hang until setFCV unblocks.','line_number':40,'multiline':False]
['text':' Run 2 parallel shells - one to downgrade FCV and another to set a cluster parameter.','line_number':43,'multiline':False]
['text':' Assert that the cluster parameter has been disabled.','line_number':49,'multiline':False]
['text':' Turn off the failpoint. This should unblock setFCV, allowing FCV downgrade.','line_number':54,'multiline':False]
['text':' setClusterParameter should also complete but return an error since the cluster parameter','line_number':55,'multiline':False]
['text':' is unavailable on the downgraded FCV.','line_number':56,'multiline':False]
['text':' Verify that FCV upgrade succeeds when there are no ongoing setClusterParameter operations.','line_number':61,'multiline':False]
['text':' The cluster parameter should also reenable.','line_number':62,'multiline':False]
['text':' Now, set a failpoint to make setClusterParameter hang.','line_number':73,'multiline':False]
['text':' Assert that FCV downgrade remains hung (Current FCV is still latestFCV) while','line_number':80,'multiline':False]
['text':' setClusterParameter is incomplete. This occurs due to contention for the global lock.','line_number':81,'multiline':False]
['text':' Turn off the failpoint and allow setClusterParameter to drain successfully.','line_number':84,'multiline':False]
['text':' Assert that FCV downgrade proceeded normally after setCSP completed. The CSP should now be','line_number':89,'multiline':False]
['text':' disabled.','line_number':90,'multiline':False]
['text':' Check that the starting value of cwspTestNeedsLatestFCV is the default of 0.','line_number':98,'multiline':False]
['text':' Set a failpoint to make setFeatureCompatibilityVersion hang on a shard. setClusterParameter','line_number':107,'multiline':False]
['text':' should also complete but return an error since cwspTestNeedsLatestFCV is unavailable on','line_number':108,'multiline':False]
['text':' the lower FCV.','line_number':109,'multiline':False]
['text':' Turn off the failpoint and wait for the hung FCV downgrade to complete.','line_number':120,'multiline':False]
['text':' Assert that the FCV downgraded successfully and the cluster parameter remains disabled on','line_number':124,'multiline':False]
['text':' the config server due to the FCV downgrade.','line_number':125,'multiline':False]
['text':' After the failpoint is turned off, FCV upgrade should occur normally.','line_number':131,'multiline':False]
['text':' cwspTestNeedsLatestFCV should also become available.','line_number':132,'multiline':False]
['text':' Set a failpoint to make setClusterParameter hang on a shard. FCV downgrade should','line_number':143,'multiline':False]
['text':' fail while setClusterParameter is in progress.','line_number':144,'multiline':False]
['text':' Turn off the failpoint and wait for the hung setClusterParameter operation to drain.','line_number':153,'multiline':False]
['text':' Verify that the cluster parameter was correctly set and FCV remains at latestFCV.','line_number':157,'multiline':False]
