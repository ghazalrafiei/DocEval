['text':' Tests multi-document transactions metrics in the serverStatus output.','line_number':1,'multiline':False]
['text':' @tags: [uses_transactions]','line_number':2,'multiline':False]
['text':' Verifies that the server status response has the fields that we expect.','line_number':5,'multiline':False]
['text':' Verifies that the given value of the server status response is incremented in the way','line_number':30,'multiline':False]
['text':' we expect.','line_number':31,'multiline':False]
['text':' Set up the replica set.','line_number':38,'multiline':False]
['text':' Set up the test database.','line_number':44,'multiline':False]
['text':' Start the session.','line_number':52,'multiline':False]
['text':' Get state of server status before the transaction.','line_number':60,'multiline':False]
['text':' This transaction will commit.','line_number':64,'multiline':False]
['text':' Compare server status after starting a transaction with the server status before.','line_number':67,'multiline':False]
['text':' Verify that the open transaction counter is incremented while inside the transaction.','line_number':73,'multiline':False]
['text':' Verify that when not running an operation, the transaction is inactive.','line_number':75,'multiline':False]
['text':' Compare server status after the transaction commit with the server status before.','line_number':79,'multiline':False]
['text':' Verify that current open counter is decremented on commit.','line_number':85,'multiline':False]
['text':' Verify that both active and inactive are 0 on commit.','line_number':87,'multiline':False]
['text':' This transaction will abort.','line_number':91,'multiline':False]
['text':' Compare server status after starting a transaction with the server status before.','line_number':94,'multiline':False]
['text':' Verify that the open transaction counter is incremented while inside the transaction.','line_number':100,'multiline':False]
['text':' Verify that when not running an operation, the transaction is inactive.','line_number':102,'multiline':False]
['text':' Compare server status after the transaction abort with the server status before.','line_number':106,'multiline':False]
['text':' Verify that current open counter is decremented on abort.','line_number':113,'multiline':False]
['text':' Verify that both active and inactive are 0 on abort.','line_number':115,'multiline':False]
['text':' This transaction will abort due to a duplicate key insert.','line_number':119,'multiline':False]
['text':' Compare server status after starting a transaction with the server status before.','line_number':122,'multiline':False]
['text':' Inserting a new document will work fine, and the transaction starts.','line_number':124,'multiline':False]
['text':' Verify that the open transaction counter is incremented while inside the transaction.','line_number':129,'multiline':False]
['text':' Verify that when not running an operation, the transaction is inactive.','line_number':131,'multiline':False]
['text':' Compare server status after the transaction abort with the server status before.','line_number':135,'multiline':False]
['text':' The duplicated insert will fail, causing the transaction to abort.','line_number':136,'multiline':False]
['text':' Ensure that the transaction was aborted on failure.','line_number':138,'multiline':False]
['text':' Verify that current open counter is decremented on abort caused by an error.','line_number':145,'multiline':False]
['text':' Verify that both active and inactive are 0 on abort.','line_number':147,'multiline':False]
['text':' Hang the transaction on a failpoint in the middle of an operation to check active and','line_number':151,'multiline':False]
['text':' inactive counters while operation is running inside a transaction.','line_number':152,'multiline':False]
['text':' Keep running currentOp() until we see the transaction subdocument.','line_number':168,'multiline':False]
['text':' Verify that the open transaction counter is incremented while inside the transaction.','line_number':183,'multiline':False]
['text':' Verify that the metrics show that the transaction is active while inside the operation.','line_number':185,'multiline':False]
['text':' Now the transaction can proceed.','line_number':189,'multiline':False]
['text':' Verify that current open counter is decremented on commit.','line_number':194,'multiline':False]
['text':' Verify that both active and inactive are 0 after the transaction finishes.','line_number':196,'multiline':False]
['text':' End the session and stop the replica set.','line_number':200,'multiline':False]
