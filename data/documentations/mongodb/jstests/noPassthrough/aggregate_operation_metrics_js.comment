['text':'*
 * Tests command output from the $operationMetrics aggregation stage.
 * @tags: [
 *   requires_fcv_63,
 *   requires_replication,
 * ]
 ','line_number':1,'multiline':True]
['text':' Merge all returned documents into a single object keyed by database name.','line_number':50,'multiline':False]
['text':' $operationMetrics may only be run against the admin database and in a 'collectionless' form.','line_number':68,'multiline':False]
['text':' Perform very basic reads and writes on two different databases.','line_number':82,'multiline':False]
['text':' Clear metrics after waiting for replication to ensure we are not observing metrics from','line_number':97,'multiline':False]
['text':' a previous loop iteration.','line_number':98,'multiline':False]
['text':' Run an aggregation with a batch size of 1.','line_number':111,'multiline':False]
['text':' Merge all returned documents into a single object keyed by database name.','line_number':115,'multiline':False]
['text':' Trigger a getMore to retrieve metrics for the other database.','line_number':121,'multiline':False]
['text':' Ensure the two user database have present metrics.','line_number':127,'multiline':False]
['text':' Ensure read metrics are attributed to the correct replication state.','line_number':135,'multiline':False]
['text':' CPU time aggregation is only supported on Linux.','line_number':163,'multiline':False]
['text':' Ensure the CPU time is increasing.','line_number':165,'multiline':False]
['text':' Ensure the global CPU time matches the aggregated time for both databases.','line_number':169,'multiline':False]
['text':' Metrics for these databases should not be collected or reported.','line_number':174,'multiline':False]
['text':' Ensure this stage can be composed with other pipeline stages.','line_number':179,'multiline':False]
['text':' No results from the aggregation because of the $out.','line_number':188,'multiline':False]
['text':' There are no additional metrics for the new database because the command was run on the','line_number':191,'multiline':False]
['text':' 'admin' database and it does not collect metrics.','line_number':192,'multiline':False]
['text':' Metrics should not have changed.','line_number':196,'multiline':False]
['text':' Ensure the output collection has the 2 databases that existed at the start of the operation.','line_number':206,'multiline':False]
['text':' Fetch and don't clear metrics.','line_number':213,'multiline':False]
['text':' Fetch and clear metrics.','line_number':217,'multiline':False]
['text':' Ensure no metrics are reported.','line_number':221,'multiline':False]
['text':' Ensure the serverStatus metrics are cleared except for cpuNanos.','line_number':225,'multiline':False]
['text':' Insert something and ensure metrics are still reporting.','line_number':235,'multiline':False]
['text':' On the primary, this insert's metrics should be recorded, but not on the secondary. Since it','line_number':239,'multiline':False]
['text':' is applied by the batch applier on the secondary, it is not a user operation and should not','line_number':240,'multiline':False]
['text':' count toward any metrics.','line_number':241,'multiline':False]
