['text':'*
 * Test that the queryStats metrics are aggregated properly by distinct query shape over getMore
 * calls, for agg commands.
 * @tags: [requires_fcv_72]
 ','line_number':1,'multiline':True]
['text':' Turn on the collecting of queryStats metrics.','line_number':8,'multiline':False]
['text':' Bulk insert documents to reduces roundtrips and make timeout on a slow machine less likely.','line_number':18,'multiline':False]
['text':' Assert that two queries with identical structures are represented by the same key.','line_number':26,'multiline':False]
['text':' Note: toArray() is necessary for the batchSize-limited query to run to cursor exhaustion','line_number':28,'multiline':False]
['text':' (when it writes to the queryStats store).','line_number':29,'multiline':False]
['text':' This command will return all queryStats store entires.','line_number':33,'multiline':False]
['text':' Assert there is only one entry.','line_number':35,'multiline':False]
['text':' Assert we update execution count for identically shaped queries.','line_number':42,'multiline':False]
['text':' Assert queryStats values are accurate for the two above queries.','line_number':45,'multiline':False]
['text':' Assert on batchSize-limited queries that killCursors will write metrics with partial results to','line_number':55,'multiline':False]
['text':' the queryStats store.','line_number':56,'multiline':False]
['text':' Issue one getMore for the first query, so 2 * fooEqBatchSize documents are returned total.','line_number':60,'multiline':False]
['text':' Kill both cursors so the queryStats metrics are stored.','line_number':64,'multiline':False]
['text':' This filters queryStats entires to just the ones entered when running above find queries.','line_number':68,'multiline':False]
['text':' If there are getMore calls, queryExecMicros should be greater than or equal to','line_number':93,'multiline':False]
['text':' firstResponseExecMicros.','line_number':94,'multiline':False]
['text':' If there is no getMore calls, firstResponseExecMicros and queryExecMicros should be','line_number':98,'multiline':False]
['text':' equal.','line_number':99,'multiline':False]
['text':' Assert that options such as limit/sort create different keys, and that repeating a query shape','line_number':105,'multiline':False]
['text':' ({foo: {$eq}}) aggregates metrics across executions.','line_number':106,'multiline':False]
['text':' This filters queryStats entires to just the ones entered when running above find queries.','line_number':112,'multiline':False]
['text':' This filters to just the queryStats for query coll.find().sort({"foo": 1}).batchSize(2).','line_number':121,'multiline':False]
['text':' This filters to just the queryStats for query coll.find({foo: {$eq:','line_number':133,'multiline':False]
['text':' 1}}).limit(query2Limit).batchSize(2).','line_number':134,'multiline':False]
['text':' This filters to just the queryStats for query coll.find({foo: {$eq: 0}}).batchSize(2).','line_number':146,'multiline':False]
