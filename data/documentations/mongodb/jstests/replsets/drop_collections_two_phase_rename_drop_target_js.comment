['text':'*
 * Test to ensure that the two phase drop behavior is applied to the target collection of a
 * renameCollection command when dropTarget is set to true.
 ','line_number':1,'multiline':True]
['text':' Return a list of all indexes for a given collection. Use 'args' as the','line_number':8,'multiline':False]
['text':' 'listIndexes' command arguments.','line_number':9,'multiline':False]
['text':' Assumes all indexes in the collection fit in the first batch of results.','line_number':10,'multiline':False]
['text':' Set up a two phase drop test.','line_number':19,'multiline':False]
['text':' Initialize replica set.','line_number':26,'multiline':False]
['text':' Check for 'system.drop' two phase drop support.','line_number':29,'multiline':False]
['text':' Create the collections that will be renamed and dropped.','line_number':36,'multiline':False]
['text':' Collection renames with dropTarget set to true should handle long index names in the target','line_number':40,'multiline':False]
['text':' collection gracefully.','line_number':41,'multiline':False]
['text':' In the target collection, which will be dropped, create one index with a "too long" name, and','line_number':49,'multiline':False]
['text':' one with a name of acceptable size.','line_number':50,'multiline':False]
['text':' Insert documents into both collections so that we can tell them apart.','line_number':54,'multiline':False]
['text':' Prevent renameCollection from being applied on the secondary so that we can examine the state','line_number':59,'multiline':False]
['text':' of the primary after target collection has been dropped.','line_number':60,'multiline':False]
['text':' This logs each operation being applied.','line_number':65,'multiline':False]
['text':' When the target collection exists, the renameCollection command should fail if dropTarget','line_number':70,'multiline':False]
['text':' flag is set to false or is omitted.','line_number':71,'multiline':False]
['text':' Rename collection with dropTarget set to true. Check collection contents after rename.','line_number':78,'multiline':False]
['text':' Confirm that original target collection is now a drop-pending collection.','line_number':87,'multiline':False]
['text':' COMMIT collection drop.','line_number':93,'multiline':False]
['text':' Confirm in the logs that the renameCollection dropped the target collection on the','line_number':100,'multiline':False]
['text':' secondary using two phase collection drop.','line_number':101,'multiline':False]
['text':' Rename target collection back to source collection. This helps to ensure the collection','line_number':104,'multiline':False]
['text':' metadata is updated correctly on both primary and secondary.','line_number':105,'multiline':False]
['text':' Reset log level.','line_number':109,'multiline':False]
