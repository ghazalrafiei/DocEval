['text':'*
 * Tests that initial sync survives a restart during each stage of the cloning process.
 * @tags: [
 *   requires_persistence,
 * ]
 ','line_number':1,'multiline':True]
['text':' The default WC is majority and this test can't satisfy majority writes.','line_number':17,'multiline':False]
['text':' Add some data to be cloned.','line_number':21,'multiline':False]
['text':' This test is specifically testing that the cloners stop, so we turn off the','line_number':29,'multiline':False]
['text':' oplog fetcher to ensure that we don't inadvertently test that instead.','line_number':30,'multiline':False]
['text':' Set us up to stop right before the given stage.','line_number':44,'multiline':False]
['text':' Set us up to stop after the given stage. This will also release the failpoint for the','line_number':47,'multiline':False]
['text':' previous stage, if it was set.','line_number':48,'multiline':False]
['text':' Release the initial failpoint if set.','line_number':51,'multiline':False]
['text':' We stop the node and wait for it, then start it separately, to avoid the clone completing','line_number':59,'multiline':False]
['text':' before the node actually stops.','line_number':60,'multiline':False]
['text':' Release the syncing node fail point to allow retries while the node is down and restarting.','line_number':63,'multiline':False]
['text':' Make sure some retries happen while the sync source is completely down.','line_number':66,'multiline':False]
['text':' Turning on rsSyncApplyStop prevents the sync source from coming out of RECOVERING,','line_number':72,'multiline':False]
['text':' so we can ensure the syncing node does some retries while the sync source is not ready.','line_number':73,'multiline':False]
['text':' restart ','line_number':78,'multiline':True]
['text':' Wait for the sync source to be in RECOVERING.','line_number':80,'multiline':False]
['text':' Make sure some retries happen while the sync source is available and in "RECOVERING"','line_number':87,'multiline':False]
['text':' Now let the sync source finish recovering and keep retrying.','line_number':93,'multiline':False]
['text':' Wait for initial sync to complete.','line_number':116,'multiline':False]
