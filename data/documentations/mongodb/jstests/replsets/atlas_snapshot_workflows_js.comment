['text':'*
 * This test simulates workflows which are performed by the Atlas automation agent, where nodes are
 * created or restarted using file system snapshots.
 *
 * @tags: [requires_persistence]
 ','line_number':1,'multiline':True]
['text':' Set up a standard 3-node replica set.  Note the two secondaries are priority 0; this is','line_number':8,'multiline':False]
['text':' different than the real Atlas configuration where the secondaries would be electable.','line_number':9,'multiline':False]
['text':' Snapshot works only on enterprise.','line_number':10,'multiline':False]
['text':' We shorten the election timeout period so the tests with an unhealthy set run and recover','line_number':24,'multiline':False]
['text':' faster.','line_number':25,'multiline':False]
['text':' Add some data.','line_number':30,'multiline':False]
['text':' Add some data after the backup.','line_number':60,'multiline':False]
['text':' Wait for the set to become unhealthy.','line_number':68,'multiline':False]
['text':' Atlas always adds nodes with 0 votes and priority','line_number':71,'multiline':False]
['text':' The second disconnect ensures we can't reach the new node from the 'down' nodes.','line_number':74,'multiline':False]
['text':' Make sure we can replicate to it.  This only works if the set was healthy, otherwise we','line_number':93,'multiline':False]
['text':' can't.','line_number':94,'multiline':False]
['text':' Make sure the set is still consistent after adding the node.','line_number':100,'multiline':False]
['text':' If we were in a majority-down scenario, wait for the primary to be re-elected.','line_number':102,'multiline':False]
['text':' Remove our extra node.','line_number':107,'multiline':False]
['text':' Add some data after the backup.','line_number':122,'multiline':False]
['text':' Wait for the set to become unhealthy.','line_number':127,'multiline':False]
['text':' restart ','line_number':137,'multiline':True]
['text':' We can't use awaitSecondaryNodes because the set might not be healthy.','line_number':138,'multiline':False]
['text':' Make sure we can replicate to it, if the set is otherwise healthy.','line_number':141,'multiline':False]
['text':' Make sure the set is still consistent after resyncing the node.','line_number':144,'multiline':False]
['text':' If we were in a majority-down scenario, wait for the primary to be re-elected.','line_number':146,'multiline':False]
