['text':'*
 * Tests the behavior of the $geoNear stage by varying 'distanceField' and 'includeLocs'
 * (specifically, by specifying nested fields, overriding existing fields, and so on).
 ','line_number':1,'multiline':True]
['text':'*
 * Runs an aggregation with a $geoNear stage using 'geoSpec' and an optional $project stage
 * using 'projSpec'. Returns the first result; that is, the result closest to the "near" point.
 ','line_number':10,'multiline':True]
['text':' Use documents with a variety of different fields: scalars, arrays, legacy points and GeoJSON','line_number':26,'multiline':False]
['text':' objects.','line_number':27,'multiline':False]
['text':' We test with a 2dsphere index, since 2d indexes can't support GeoJSON objects.','line_number':50,'multiline':False]
['text':' Populate the collection.','line_number':53,'multiline':False]
['text':' Define a custom way to compare documents since the results here might differ by insignificant','line_number':58,'multiline':False]
['text':' amounts.','line_number':59,'multiline':False]
['text':' Allow some minor differences in the','line_number':67,'multiline':False]
['text':' numbers.','line_number':68,'multiline':False]
['text':'','line_number':77,'multiline':False]
['text':' Tests for "distanceField".','line_number':78,'multiline':False]
['text':'','line_number':79,'multiline':False]
['text':' Test that "distanceField" can be computed in a new field.','line_number':82,'multiline':False]
['text':' Test that "distanceField" can be computed in a new nested field.','line_number':86,'multiline':False]
['text':' Test that "distanceField" can overwrite an existing scalar field.','line_number':90,'multiline':False]
['text':' Test that "distanceField" can completely overwrite an existing array field.','line_number':94,'multiline':False]
['text':' TODO (SERVER-35561): When "includeLocs" shares a path prefix with an existing field, the','line_number':98,'multiline':False]
['text':' fields are overwritten, even if they could be preserved.','line_number':99,'multiline':False]
['text':'','line_number':103,'multiline':False]
['text':' Tests for both "includeLocs" and "distanceField".','line_number':104,'multiline':False]
['text':'','line_number':105,'multiline':False]
['text':' Test that "distanceField" and "includeLocs" can both be specified.','line_number':107,'multiline':False]
['text':' Test that "distanceField" and "includeLocs" can be the same path. The result is arbitrary','line_number':112,'multiline':False]
['text':' ("includeLocs" wins).','line_number':113,'multiline':False]
['text':' Test that "distanceField" and "includeLocs" are both preserved when their paths share a','line_number':119,'multiline':False]
['text':' prefix but do not conflict.','line_number':120,'multiline':False]
['text':'','line_number':126,'multiline':False]
['text':' Tests for "includeLocs" only. Project out the distance field.','line_number':127,'multiline':False]
['text':'','line_number':128,'multiline':False]
['text':' Test that "includeLocs" can be computed in a new field.','line_number':131,'multiline':False]
['text':' Test that "includeLocs" can be computed in a new nested field.','line_number':137,'multiline':False]
['text':' Test that "includeLocs" can overwrite an existing scalar field.','line_number':144,'multiline':False]
['text':' Test that "includeLocs" can completely overwrite an existing array field.','line_number':150,'multiline':False]
['text':' TODO (SERVER-35561): When "includeLocs" shares a path prefix with an existing field, the','line_number':156,'multiline':False]
['text':' fields are overwritten, even if they could be preserved.','line_number':157,'multiline':False]
