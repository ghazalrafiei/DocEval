['text':' Tests that the $merge stage enforces that the "on" fields can be used to uniquely identify','line_number':1,'multiline':False]
['text':' documents by checking that there is a supporting unique, non-partial, collator-compatible index','line_number':2,'multiline':False]
['text':' in the index catalog.','line_number':3,'multiline':False]
['text':'','line_number':4,'multiline':False]
['text':' Note that this test does *not* use the drop shell helper but instead runs the drop command','line_number':5,'multiline':False]
['text':' manually. This is to avoid implicit creation and sharding of the $merge target collections in the','line_number':6,'multiline':False]
['text':' passthrough suites.','line_number':7,'multiline':False]
['text':' Helper to drop a collection without using the shell helper, and thus avoiding the implicit','line_number':19,'multiline':False]
['text':' recreation in the passthrough suites.','line_number':20,'multiline':False]
['text':' Test that using {_id: 1} or not providing a unique key does not require any special indexes.','line_number':25,'multiline':False]
['text':' Skip the combination of merge modes which will fail depending on the contents of','line_number':29,'multiline':False]
['text':' the source and target collection, as this will cause the assertion below to trip.','line_number':30,'multiline':False]
['text':' Test that using "_id" or not specifying "on" fields works for a collection which does','line_number':54,'multiline':False]
['text':' not exist.','line_number':55,'multiline':False]
['text':' Test that a unique index on the "on" fields can be used to satisfy the requirement.','line_number':72,'multiline':False]
['text':' Create a non-unique index and make sure that doesn't work.','line_number':109,'multiline':False]
['text':' Test that a unique index on the "on" fields cannot be used to satisfy the requirement if it','line_number':116,'multiline':False]
['text':' is a partial index.','line_number':117,'multiline':False]
['text':' Test that a unique index on the "on" fields cannot be used to satisfy the requirement if it','line_number':129,'multiline':False]
['text':' has a different collation.','line_number':130,'multiline':False]
['text':' Test that a non-unique index with the same collation cannot be used.','line_number':158,'multiline':False]
['text':' Test that a collection-default collation will be applied to the index, but not the','line_number':164,'multiline':False]
['text':' $merge's update or insert into that collection. The pipeline will inherit a','line_number':165,'multiline':False]
['text':' collection-default collation, but from the source collection, not the $merge's target','line_number':166,'multiline':False]
['text':' collection.','line_number':167,'multiline':False]
['text':' Test that when the source collection and foreign collection have the same default','line_number':187,'multiline':False]
['text':' collation, a unique index on the foreign collection can be used.','line_number':188,'multiline':False]
['text':' This aggregate does not specify a collation, but it should inherit the default collation','line_number':194,'multiline':False]
['text':' from 'newSourceColl', and therefore the index on 'target' should be eligible for use','line_number':195,'multiline':False]
['text':' since it has the same collation.','line_number':196,'multiline':False]
['text':' Test that an explicit "simple" collation can be used with an index without a collation.','line_number':201,'multiline':False]
['text':' Test that a unique index which is not simply ascending/descending fields cannot be used for','line_number':217,'multiline':False]
['text':' the "on" fields.','line_number':218,'multiline':False]
['text':' MongoDB does not support unique hashed indexes.','line_number':240,'multiline':False]
['text':' Test that a unique index with dotted field names can be used.','line_number':246,'multiline':False]
['text':' Test that we cannot use arrays with a dotted path within a $merge.','line_number':292,'multiline':False]
['text':' Test that a unique index that is multikey can still be used.','line_number':315,'multiline':False]
['text':' Test that a unique index that is sparse can still be used.','line_number':349,'multiline':False]
