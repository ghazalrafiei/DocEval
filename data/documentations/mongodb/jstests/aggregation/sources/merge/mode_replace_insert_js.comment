['text':' Tests for the $merge stage with whenMatched: "replace" and whenNotMatched: "insert".','line_number':1,'multiline':False]
['text':' Test that a $merge with whenMatched: "replace" and whenNotMatched: "insert" mode will','line_number':16,'multiline':False]
['text':' default the "on" fields to "_id".','line_number':17,'multiline':False]
['text':' Test that $merge will update existing documents that match the "on" fields.','line_number':22,'multiline':False]
['text':' Test $merge with a dotted path "on" fields.','line_number':30,'multiline':False]
['text':' Test that $merge will automatically generate a missing "_id" for the "on" field.','line_number':49,'multiline':False]
['text':' Test that $merge will automatically generate a missing "_id", and the aggregation succeeds','line_number':65,'multiline':False]
['text':' with multiple "on" fields.','line_number':66,'multiline':False]
['text':' Test that we will not attempt to modify the _id of an existing document if the _id is','line_number':82,'multiline':False]
['text':' projected away but the "on" field does not involve _id.','line_number':83,'multiline':False]
['text':' Test that $merge with a missing non-id "on" field fails.','line_number':106,'multiline':False]
['text':' This attempt should fail because there's no field 'missing' in the document.','line_number':119,'multiline':False]
['text':' Test that a replace fails to insert a document if it violates a unique index constraint. In','line_number':122,'multiline':False]
['text':' this example, $merge will attempt to insert multiple documents with {a: 0} which is not','line_number':123,'multiline':False]
['text':' allowed with the unique index on {a: 1}.','line_number':124,'multiline':False]
['text':' Test that $merge fails if the "on" fields contains an array.','line_number':137,'multiline':False]
['text':' Tests for $merge to a database that differs from the aggregation database.','line_number':171,'multiline':False]
['text':' Test that $merge implicitly creates a new database when the output collection's database','line_number':190,'multiline':False]
['text':' doesn't exist.','line_number':191,'multiline':False]
['text':' Implicit database creation is prohibited in a cluster.','line_number':195,'multiline':False]
['text':' Force a creation of the database and collection, then fall through the test below.','line_number':199,'multiline':False]
['text':' Insert a new document into the source collection, then test that running the same','line_number':203,'multiline':False]
['text':' aggregation will replace existing documents in the foreign output collection when','line_number':204,'multiline':False]
['text':' applicable.','line_number':205,'multiline':False]
