['text':' Tests the behaviour of the $merge stage with whenMatched=merge and whenNotMatched=insert.','line_number':1,'multiline':False]
['text':' Test $merge into a non-existent collection.','line_number':15,'multiline':False]
['text':' Test $merge into an existing collection.','line_number':27,'multiline':False]
['text':' Test $merge does not update documents in the target collection if they were not modified','line_number':37,'multiline':False]
['text':' in the source collection.','line_number':38,'multiline':False]
['text':' Test $merge updates documents in the target collection if they were modified in the source','line_number':47,'multiline':False]
['text':' collection.','line_number':48,'multiline':False]
['text':' Update and merge a single document.','line_number':50,'multiline':False]
['text':' Update and merge multiple documents.','line_number':58,'multiline':False]
['text':' Test $merge inserts a new document into the target collection if it was inserted into the','line_number':68,'multiline':False]
['text':' source collection.','line_number':69,'multiline':False]
['text':' Insert and merge a single document.','line_number':71,'multiline':False]
['text':' Insert and merge multiple documents.','line_number':85,'multiline':False]
['text':' Test $merge doesn't modify the target collection if a document has been removed from the','line_number':102,'multiline':False]
['text':' source collection.','line_number':103,'multiline':False]
['text':' Test $merge fails if a unique index constraint in the target collection is violated.','line_number':116,'multiline':False]
['text':' Skip this test if the collection sharded, because an implicitly created sharded','line_number':119,'multiline':False]
['text':' key of {_id: 1} will not be covered by a unique index created in this test, which','line_number':120,'multiline':False]
['text':' is not allowed.','line_number':121,'multiline':False]
['text':' Test $merge fails if it cannot find an index to verify that the 'on' fields will be unique.','line_number':140,'multiline':False]
['text':' The 'on' fields contains a single document field.','line_number':142,'multiline':False]
['text':' The 'on' fields contains multiple document fields.','line_number':147,'multiline':False]
['text':' Test $merge with an explicit 'on' field over a single or multiple document fields which','line_number':154,'multiline':False]
['text':' differ from the _id field.','line_number':155,'multiline':False]
['text':' Skip this test if the collection sharded, because an implicitly created sharded','line_number':158,'multiline':False]
['text':' key of {_id: 1} will not be covered by a unique index created in this test, which','line_number':159,'multiline':False]
['text':' is not allowed.','line_number':160,'multiline':False]
['text':' The 'on' fields contains a single document field.','line_number':164,'multiline':False]
['text':' The 'on' fields contains multiple document fields.','line_number':187,'multiline':False]
['text':' Test $merge with a dotted path in the 'on' field.','line_number':213,'multiline':False]
['text':' Skip this test if the collection sharded, because an implicitly created sharded','line_number':216,'multiline':False]
['text':' key of {_id: 1} will not be covered by a unique index created in this test, which','line_number':217,'multiline':False]
['text':' is not allowed.','line_number':218,'multiline':False]
['text':' Test $merge fails if the value of the 'on' field in a document is invalid, e.g. missing,','line_number':246,'multiline':False]
['text':' null or an array.','line_number':247,'multiline':False]
['text':' Skip this test if the collection sharded, because an implicitly created sharded','line_number':250,'multiline':False]
['text':' key of {_id: 1} will not be covered by a unique index created in this test, which','line_number':251,'multiline':False]
['text':' is not allowed.','line_number':252,'multiline':False]
['text':' The 'on' field is missing.','line_number':261,'multiline':False]
['text':' The 'on' field is null.','line_number':268,'multiline':False]
['text':' The 'on' field is an array.','line_number':275,'multiline':False]
['text':' Test $merge when the _id field is removed from the aggregate projection but is used in the','line_number':283,'multiline':False]
['text':' $merge's 'on' field.','line_number':284,'multiline':False]
['text':' The _id is a single 'on' field (a default one).','line_number':286,'multiline':False]
['text':' The _id is part of the compound 'on' field.','line_number':297,'multiline':False]
['text':' Test $merge preserves indexes and options of the existing target collection.','line_number':314,'multiline':False]
['text':' Test $merge implicitly creates a new database when the target collection's database doesn't','line_number':332,'multiline':False]
['text':' exist.','line_number':333,'multiline':False]
['text':' Implicit database creation is prohibited in a cluster.','line_number':356,'multiline':False]
['text':' Force a creation of the database and collection, then fall through the test below.','line_number':360,'multiline':False]
