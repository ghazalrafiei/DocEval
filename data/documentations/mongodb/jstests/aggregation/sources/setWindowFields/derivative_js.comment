['text':'*
 * Test the behavior of $derivative.
 ','line_number':1,'multiline':True]
['text':' The default window is usually [unbounded, unbounded], but this would be surprising for','line_number':8,'multiline':False]
['text':' $derivative, so instead it has no default (it requires an explicit window).','line_number':9,'multiline':False]
['text':' $derivative never compares values from separate partitions.','line_number':37,'multiline':False]
['text':' When either endpoint lies outside the partition, we use the first/last document in the partition','line_number':75,'multiline':False]
['text':' instead.','line_number':76,'multiline':False]
['text':' The first document looks behind 3, but can't go any further back than time: 0.','line_number':103,'multiline':False]
['text':' It also looks ahead 1. So the points it compares are time: 0 and time: 1.','line_number':104,'multiline':False]
['text':' The second document gets time: 0 and time: 2.','line_number':106,'multiline':False]
['text':' The third gets time: 0 and time: 3.','line_number':108,'multiline':False]
['text':' This is the first document whose left endpoint lies within the partition.','line_number':110,'multiline':False]
['text':' So this one, and the next few, all have fully-populated windows.','line_number':111,'multiline':False]
['text':' For the last document, there is no document at offset +1, so it sees','line_number':116,'multiline':False]
['text':' time: 4 and time: 7.','line_number':117,'multiline':False]
['text':' Because the derivative is the same irrespective of sort order (as long as we reexpress the','line_number':121,'multiline':False]
['text':' bounds) we can compare this result with the result of the previous aggregation.','line_number':122,'multiline':False]
['text':' Example with range-based bounds.','line_number':139,'multiline':False]
['text':' 'unit' only supports 'week' and smaller.','line_number':173,'multiline':False]
['text':' When the time field is numeric, 'unit' is not allowed.','line_number':208,'multiline':False]
['text':' When the time field is a Date, 'unit' is required.','line_number':223,'multiline':False]
['text':' The change per minute is 60*1000 larger than the change per millisecond.','line_number':240,'multiline':False]
['text':' 'unit' applied to an ISODate expresses the output in terms of that unit.','line_number':243,'multiline':False]
['text':' Going the other direction: if the events are spaced far apart, expressing the answer in','line_number':250,'multiline':False]
['text':' change-per-millisecond makes the result small.','line_number':251,'multiline':False]
['text':' When the sortBy field is a mixture of dates and numbers, it's an error:','line_number':281,'multiline':False]
['text':' whether or not you specify unit, either the date or the number values','line_number':282,'multiline':False]
['text':' will be an invalid type.','line_number':283,'multiline':False]
['text':' Some examples of unbounded windows.','line_number':294,'multiline':False]
['text':' Example with time-based bounds.','line_number':357,'multiline':False]
