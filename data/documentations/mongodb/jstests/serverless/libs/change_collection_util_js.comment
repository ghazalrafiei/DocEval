['text':' Contains functions for testing the change collections.','line_number':1,'multiline':False]
['text':' Verifies that the oplog and change collection entries are the same for the provided tenant','line_number':3,'multiline':False]
['text':' 'tenantId' for the specified timestamp window:- (startOplogTimestamp, endOplogTimestamp].','line_number':4,'multiline':False]
['text':' Fetch the oplog documents for the provided tenant for the specified timestamp window. Note','line_number':7,'multiline':False]
['text':' that the startOplogTimestamp is expected to be just before the first write, while the','line_number':8,'multiline':False]
['text':' endOplogTimestamp is expected to be the timestamp of the final write in the test.','line_number':9,'multiline':False]
['text':' Set token for the following command','line_number':22,'multiline':False]
['text':' Fetch all documents from the tenant's change collection for the specified timestamp window.','line_number':25,'multiline':False]
['text':' Verify that the number of documents returned by the oplog and the tenant's change collection','line_number':36,'multiline':False]
['text':' are exactly the same.','line_number':37,'multiline':False]
['text':' Verify that the documents in the change collection are exactly the same as the oplog for a','line_number':45,'multiline':False]
['text':' particular tenant.','line_number':46,'multiline':False]
['text':' Remove the '_id' field from the change collection as oplog does not have it.','line_number':51,'multiline':False]
['text':' Verify that the oplog and change collecton entry (after removing the '_id') field are','line_number':60,'multiline':False]
['text':' the same.','line_number':61,'multiline':False]
['text':' A class that sets up the multitenant environment to enable change collections on the replica set.','line_number':70,'multiline':False]
['text':' This class also provides helpers that are commonly used when working with change collections.','line_number':71,'multiline':False]
['text':' Instantiate the 'ReplSetTest' with 'serverless' as an option.','line_number':75,'multiline':False]
['text':' A dictionary of parameters required for multitenancy.','line_number':79,'multiline':False]
['text':' Create a root user within the multitenant environment','line_number':90,'multiline':False]
['text':' Unfortunately, ES6 class inheritance doesn't play all that nicely with legacy "Function"','line_number':94,'multiline':False]
['text':' classes. As such, overriding an instance method and calling the superclass method does','line_number':95,'multiline':False]
['text':' not work properly. We can fake this by holding onto a reference to the "super" add','line_number':96,'multiline':False]
['text':' method (ensuring that we bind to the context in this class to avoid issues with the','line_number':97,'multiline':False]
['text':' method being invoked in the wrong context) and call it from our override below.','line_number':98,'multiline':False]
['text':' If and when ReplSetTest is refactored to use ES6 classes, we can get rid of this madness.','line_number':99,'multiline':False]
['text':' Adds a node to the replica set with the provided configuration 'config'.','line_number':102,'multiline':False]
['text':' Get the a copy of the 'config' dictionary and add required multitenancy flags to it.','line_number':104,'multiline':False]
['text':' Initiate the replica set with the newly added node.','line_number':109,'multiline':False]
['text':' Exposed as a method because linter does not yet support static properties.','line_number':114,'multiline':False]
['text':' Returns a connection to the 'hostAddr' with 'tenantId' stamped to it for the created user.','line_number':129,'multiline':False]
['text':' This method may be called on the secondary connection, as such, enable reading on the','line_number':136,'multiline':False]
['text':' secondary. This will be no-op on the primary.','line_number':137,'multiline':False]
['text':' Create the user with the provided roles if it does not exist.','line_number':144,'multiline':False]
['text':' Set the provided tenant id into the security token for the user.','line_number':154,'multiline':False]
['text':' PSK for signature matches testOnlyValidatedTenancyScopeKey setting in fixture class.','line_number':155,'multiline':False]
['text':' Logout the root user to avoid multiple authentication.','line_number':160,'multiline':False]
['text':' Sets the change stream state for the provided tenant connection.','line_number':166,'multiline':False]
['text':' Returns the change stream state for the provided tenant connection.','line_number':172,'multiline':False]
