['text':' Tests that pre-images are stored in the pre-images collection on updates and deletes in','line_number':1,'multiline':False]
['text':' collections with 'changeStreamPreAndPostImages' being enabled.','line_number':2,'multiline':False]
['text':' @tags: [','line_number':3,'multiline':False]
['text':'  requires_fcv_60,','line_number':4,'multiline':False]
['text':'  assumes_against_mongod_not_mongos,','line_number':5,'multiline':False]
['text':'  requires_capped,','line_number':6,'multiline':False]
['text':'  requires_replication,','line_number':7,'multiline':False]
['text':'  requires_getmore,','line_number':8,'multiline':False]
['text':'  no_selinux,','line_number':9,'multiline':False]
['text':'  incompatible_with_preimages_by_default,','line_number':10,'multiline':False]
['text':' ]','line_number':11,'multiline':False]
['text':' Pre-images are only recorded in the replica set mode.','line_number':20,'multiline':False]
['text':' Validates that the expected pre-images are written while performing ops.','line_number':40,'multiline':False]
['text':' Because the pre-images collection is implicitly replicated, validate that writes do not','line_number':50,'multiline':False]
['text':' generate oplog entries, with the exception of deletions.','line_number':51,'multiline':False]
['text':' Validates that no pre-image is written while performing ops.','line_number':56,'multiline':False]
['text':' Validates the contents of the pre-image collection entry.','line_number':61,'multiline':False]
['text':' Pre-images documents are recorded only for update and delete commands.','line_number':67,'multiline':False]
['text':' Tests the pre-images recording behavior in capped collections.','line_number':77,'multiline':False]
['text':' Verify that no pre-image is recorded, when performing writes to the collection, that doesn't','line_number':90,'multiline':False]
['text':' have 'changeStreamPreAndPostImages' enabled.','line_number':91,'multiline':False]
['text':' Perform the insert, update and replace commands.','line_number':93,'multiline':False]
['text':' Document removal is not allowed on a capped collection, perform an insert command','line_number':98,'multiline':False]
['text':' instead.','line_number':99,'multiline':False]
['text':' Verify that no pre-image is recorded, when performing an insert command on the collection,','line_number':103,'multiline':False]
['text':' that has 'changeStreamPreAndPostImages' enabled.','line_number':104,'multiline':False]
['text':' Verify that one pre-image is recorded, when performing an update command on the collection,','line_number':110,'multiline':False]
['text':' that has 'changeStreamPreAndPostImages' enabled.','line_number':111,'multiline':False]
['text':' Perform an update modification.','line_number':113,'multiline':False]
['text':' Verify that one pre-image is recorded, when performing a replace command on the collection,','line_number':117,'multiline':False]
['text':' that has 'changeStreamPreAndPostImages' enabled.','line_number':118,'multiline':False]
['text':' Perform a full-document replacement.','line_number':120,'multiline':False]
['text':' Verify that one pre-image is recorded, when performing a delete command on the collection,','line_number':124,'multiline':False]
['text':' that has 'changeStreamPreAndPostImages' enabled.','line_number':125,'multiline':False]
['text':' Trigger a delete operation from the capped collection by inserting a new document.','line_number':127,'multiline':False]
['text':' Tests the pre-images recording behavior in non-capped collections.','line_number':132,'multiline':False]
['text':' Verify that no pre-image is recorded, when performing writes to the collection, that doesn't','line_number':143,'multiline':False]
['text':' have 'changeStreamPreAndPostImages' enabled.','line_number':144,'multiline':False]
['text':' Perform the insert, update, replace and delete commands.','line_number':146,'multiline':False]
['text':' Verify that no pre-image is recorded, when performing an insert command into the collection,','line_number':154,'multiline':False]
['text':' that has 'changeStreamPreAndPostImages' enabled.','line_number':155,'multiline':False]
['text':' Verify that one pre-image is recorded, when performing an update command on the collection,','line_number':161,'multiline':False]
['text':' that has 'changeStreamPreAndPostImages' enabled.','line_number':162,'multiline':False]
['text':' Perform an update modification.','line_number':164,'multiline':False]
['text':' Verify that one pre-image is recorded, when performing a replace command on the collection,','line_number':168,'multiline':False]
['text':' that has 'changeStreamPreAndPostImages' enabled.','line_number':169,'multiline':False]
['text':' Perform a full-document replacement.','line_number':171,'multiline':False]
['text':' Verify that one pre-image is recorded, when performing a delete command on the collection,','line_number':175,'multiline':False]
['text':' that has 'changeStreamPreAndPostImages' enabled.','line_number':176,'multiline':False]
['text':' Perform a document removal.','line_number':178,'multiline':False]
['text':' Tests that pre-images are recorded correctly for both capped and non-capped collections.','line_number':183,'multiline':False]
['text':' Non-capped collection test.','line_number':185,'multiline':False]
['text':' Capped collection test.','line_number':188,'multiline':False]
['text':' Pre-images must be recorded for update (modify), update (replace) and remove commands.','line_number':192,'multiline':False]
['text':' Pre-images must be recorded for "findAndModify" commands, while returning the pre-images.','line_number':205,'multiline':False]
['text':' Pre-images must be recorded for "findAndModify" commands, while returning the post-images.','line_number':218,'multiline':False]
