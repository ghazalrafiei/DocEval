['text':' Tests that change stream with 'fullDocument: updateLookup' works correctly when chunks are','line_number':1,'multiline':False]
['text':' migrated after updates are performed.','line_number':2,'multiline':False]
['text':' @tags: [','line_number':3,'multiline':False]
['text':'   requires_majority_read_concern,','line_number':4,'multiline':False]
['text':'   uses_change_streams,','line_number':5,'multiline':False]
['text':' ]','line_number':6,'multiline':False]
['text':' Enable sharding to inform mongos of the database, and make sure all chunks start on shard 0.','line_number':25,'multiline':False]
['text':' Create a change stream before any insert or update operations are performed.','line_number':28,'multiline':False]
['text':' Insert four documents, and then read these 'insert' events from the change stream.','line_number':31,'multiline':False]
['text':' Save a resume token after the 'insert' operations and then close the change stream.','line_number':41,'multiline':False]
['text':' Test that each update lookup goes to the appropriate shard.','line_number':52,'multiline':False]
['text':' Update two of the documents.','line_number':66,'multiline':False]
['text':' Drop the 'profile' tables and then enable profiling on all shards.','line_number':70,'multiline':False]
['text':' Now, actually shard the collection.','line_number':78,'multiline':False]
['text':' Split the collection into two chunks: [MinKey, 2) and [2, MaxKey].','line_number':82,'multiline':False]
['text':' After sharding the collection and moving the documents to different shards, create a change','line_number':93,'multiline':False]
['text':' stream with a resume token from before the collection was sharded.','line_number':94,'multiline':False]
['text':' Next two events in csAfterSharding should be the two 'update' operations.','line_number':102,'multiline':False]
['text':' Update the other two documents.','line_number':107,'multiline':False]
['text':' Add a new shard to the cluster','line_number':111,'multiline':False]
['text':' Drop the 'profile' tables and then enable profiling on all shards.','line_number':123,'multiline':False]
['text':' After adding the new shard and migrating the documents to the new shard, create a change stream','line_number':139,'multiline':False]
['text':' with a resume token from before the collection was sharded.','line_number':140,'multiline':False]
['text':' Next four events in csAfterAddShard should be the four 'update' operations.','line_number':148,'multiline':False]
