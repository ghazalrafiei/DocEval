['text':' Tests that the $merge aggregation stage is resilient to move primary in both the source and','line_number':1,'multiline':False]
['text':' output collection during execution.','line_number':2,'multiline':False]
['text':' Set the failpoint to hang in the first call to DocumentSourceCursor's getNext().','line_number':24,'multiline':False]
['text':' Set the primary shard.','line_number':27,'multiline':False]
['text':' Start the $merge aggregation in a parallel shell.','line_number':48,'multiline':False]
['text':' Wait for the parallel shell to hit the failpoint.','line_number':51,'multiline':False]
['text':' Migrate the primary shard from shard0 to shard1.','line_number':62,'multiline':False]
['text':' Unset the failpoint to unblock the $merge and join with the parallel shell.','line_number':66,'multiline':False]
['text':' Verify that the $merge succeeded.','line_number':70,'multiline':False]
['text':' The source collection is unsharded.','line_number':78,'multiline':False]
['text':' Shard the source collection with shard key {shardKey: 1} and split into 2 chunks.','line_number':98,'multiline':False]
['text':' Write a document to each chunk of the source collection.','line_number':101,'multiline':False]
['text':' Shard the source collection with shard key {shardKey: 1} and split into 2 chunks.','line_number':122,'multiline':False]
['text':' Write two documents in the source collection that should target the two chunks in the target','line_number':125,'multiline':False]
['text':' collection.','line_number':126,'multiline':False]
['text':' Note that the legacy $out is not supported with an existing sharded output collection.','line_number':130,'multiline':False]
['text':' Shard the collections with shard key {shardKey: 1} and split into 2 chunks.','line_number':149,'multiline':False]
['text':' Write two documents in the source collection that should target the two chunks in the target','line_number':153,'multiline':False]
['text':' collection.','line_number':154,'multiline':False]
