['text':'
 * Tests to validate the correct behaviour of checkMetadataConsistency command.
 *
 * @tags: [
 *    featureFlagCheckMetadataConsistency,
 *    requires_fcv_70,
 * ]
 ','line_number':1,'multiline':True]
['text':' Configure initial sharding cluster','line_number':10,'multiline':False]
['text':' Use retryWrites when writing to the configsvr because mongos does not automatically retry those.','line_number':14,'multiline':False]
['text':' Check correct behaviour of cursor with DBCommandCursor','line_number':75,'multiline':False]
['text':' Check correct behaviour of cursor with GetMore','line_number':88,'multiline':False]
['text':' Clean up the database to pass the hooks that detect inconsistencies','line_number':98,'multiline':False]
['text':' Database level mode command','line_number':114,'multiline':False]
['text':' Collection level mode command','line_number':119,'multiline':False]
['text':' Clean up the database to pass the hooks that detect inconsistencies','line_number':125,'multiline':False]
['text':' Database level mode command','line_number':138,'multiline':False]
['text':' Collection level mode command','line_number':143,'multiline':False]
['text':' Clean up the database to pass the hooks that detect inconsistencies','line_number':148,'multiline':False]
['text':' waitForDelete ','line_number':158,'multiline':True]
['text':' Connect directly to shards to bypass the mongos checks for dropping shard key indexes','line_number':160,'multiline':False]
['text':' Database level mode command','line_number':167,'multiline':False]
['text':' Clean up the database to pass the hooks that detect inconsistencies','line_number':173,'multiline':False]
['text':' Check missing index on one shard','line_number':187,'multiline':False]
['text':' Fix inconsistencies and assert none are left','line_number':197,'multiline':False]
['text':' Check inconsistent index property across shards','line_number':201,'multiline':False]
['text':' Fix inconsistencies and assert none are left','line_number':212,'multiline':False]
['text':' Create two sharded collections in two different databases','line_number':225,'multiline':False]
['text':' Save db1 and db2 configuration to restore it later','line_number':229,'multiline':False]
['text':' Check that there are no inconsistencies so far','line_number':234,'multiline':False]
['text':' Remove db1 so that coll1 became hidden','line_number':237,'multiline':False]
['text':' Remove db2 so that coll2 also became hidden','line_number':246,'multiline':False]
['text':' Restore db1 and db2 configuration to ensure the correct behavior of dropDatabase operations','line_number':258,'multiline':False]
['text':' Clean up the database to pass the hooks that detect inconsistencies','line_number':261,'multiline':False]
['text':' Insert a RoutingTableRangeOverlap inconsistency','line_number':274,'multiline':False]
['text':' Insert a ZonesRangeOverlap inconsistency','line_number':278,'multiline':False]
['text':' Database level mode command','line_number':296,'multiline':False]
['text':' Clean up the database to pass the hooks that detect inconsistencies','line_number':304,'multiline':False]
['text':' Insert MisplacedCollection inconsistency in db_MisplacedCollection1','line_number':315,'multiline':False]
['text':' Insert MisplacedCollection inconsistency in db_MisplacedCollection2','line_number':321,'multiline':False]
['text':' Insert CollectionUUIDMismatch inconsistency in db_CollectionUUIDMismatch','line_number':327,'multiline':False]
['text':' Cluster level mode command','line_number':337,'multiline':False]
['text':' Check that there are 3 inconsistencies: 2 MisplacedCollection and 1 CollectionUUIDMismatch','line_number':340,'multiline':False]
['text':' Clean up the databases to pass the hooks that detect inconsistencies','line_number':349,'multiline':False]
['text':' create a splittable collection with 2 chunks','line_number':360,'multiline':False]
['text':' make the collection unsplittable','line_number':369,'multiline':False]
['text':' Clean up the database to pass the hooks that detect inconsistencies','line_number':378,'multiline':False]
['text':' set a primary shard','line_number':389,'multiline':False]
['text':' create a splittable collection with a key != {_id:1}','line_number':393,'multiline':False]
['text':' make the collection unsplittable and catch the inconsistency','line_number':399,'multiline':False]
['text':' drop the collection on the primary and still catch the inconsistency','line_number':408,'multiline':False]
['text':' Clean up the database to pass the hooks that detect inconsistencies','line_number':416,'multiline':False]
