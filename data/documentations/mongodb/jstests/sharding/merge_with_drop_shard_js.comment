['text':' Tests that the $merge aggregation stage is resilient to drop shard in both the source and','line_number':1,'multiline':False]
['text':' output collection during execution.','line_number':2,'multiline':False]
['text':' TODO SERVER-50144 Remove this and allow orphan checking.','line_number':6,'multiline':False]
['text':' This test calls removeShard which can leave docs in config.rangeDeletions in state "pending",','line_number':7,'multiline':False]
['text':' therefore preventing orphans from being cleaned up.','line_number':8,'multiline':False]
['text':' Match on the output namespace to avoid hanging the sharding metadata refresh aggregation when','line_number':21,'multiline':False]
['text':' shard0 is a config shard.','line_number':22,'multiline':False]
['text':' We need the balancer to drain all the chunks out of the shard that is being removed.','line_number':36,'multiline':False]
['text':' Drop the test database on the removed shard so it does not interfere with addShard later.','line_number':40,'multiline':False]
['text':' Set the failpoint to hang in the first call to DocumentSourceCursor's getNext().','line_number':56,'multiline':False]
['text':' Start the $merge aggregation in a parallel shell.','line_number':81,'multiline':False]
['text':' Wait for the parallel shell to hit the failpoint.','line_number':84,'multiline':False]
['text':' currentOp can fail with ShardNotFound since we remove','line_number':85,'multiline':False]
['text':' the shard on some test runs.','line_number':86,'multiline':False]
['text':' Unset the failpoint to unblock the $merge and join with the parallel shell.','line_number':109,'multiline':False]
['text':' Shard the source collection with shard key {shardKey: 1} and split into 2 chunks.','line_number':116,'multiline':False]
['text':' Shard the output collection with shard key {shardKey: 1} and split into 2 chunks.','line_number':119,'multiline':False]
['text':' Write two documents in the source collection that should target the two chunks in the target','line_number':122,'multiline':False]
['text':' collection.','line_number':123,'multiline':False]
['text':' Match the data from source into target so that we don't fail the assertion for','line_number':130,'multiline':False]
['text':' 'whenNotMatchedMode:fail/discard'.','line_number':131,'multiline':False]
