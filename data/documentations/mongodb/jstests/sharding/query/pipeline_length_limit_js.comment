['text':'*
 * Confirms that the limit on number of aggregragation pipeline stages is respected.
 * @tags: [
 *   requires_fcv_71,
 * ]
 ','line_number':1,'multiline':True]
['text':' Test that the enforced pre-parse length limit is the same as the post-parse limit.','line_number':13,'multiline':False]
['text':' We use $count because it is desugared into two separate stages, so it will pass the pre-parse','line_number':14,'multiline':False]
['text':' limit but fail after.','line_number':15,'multiline':False]
['text':' 1. This test case will pass the pre-parse enforcer but fail after.','line_number':19,'multiline':False]
['text':' 2. This test case should be caught by the pre-parse enforcer, and the error code reflects','line_number':27,'multiline':False]
['text':' that.','line_number':28,'multiline':False]
['text':' Long pipelines with many unions.','line_number':86,'multiline':False]
['text':' maxLength * 2 total unions.','line_number':88,'multiline':False]
['text':' maxLength in subPipeline.','line_number':91,'multiline':False]
['text':' maxLength * 50 total unions, should be within max doc size.','line_number':96,'multiline':False]
['text':' Long pipelines filled with the same stage over and over.','line_number':107,'multiline':False]
['text':' unionWith already covered.','line_number':123,'multiline':False]
['text':' Same test, but these to stages get replaced by 2 stages under the hood.','line_number':133,'multiline':False]
['text':' $lookup inserts a DocumentSourceSequentialDocumentCache stage in the subpipeline to perform','line_number':142,'multiline':False]
['text':' cacheing optimizations, so the subpipeline can have at most 'maxLength - 1' user-specified','line_number':143,'multiline':False]
['text':' stages. When we connect directly to a shard without mongos, it is treated as a standalone','line_number':144,'multiline':False]
['text':' and will not perform pipeline length validation after the cache stage is added.','line_number':145,'multiline':False]
['text':' Run test against mongos.','line_number':180,'multiline':False]
['text':' Run test against shard.','line_number':183,'multiline':False]
['text':' This is a sanity check to make sure that the default value is correct. If the limit is changed,','line_number':190,'multiline':False]
['text':' it will break for users and this check catches that.','line_number':191,'multiline':False]
['text':' Test with modified pipeline length limit.','line_number':207,'multiline':False]
