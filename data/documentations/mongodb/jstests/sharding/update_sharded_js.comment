['text':'*
 * Test simple updates issued through mongos. Updates have different constraints through mongos,
 * since shard key is immutable.
 *
 * @tags: [
 *   uses_multi_shard_transaction,
 *   uses_transactions,
 * ]
 ','line_number':1,'multiline':True]
['text':' Repeat same tests with hashed shard key, to ensure identical behavior.','line_number':26,'multiline':False]
['text':' Used for updates of the shard key.','line_number':38,'multiline':False]
['text':' Replacment and Opstyle upserts.','line_number':41,'multiline':False]
['text':' Mixing operator & non-operator fields in updates is not allowed.','line_number':45,'multiline':False]
['text':' update existing using update()','line_number':57,'multiline':False]
['text':' do a replacement-style update which queries the shard key and keeps it constant','line_number':62,'multiline':False]
['text':' Reset the key value.','line_number':77,'multiline':False]
['text':' Make sure we can extract exact _id from certain queries','line_number':87,'multiline':False]
['text':' Run the two phase broadcast write protocol for multi: false writes without a proper _id or','line_number':95,'multiline':False]
['text':' shard key to target by.','line_number':96,'multiline':False]
['text':' Invalid extraction of exact _id from query','line_number':106,'multiline':False]
['text':' Make sure we can extract exact shard key from certain queries','line_number':125,'multiline':False]
['text':' Run the two phase broadcast write protocol for multi: false writes without a proper _id or','line_number':133,'multiline':False]
['text':' shard key to target by.','line_number':134,'multiline':False]
['text':' Invalid extraction of exact key from query','line_number':139,'multiline':False]
['text':' Run the two phase broadcast write protocol for multi: false writes without a proper _id or','line_number':147,'multiline':False]
['text':' shard key to target by.','line_number':148,'multiline':False]
['text':' Inexact queries may target a single shard. Range queries may target a single shard as','line_number':152,'multiline':False]
['text':' long as the collection is not hashed.','line_number':153,'multiline':False]
['text':' Note: {key:-1} and {key:-2} fall on shard0 for both hashed and ascending shardkeys.','line_number':162,'multiline':False]
['text':' Run the two phase broadcast write protocol for multi: false writes without a proper _id or','line_number':168,'multiline':False]
['text':' shard key to target by.','line_number':169,'multiline':False]
['text':' In cases where an inexact query does target multiple shards, single update is rejected.','line_number':175,'multiline':False]
['text':' Make sure failed shard key or _id extraction doesn't affect the other','line_number':184,'multiline':False]
['text':' Can unset shard key with op style update.','line_number':190,'multiline':False]
['text':' Can unset shard key with replacement style update.','line_number':195,'multiline':False]
['text':' Can unset shard key with pipeline style update.','line_number':200,'multiline':False]
['text':' Can unset nested fields in the shard key.','line_number':205,'multiline':False]
['text':' Tests for nested shard keys.','line_number':211,'multiline':False]
['text':'','line_number':218,'multiline':False]
['text':' Verify full shard key path can be unset.','line_number':219,'multiline':False]
['text':'','line_number':220,'multiline':False]
['text':' Can unset shard key with op style update.','line_number':222,'multiline':False]
['text':' Can unset shard key with replacement style update.','line_number':227,'multiline':False]
['text':' Can unset shard key with pipeline style update.','line_number':232,'multiline':False]
['text':'','line_number':238,'multiline':False]
['text':' Verify each field in a nested shard key can be unset.','line_number':239,'multiline':False]
['text':'','line_number':240,'multiline':False]
['text':' For op-style.','line_number':242,'multiline':False]
['text':' For replacement style.','line_number':249,'multiline':False]
['text':' This can be used to make sure pipeline-based updates generate delta oplog entries.','line_number':256,'multiline':False]
['text':' For pipeline style.','line_number':258,'multiline':False]
