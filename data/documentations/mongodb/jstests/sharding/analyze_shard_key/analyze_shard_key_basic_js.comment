['text':'*
 * Tests support for the analyzeShardKey command.
 *
 * @tags: [requires_fcv_70]
 ','line_number':1,'multiline':True]
['text':' The sampling-based initial split policy needs 10 samples per split point so','line_number':12,'multiline':False]
['text':' 10 * analyzeShardKeyNumRanges is the minimum number of distinct shard key values that the','line_number':13,'multiline':False]
['text':' collection must have for the command to not fail to generate split points.','line_number':14,'multiline':False]
['text':' If the command is not supported, it should fail even before the collection validation','line_number':31,'multiline':False]
['text':' step. That is, it should fail with an IllegalOperation error instead of a','line_number':32,'multiline':False]
['text':' NamespaceNotFound error.','line_number':33,'multiline':False]
['text':' does not have a supporting index.','line_number':47,'multiline':False]
['text':' Analyze shard keys while the collection is empty.','line_number':50,'multiline':False]
['text':' This is an unsharded collection so in a sharded cluster it only exists on the','line_number':58,'multiline':False]
['text':' primary shard.','line_number':59,'multiline':False]
['text':' Analyze shard keys while the collection is non-empty.','line_number':76,'multiline':False]
['text':' This is an unsharded collection so in a sharded cluster it only exists on the','line_number':89,'multiline':False]
['text':' primary shard.','line_number':90,'multiline':False]
['text':' does not have a supporting index','line_number':121,'multiline':False]
['text':' Analyze shard keys while the collection is empty.','line_number':124,'multiline':False]
['text':' Analyze shard keys while the collection is non-empty.','line_number':152,'multiline':False]
['text':' The analyzeShardKey command is supported on mongos and all shardsvr mongods (both primary and','line_number':212,'multiline':False]
['text':' secondary).','line_number':213,'multiline':False]
['text':' If config shard mode isn't enabled, don't expect a sharded collection since the config','line_number':223,'multiline':False]
['text':' server isn't enabled as a shard and won't have chunks.','line_number':224,'multiline':False]
['text':' The config server is shard0 in config shard mode.','line_number':228,'multiline':False]
['text':' TODO: SERVER-80318 Remove tests below','line_number':242,'multiline':False]
['text':' The analyzeShardKey command is supported on all mongods (both primary and secondary).','line_number':257,'multiline':False]
['text':' Prepare a user for testing multitenancy via $tenant.','line_number':284,'multiline':False]
['text':' Must be authenticated as a user with ActionType::useTenant in order to use $tenant.','line_number':285,'multiline':False]
['text':' The analyzeShardKey command is not supported in multitenancy.','line_number':290,'multiline':False]
['text':' The analyzeShardKey command is not supported on standalone mongod.','line_number':299,'multiline':False]
