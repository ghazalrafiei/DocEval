['text':'*
 *    Copyright (C) 2018-present MongoDB, Inc.
 *
 *    This program is free software: you can redistribute it and/or modify
 *    it under the terms of the Server Side Public License, version 1,
 *    as published by MongoDB, Inc.
 *
 *    This program is distributed in the hope that it will be useful,
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *    Server Side Public License for more details.
 *
 *    You should have received a copy of the Server Side Public License
 *    along with this program. If not, see
 *    <http://www.mongodb.com/licensing/server-side-public-license>.
 *
 *    As a special exception, the copyright holders give permission to link the
 *    code of portions of this program with the OpenSSL library under certain
 *    conditions as described in each individual source file and distribute
 *    linked combinations including the program with the OpenSSL library. You
 *    must comply with the Server Side Public License in all respects for
 *    all of the code used other than as permitted herein. If you modify file(s)
 *    with this exception, you may extend this exception to your version of the
 *    file(s), but you are not obligated to do so. If you do not wish to do so,
 *    delete this exception statement from your version. If you delete this
 *    exception statement from all source files in the program, then also delete
 *    it in the license file.
 ','line_number':1,'multiline':True]
['text':' Wait up to 10 seconds.','line_number':100,'multiline':False]
['text':' Returns the connection name by filtering on the appName of a $currentOp command. If no result is','line_number':121,'multiline':False]
['text':' found, return an empty string.','line_number':122,'multiline':False]
['text':' This should be the last required flag to be assigned.','line_number':140,'multiline':False]
['text':' This should be the last optional flag to be assigned.','line_number':150,'multiline':False]
['text':' This test only works against a replica set.','line_number':240,'multiline':False]
['text':' Round-trip command fails with NotWritablePrimary error. Note that this failure is in','line_number':266,'multiline':False]
['text':' command dispatch which ignores w:0.','line_number':267,'multiline':False]
['text':' Fire-and-forget closes connection when it sees that error. Note that this is using call()','line_number':274,'multiline':False]
['text':' rather than say() so that we get an error back when the connection is closed. Normally','line_number':275,'multiline':False]
['text':' using call() if kMoreToCome set results in blocking forever.','line_number':276,'multiline':False]
['text':' conn.call() calculated the request checksum, but setFlag() makes it invalid. Clear the','line_number':278,'multiline':False]
['text':' checksum so the next conn.call() recalculates it.','line_number':279,'multiline':False]
['text':' Reconnect.','line_number':283,'multiline':False]
['text':' Disable eager checking of primary to simulate a stepdown occurring after the check. This','line_number':285,'multiline':False]
['text':' should respect w:0.','line_number':286,'multiline':False]
['text':' Round-trip command claims to succeed due to w:0.','line_number':308,'multiline':False]
['text':' Fire-and-forget should still close connection.','line_number':315,'multiline':False]
['text':' Only test exhaust against a standalone and mongos.','line_number':368,'multiline':False]
['text':' Insert a few documents.','line_number':383,'multiline':False]
['text':' Issue a find request to open a cursor but return 0 documents. Specify a sort in order to','line_number':388,'multiline':False]
['text':' guarantee their return order.','line_number':389,'multiline':False]
['text':' Reply has checksum if and only if the request did.','line_number':399,'multiline':False]
['text':' Construct getMore request with exhaust flag. Set batch size so we will need multiple batches','line_number':402,'multiline':False]
['text':' to exhaust the cursor.','line_number':403,'multiline':False]
['text':' Run getMore to initiate the exhaust stream.','line_number':411,'multiline':False]
['text':' Receive next exhaust batch.','line_number':424,'multiline':False]
['text':' Receive terminal batch.','line_number':437,'multiline':False]
['text':' Only test exhaust against a standalone and mongos.','line_number':460,'multiline':False]
['text':' Insert a few documents.','line_number':469,'multiline':False]
['text':' Issue a find request with exhaust flag. Returns 0 documents.','line_number':474,'multiline':False]
['text':' The response should not have set moreToCome. We only expect getMore response to set','line_number':483,'multiline':False]
['text':' 'moreToCome'.','line_number':484,'multiline':False]
['text':' Only test exhaust against a standalone and mongos.','line_number':491,'multiline':False]
['text':' Insert a few documents.','line_number':500,'multiline':False]
['text':' Issue a find request to open a cursor but return 0 documents.','line_number':505,'multiline':False]
['text':' Drop the collection, so that the next getMore will error.','line_number':516,'multiline':False]
['text':' Construct getMore request with exhaust flag.','line_number':519,'multiline':False]
['text':' Run getMore. This should not start an exhaust stream.','line_number':527,'multiline':False]
['text':' The response should not have set moreToCome.','line_number':529,'multiline':False]
['text':' Only test exhaust against a standalone and mongos.','line_number':538,'multiline':False]
['text':' Insert 5 documents so that a cursor using a batchSize of 2 requires three batches to get all','line_number':547,'multiline':False]
['text':' the results.','line_number':548,'multiline':False]
['text':' Issue an agg request to open a cursor but return 0 documents. Specify a sort in order to','line_number':553,'multiline':False]
['text':' guarantee their return order.','line_number':554,'multiline':False]
['text':' Construct getMore request with exhaust flag. Set batch size so we will need multiple batches','line_number':566,'multiline':False]
['text':' to exhaust the cursor.','line_number':567,'multiline':False]
['text':' Run getMore to initiate the exhaust stream.','line_number':590,'multiline':False]
['text':' Receive next exhaust batch.','line_number':596,'multiline':False]
['text':' Receive terminal batch.','line_number':602,'multiline':False]
['text':' Connect directly to the primary.','line_number':615,'multiline':False]
['text':' Issue an isMaster command without a topology version.','line_number':622,'multiline':False]
['text':' Construct isMaster command with topologyVersion, maxAwaitTimeMS, and exhaust.','line_number':633,'multiline':False]
['text':' Run isMaster command to initiate the exhaust stream.','line_number':640,'multiline':False]
['text':' Allow for clock skew when testing the response time.','line_number':644,'multiline':False]
['text':' Receive next exhaust message.','line_number':653,'multiline':False]
['text':' Allow for clock skew when testing the response time.','line_number':657,'multiline':False]
['text':' The exhaust stream would continue indefinitely.','line_number':666,'multiline':False]
['text':' Connect directly to the primary.','line_number':676,'multiline':False]
['text':' Issue an isMaster command without a topology version.','line_number':683,'multiline':False]
['text':' Construct isMaster command with topologyVersion, maxAwaitTimeMS, and exhaust. Use a different','line_number':694,'multiline':False]
['text':' processId for the topologyVersion so that the first response is returned immediately.','line_number':695,'multiline':False]
['text':' Run isMaster command to initiate the exhaust stream. The first response should be received','line_number':703,'multiline':False]
['text':' immediately.','line_number':704,'multiline':False]
['text':' Allow for clock skew when testing the response time.','line_number':708,'multiline':False]
['text':' Receive next exhaust message. The second response waits for 'maxAwaitTimeMS'.','line_number':717,'multiline':False]
['text':' Allow for clock skew when testing the response time.','line_number':721,'multiline':False]
['text':' The exhaust stream would continue indefinitely.','line_number':730,'multiline':False]
['text':' Connect directly to the primary.','line_number':740,'multiline':False]
['text':' Issue an isMaster command with exhaust but no maxAwaitTimeMS.','line_number':745,'multiline':False]
['text':' Don't run on replica sets as the RSM will use the streamable hello or isMaster protocol','line_number':760,'multiline':False]
['text':' by default. This can cause inconsistencies in our metrics tests.','line_number':761,'multiline':False]
['text':' Wait for stale exhaust streams to finish closing before testing the exhaust metrics.','line_number':766,'multiline':False]
['text':' Issue a hello or isMaster command without a topology version.','line_number':775,'multiline':False]
['text':' Run hello or isMaster command to initiate the exhaust stream.','line_number':791,'multiline':False]
['text':' Start a new connection to the server to check the serverStatus metrics.','line_number':797,'multiline':False]
['text':' The exhaust stream would continue indefinitely.','line_number':812,'multiline':False]
['text':' Don't run on replica sets as the RSM will use the streamable hello or isMaster protocol','line_number':834,'multiline':False]
['text':' by default. This can cause inconsistencies in our metrics tests.','line_number':835,'multiline':False]
['text':' Wait for stale exhaust streams to finish closing before testing the exhaust metrics.','line_number':839,'multiline':False]
['text':' Issue a hello or isMaster command without a topology version.','line_number':848,'multiline':False]
['text':' Issue a hello or isMaster command without a topology version.','line_number':853,'multiline':False]
['text':' Run hello or isMaster command to initiate the exhaust stream.','line_number':869,'multiline':False]
['text':' Start a new connection to the server to check the serverStatus metrics.','line_number':876,'multiline':False]
['text':' Wait for the exhaust stream to close from the error returned by hello or isMaster.','line_number':908,'multiline':False]
['text':' Terminating the exhaust stream should not decrement the number of exhaust connections.','line_number':916,'multiline':False]
['text':' running a different command on conn1 to initiate a new exhaust stream.','line_number':926,'multiline':False]
['text':' exhaust metric should decrease for the exhaust type that was closed, and increase for the','line_number':943,'multiline':False]
['text':' exhaust type that was just opened.','line_number':944,'multiline':False]
['text':' Don't run on replica sets as the RSM will use the streamable hello or isMaster protocol','line_number':971,'multiline':False]
['text':' by default. This can cause inconsistencies in our metrics tests.','line_number':972,'multiline':False]
['text':' Wait for stale exhaust streams to finish closing before testing the exhaust metrics.','line_number':976,'multiline':False]
['text':' Issue a hello or isMaster command without a topology version.','line_number':985,'multiline':False]
['text':' Run hello or isMaster command to initiate the exhaust stream.','line_number':1005,'multiline':False]
['text':' Start a new connection to the server to check the serverStatus metrics.','line_number':1012,'multiline':False]
['text':' Wait for the exhaust stream to close from the error returned by hello or isMaster.','line_number':1044,'multiline':False]
['text':' Terminating the exhaust stream should not decrement the number of exhaust connections.','line_number':1052,'multiline':False]
['text':' exhaust metric should now decrement after calling serverStatus on the connection that used','line_number':1062,'multiline':False]
['text':' to have the exhaust stream.','line_number':1063,'multiline':False]
['text':' Don't run on replica sets as the RSM will use the streamable hello or isMaster protocol','line_number':1084,'multiline':False]
['text':' by default. This can cause inconsistencies in our metrics tests.','line_number':1085,'multiline':False]
['text':' Wait for stale exhaust streams to finish closing before testing the exhaust metrics.','line_number':1089,'multiline':False]
['text':' Issue a hello or isMaster command without a topology version.','line_number':1098,'multiline':False]
['text':' Run hello or isMaster command to initiate the exhaust stream.','line_number':1118,'multiline':False]
['text':' Start a new connection to the server to check the serverStatus metrics.','line_number':1125,'multiline':False]
['text':' Wait for the exhaust stream to close from the error returned by hello or isMaster.','line_number':1157,'multiline':False]
['text':' Terminating the exhaust stream should not decrement the number of exhaust connections.','line_number':1165,'multiline':False]
['text':' Run hello or isMaster command on conn1 to initiate a new exhaust stream.','line_number':1179,'multiline':False]
['text':' exhaust metric should not increment or decrement after initiating a new exhaust stream.','line_number':1185,'multiline':False]
['text':' This test simply tries to verify that using the exhaust option with DBClientCursor works','line_number':1205,'multiline':False]
['text':' correctly. The externally visible behavior should technically be the same as a non-exhaust','line_number':1206,'multiline':False]
['text':' cursor. The exhaust cursor should ideally provide a performance win over non-exhaust, but we','line_number':1207,'multiline':False]
['text':' don't measure that here.','line_number':1208,'multiline':False]
['text':' Only test exhaust against a standalone and mongos.','line_number':1211,'multiline':False]
['text':' Open an exhaust cursor.','line_number':1229,'multiline':False]
['text':' Verify that the documents are returned properly. Exhaust cursors should still receive results','line_number':1235,'multiline':False]
['text':' in batches, so we check that these batches correspond to the given specified batch size.','line_number':1236,'multiline':False]
['text':' Should have consumed all documents at this point.','line_number':1253,'multiline':False]
['text':' The server replies with a checksum if and only if the request has a checksum.','line_number':1259,'multiline':False]
['text':' failpoint has a different name on the router','line_number':1354,'multiline':False]
['text':' namespace','line_number':1390,'multiline':False]
['text':' namespace mongo','line_number':1391,'multiline':False]
