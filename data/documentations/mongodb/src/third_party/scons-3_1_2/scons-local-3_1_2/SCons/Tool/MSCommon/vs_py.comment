['text':'','line_number':1,'multiline':False]
['text':' Copyright (c) 2001 - 2019 The SCons Foundation','line_number':2,'multiline':False]
['text':'','line_number':3,'multiline':False]
['text':' Permission is hereby granted, free of charge, to any person obtaining','line_number':4,'multiline':False]
['text':' a copy of this software and associated documentation files (the','line_number':5,'multiline':False]
['text':' "Software"), to deal in the Software without restriction, including','line_number':6,'multiline':False]
['text':' without limitation the rights to use, copy, modify, merge, publish,','line_number':7,'multiline':False]
['text':' distribute, sublicense, and/or sell copies of the Software, and to','line_number':8,'multiline':False]
['text':' permit persons to whom the Software is furnished to do so, subject to','line_number':9,'multiline':False]
['text':' the following conditions:','line_number':10,'multiline':False]
['text':'','line_number':11,'multiline':False]
['text':' The above copyright notice and this permission notice shall be included','line_number':12,'multiline':False]
['text':' in all copies or substantial portions of the Software.','line_number':13,'multiline':False]
['text':'','line_number':14,'multiline':False]
['text':' THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY','line_number':15,'multiline':False]
['text':' KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE','line_number':16,'multiline':False]
['text':' WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND','line_number':17,'multiline':False]
['text':' NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE','line_number':18,'multiline':False]
['text':' LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION','line_number':19,'multiline':False]
['text':' OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION','line_number':20,'multiline':False]
['text':' WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.','line_number':21,'multiline':False]
['text':'','line_number':22,'multiline':False]
['text':' RDEVE: for the time being use hardcoded lists','line_number':146,'multiline':False]
['text':' supported_arch = self.find_supported_arch()','line_number':147,'multiline':False]
['text':' The list of supported Visual Studio versions we know how to detect.','line_number':154,'multiline':False]
['text':'','line_number':155,'multiline':False]
['text':' How to look for .bat file ?','line_number':156,'multiline':False]
['text':'  - VS 2008 Express (x86):','line_number':157,'multiline':False]
['text':'     * from registry key productdir, gives the full path to vsvarsall.bat. In','line_number':158,'multiline':False]
['text':'     HKEY_LOCAL_MACHINE):','line_number':159,'multiline':False]
['text':'         Software\Microsoft\VCEpress\9.0\Setup\VC\productdir','line_number':160,'multiline':False]
['text':'     * from environmnent variable VS90COMNTOOLS: the path is then ..\..\VC','line_number':161,'multiline':False]
['text':'     relatively to the path given by the variable.','line_number':162,'multiline':False]
['text':'','line_number':163,'multiline':False]
['text':'  - VS 2008 Express (WoW6432: 32 bits on windows x64):','line_number':164,'multiline':False]
['text':'         Software\Wow6432Node\Microsoft\VCEpress\9.0\Setup\VC\productdir','line_number':165,'multiline':False]
['text':'','line_number':166,'multiline':False]
['text':'  - VS 2005 Express (x86):','line_number':167,'multiline':False]
['text':'     * from registry key productdir, gives the full path to vsvarsall.bat. In','line_number':168,'multiline':False]
['text':'     HKEY_LOCAL_MACHINE):','line_number':169,'multiline':False]
['text':'         Software\Microsoft\VCEpress\8.0\Setup\VC\productdir','line_number':170,'multiline':False]
['text':'     * from environmnent variable VS80COMNTOOLS: the path is then ..\..\VC','line_number':171,'multiline':False]
['text':'     relatively to the path given by the variable.','line_number':172,'multiline':False]
['text':'','line_number':173,'multiline':False]
['text':'  - VS 2005 Express (WoW6432: 32 bits on windows x64): does not seem to have a','line_number':174,'multiline':False]
['text':'  productdir ?','line_number':175,'multiline':False]
['text':'','line_number':176,'multiline':False]
['text':'  - VS 2003 .Net (pro edition ? x86):','line_number':177,'multiline':False]
['text':'     * from registry key productdir. The path is then ..\Common7\Tools\','line_number':178,'multiline':False]
['text':'     relatively to the key. The key is in HKEY_LOCAL_MACHINE):','line_number':179,'multiline':False]
['text':'         Software\Microsoft\VisualStudio\7.1\Setup\VC\productdir','line_number':180,'multiline':False]
['text':'     * from environmnent variable VS71COMNTOOLS: the path is the full path to','line_number':181,'multiline':False]
['text':'     vsvars32.bat','line_number':182,'multiline':False]
['text':'','line_number':183,'multiline':False]
['text':'  - VS 98 (VS 6):','line_number':184,'multiline':False]
['text':'     * from registry key productdir. The path is then Bin','line_number':185,'multiline':False]
['text':'     relatively to the key. The key is in HKEY_LOCAL_MACHINE):','line_number':186,'multiline':False]
['text':'         Software\Microsoft\VisualStudio\6.0\Setup\VC98\productdir','line_number':187,'multiline':False]
['text':'','line_number':188,'multiline':False]
['text':' The first version found in the list is the one used by default if','line_number':189,'multiline':False]
['text':' there are multiple versions installed.  Barring good reasons to','line_number':190,'multiline':False]
['text':' the contrary, this means we should list versions from most recent','line_number':191,'multiline':False]
['text':' to oldest.  Pro versions get listed before Express versions on the','line_number':192,'multiline':False]
['text':' assumption that, by default, you'd rather use the version you paid','line_number':193,'multiline':False]
['text':' good money for in preference to whatever Microsoft makes available','line_number':194,'multiline':False]
['text':' for free.','line_number':195,'multiline':False]
['text':'','line_number':196,'multiline':False]
['text':' If you update this list, update _VCVER and _VCVER_TO_PRODUCT_DIR in','line_number':197,'multiline':False]
['text':' Tool/MSCommon/vc.py, and the MSVC_VERSION documentation in Tool/msvc.xml.','line_number':198,'multiline':False]
['text':' Visual Studio 2019','line_number':201,'multiline':False]
['text':' Visual Studio 2017','line_number':212,'multiline':False]
['text':' Visual Studio 2015','line_number':223,'multiline':False]
['text':' Visual C++ 2015 Express Edition (for Desktop)','line_number':234,'multiline':False]
['text':' Visual Studio 2013','line_number':245,'multiline':False]
['text':' Visual C++ 2013 Express Edition (for Desktop)','line_number':256,'multiline':False]
['text':' Visual Studio 2012','line_number':267,'multiline':False]
['text':' Visual C++ 2012 Express Edition (for Desktop)','line_number':277,'multiline':False]
['text':' Visual Studio 2010','line_number':288,'multiline':False]
['text':' Visual C++ 2010 Express Edition','line_number':298,'multiline':False]
['text':' Visual Studio 2008','line_number':309,'multiline':False]
['text':' Visual C++ 2008 Express Edition','line_number':319,'multiline':False]
['text':' Visual Studio 2005','line_number':330,'multiline':False]
['text':' Visual C++ 2005 Express Edition','line_number':341,'multiline':False]
['text':' Visual Studio .NET 2003','line_number':353,'multiline':False]
['text':' Visual Studio .NET','line_number':364,'multiline':False]
['text':' Visual Studio 6.0','line_number':375,'multiline':False]
['text':' Finding installed versions of Visual Studio isn't cheap, because it','line_number':393,'multiline':False]
['text':' goes not only to the registry but also to the disk to sanity-check','line_number':394,'multiline':False]
['text':' that there is, in fact, a Visual Studio directory there and that the','line_number':395,'multiline':False]
['text':' registry entry isn't just stale.  Find this information once, when','line_number':396,'multiline':False]
['text':' requested, and cache it.','line_number':397,'multiline':False]
['text':' Need to clear installed VC's as well as they are used in finding','line_number':424,'multiline':False]
['text':' installed VS's','line_number':425,'multiline':False]
['text':' We may be asked to update multiple construction environments with','line_number':429,'multiline':False]
['text':' SDK information.  When doing this, we check on-disk for whether','line_number':430,'multiline':False]
['text':' the SDK has 'mfc' and 'atl' subdirectories.  Since going to disk','line_number':431,'multiline':False]
['text':' is expensive, cache results by directory.','line_number':432,'multiline':False]
['text':'SDKEnvironmentUpdates = {}','line_number':434,'multiline':False]
['text':'','line_number':435,'multiline':False]
['text':'def set_sdk_by_directory(env, sdk_dir):','line_number':436,'multiline':False]
['text':'    global SDKEnvironmentUpdates','line_number':437,'multiline':False]
['text':'    try:','line_number':438,'multiline':False]
['text':'        env_tuple_list = SDKEnvironmentUpdates[sdk_dir]','line_number':439,'multiline':False]
['text':'    except KeyError:','line_number':440,'multiline':False]
['text':'        env_tuple_list = []','line_number':441,'multiline':False]
['text':'        SDKEnvironmentUpdates[sdk_dir] = env_tuple_list','line_number':442,'multiline':False]
['text':'','line_number':443,'multiline':False]
['text':'        include_path = os.path.join(sdk_dir, 'include')','line_number':444,'multiline':False]
['text':'        mfc_path = os.path.join(include_path, 'mfc')','line_number':445,'multiline':False]
['text':'        atl_path = os.path.join(include_path, 'atl')','line_number':446,'multiline':False]
['text':'','line_number':447,'multiline':False]
['text':'        if os.path.exists(mfc_path):','line_number':448,'multiline':False]
['text':'            env_tuple_list.append(('INCLUDE', mfc_path))','line_number':449,'multiline':False]
['text':'        if os.path.exists(atl_path):','line_number':450,'multiline':False]
['text':'            env_tuple_list.append(('INCLUDE', atl_path))','line_number':451,'multiline':False]
['text':'        env_tuple_list.append(('INCLUDE', include_path))','line_number':452,'multiline':False]
['text':'','line_number':453,'multiline':False]
['text':'        env_tuple_list.append(('LIB', os.path.join(sdk_dir, 'lib')))','line_number':454,'multiline':False]
['text':'        env_tuple_list.append(('LIBPATH', os.path.join(sdk_dir, 'lib')))','line_number':455,'multiline':False]
['text':'        env_tuple_list.append(('PATH', os.path.join(sdk_dir, 'bin')))','line_number':456,'multiline':False]
['text':'','line_number':457,'multiline':False]
['text':'    for variable, directory in env_tuple_list:','line_number':458,'multiline':False]
['text':'        env.PrependENVPath(variable, directory)','line_number':459,'multiline':False]
['text':' Some check like this would let us provide a useful error message','line_number':476,'multiline':False]
['text':' if they try to set a Visual Studio version that's not installed.','line_number':477,'multiline':False]
['text':' However, we also want to be able to run tests (like the unit','line_number':478,'multiline':False]
['text':' tests) on systems that don't, or won't ever, have it installed.','line_number':479,'multiline':False]
['text':' It might be worth resurrecting this, with some configurable','line_number':480,'multiline':False]
['text':' setting that the tests can use to bypass the check.','line_number':481,'multiline':False]
['text':'if not vs:','line_number':482,'multiline':False]
['text':'    msg = "Visual Studio version %s is not installed" % repr(msvs)','line_number':483,'multiline':False]
['text':'    raise SCons.Errors.UserError, msg','line_number':484,'multiline':False]
['text':' get all versions, and remember them for speed later','line_number':500,'multiline':False]
['text':'use highest version by default','line_number':508,'multiline':False]
['text':' XXX: I think this is broken. This will silently set a bogus tool instead','line_number':550,'multiline':False]
['text':' of failing, but there is no other way with the current scons tool','line_number':551,'multiline':False]
['text':' framework','line_number':552,'multiline':False]
['text':' Local Variables:','line_number':579,'multiline':False]
['text':' tab-width:4','line_number':580,'multiline':False]
['text':' indent-tabs-mode:nil','line_number':581,'multiline':False]
['text':' End:','line_number':582,'multiline':False]
['text':' vim: set expandtab tabstop=4 shiftwidth=4:','line_number':583,'multiline':False]
