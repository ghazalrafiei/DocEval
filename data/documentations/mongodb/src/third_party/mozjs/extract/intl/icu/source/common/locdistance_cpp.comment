['text':' Â© 2019 and later: Unicode, Inc. and others.','line_number':1,'multiline':False]
['text':' License & terms of use: http://www.unicode.org/copyright.html','line_number':2,'multiline':False]
['text':' locdistance.cpp','line_number':4,'multiline':False]
['text':' created: 2019may08 Markus W. Scherer','line_number':5,'multiline':False]
['text':'*
 * Bit flag used on the last character of a subtag in the trie.
 * Must be set consistently by the builder and the lookup code.
 ','line_number':25,'multiline':True]
['text':'* Distance value bit flag, set by the builder. ','line_number':30,'multiline':True]
['text':'* Distance value bit flag, set by trieNext(). ','line_number':32,'multiline':True]
['text':' Indexes into array of distances.','line_number':38,'multiline':False]
['text':' namespace','line_number':57,'multiline':False]
['text':' This function is invoked only via umtx_initOnce().','line_number':60,'multiline':False]
['text':' ok if no paradigms','line_number':67,'multiline':False]
['text':' For the default demotion value, use the','line_number':95,'multiline':False]
['text':' default region distance between unrelated Englishes.','line_number':96,'multiline':False]
['text':' Thus, unless demotion is turned off,','line_number':97,'multiline':False]
['text':' a mere region difference for one desired locale','line_number':98,'multiline':False]
['text':' is as good as a perfect match for the next following desired locale.','line_number':99,'multiline':False]
['text':' As of CLDR 36, we have <languageMatch desired="en_*_*" supported="en_*_*" distance="5"/>.','line_number':100,'multiline':False]
['text':' Look up the desired language only once for all supported LSRs.','line_number':115,'multiline':False]
['text':' Its "distance" is either a match point value of 0, or a non-match negative value.','line_number':116,'multiline':False]
['text':' Note: The data builder verifies that there are no <*, supported> or <desired, *> rules.','line_number':117,'multiline':False]
['text':' Index of the supported LSR with the lowest distance.','line_number':120,'multiline':False]
['text':' Cached lookup info from XLikelySubtags.compareLikely().','line_number':122,'multiline':False]
['text':' Note: The data builder verifies that there are no rules with "any" (*) language and','line_number':135,'multiline':False]
['text':' real (non *) script or region subtags.','line_number':136,'multiline':False]
['text':' This means that if the lookup for either language fails we can use','line_number':137,'multiline':False]
['text':' the default distances without further lookups.','line_number':138,'multiline':False]
['text':' <*, *>','line_number':143,'multiline':False]
['text':' Round up the shifted threshold (if fraction bits are not 0)','line_number':153,'multiline':False]
['text':' for comparison with un-shifted distances until we need fraction bits.','line_number':154,'multiline':False]
['text':' (If we simply shifted non-zero fraction bits away, then we might ignore a language','line_number':155,'multiline':False]
['text':' when it's really still a micro distance below the threshold.)','line_number':156,'multiline':False]
['text':' We implement "favor subtag" by reducing the language subtag distance','line_number':158,'multiline':False]
['text':' (unscientifically reducing it to a quarter of the normal value),','line_number':159,'multiline':False]
['text':' so that the script distance is relatively more important.','line_number':160,'multiline':False]
['text':' For example, given a default language distance of 80, we reduce it to 20,','line_number':161,'multiline':False]
['text':' which is below the default threshold of 50, which is the default script distance.','line_number':162,'multiline':False]
['text':' Let distance == roundedThreshold pass until the tie-breaker logic','line_number':166,'multiline':False]
['text':' at the end of the loop.','line_number':167,'multiline':False]
['text':' regionDistance = 0','line_number':191,'multiline':False]
['text':' From here on we know the regions are not equal.','line_number':200,'multiline':False]
['text':' Map each region to zero or more partitions. (zero = one non-matching string)','line_number':201,'multiline':False]
['text':' (Each array of single-character partition strings is encoded as one string.)','line_number':202,'multiline':False]
['text':' If either side has more than one, then we find the maximum distance.','line_number':203,'multiline':False]
['text':' This could be optimized by adding some more structure, but probably not worth it.','line_number':204,'multiline':False]
['text':' Distinguish between equivalent but originally unequal locales via an','line_number':213,'multiline':False]
['text':' additional micro distance.','line_number':214,'multiline':False]
['text':' Is there also a match when we swap desired/supported?','line_number':218,'multiline':False]
['text':' Is there also a match when we swap desired/supported?','line_number':231,'multiline':False]
['text':' Is there also a match when we swap desired/supported?','line_number':239,'multiline':False]
['text':' This supported locale matches as well as the previous best match,','line_number':244,'multiline':False]
['text':' and neither matches perfectly,','line_number':245,'multiline':False]
['text':' but this one is "more likely" (has more-default subtags).','line_number':246,'multiline':False]
['text':' Note: The data builder verifies that there are no <*, supported> or <desired, *> rules.','line_number':260,'multiline':False]
['text':' <*, *>','line_number':266,'multiline':False]
['text':' same script','line_number':269,'multiline':False]
['text':' See if we have single desired/supported partitions, from NUL-terminated','line_number':287,'multiline':False]
['text':' partition strings without explicit length.','line_number':288,'multiline':False]
['text':' gt1: more than 1 character','line_number':289,'multiline':False]
['text':' equivalent to: if (desLength == 1 && suppLength == 1)','line_number':290,'multiline':False]
['text':' Fastpath for single desired/supported partitions.','line_number':292,'multiline':False]
['text':' for restart of inner loop','line_number':303,'multiline':False]
['text':' Fall back to * only once, not for each pair of partition strings.','line_number':305,'multiline':False]
['text':' Look up each desired-partition string only once,','line_number':308,'multiline':False]
['text':' not for each (desired, supported) pair.','line_number':309,'multiline':False]
['text':' <*, *>','line_number':359,'multiline':False]
['text':' no empty subtags in the distance data','line_number':369,'multiline':False]
['text':' EBCDIC: If *s is not an invariant character,','line_number':373,'multiline':False]
['text':' then c is now 0 and will simply not match anything, which is harmless.','line_number':374,'multiline':False]
['text':' last character of this subtag','line_number':381,'multiline':False]
['text':' Linear search for a very short list (length 6 as of 2019),','line_number':403,'multiline':False]
['text':' because we look for equivalence not equality, and','line_number':404,'multiline':False]
['text':' because it's easy.','line_number':405,'multiline':False]
['text':' If there are many paradigm LSRs we should use a hash set','line_number':406,'multiline':False]
['text':' with custom comparator and hasher.','line_number':407,'multiline':False]
