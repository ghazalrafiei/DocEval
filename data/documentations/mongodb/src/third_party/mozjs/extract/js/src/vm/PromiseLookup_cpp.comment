['text':' -*- Mode: C++; tab-width: 8; indent-tabs-mode: nil; c-basic-offset: 2 -*-
 * vim: set ts=8 sts=2 et sw=2 tw=80:
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. ','line_number':1,'multiline':True]
['text':' MOZ_ASSERT','line_number':9,'multiline':False]
['text':' js::Promise_then, js::Promise_static_resolve, js::Promise_static_species','line_number':11,'multiline':False]
['text':' js::gc::IsInsideNursery','line_number':12,'multiline':False]
['text':' SYMBOL_TO_JSID','line_number':13,'multiline':False]
['text':' JSProto_*','line_number':14,'multiline':False]
['text':' JS::Value, JS::ObjectValue','line_number':15,'multiline':False]
['text':' js::AlwaysPoison, JS_RESET_VALUE_PATTERN, MemCheckKind','line_number':16,'multiline':False]
['text':' js::GlobalObject','line_number':17,'multiline':False]
['text':' JSContext','line_number':18,'multiline':False]
['text':' JSFunction','line_number':19,'multiline':False]
['text':' JSObject','line_number':20,'multiline':False]
['text':' js::NativeObject','line_number':21,'multiline':False]
['text':' js::WellKnownSymbols','line_number':22,'multiline':False]
['text':' js::Shape','line_number':23,'multiline':False]
['text':' js::IsFunctionObject, js::IsNativeFunction','line_number':25,'multiline':False]
['text':' Get the canonical Promise.prototype.','line_number':63,'multiline':False]
['text':' Check condition 1:','line_number':66,'multiline':False]
['text':' Leave the cache uninitialized if the Promise class itself is not yet','line_number':67,'multiline':False]
['text':' initialized.','line_number':68,'multiline':False]
['text':' Get the canonical Promise constructor.','line_number':73,'multiline':False]
['text':' Shortcut returns below means Promise[@@species] will never be','line_number':79,'multiline':False]
['text':' optimizable, set to disabled now, and clear it later when we succeed.','line_number':80,'multiline':False]
['text':' Check condition 2:','line_number':83,'multiline':False]
['text':' Look up Promise.prototype.constructor and ensure it's a data property.','line_number':84,'multiline':False]
['text':' Get the referred value, and ensure it holds the canonical Promise','line_number':91,'multiline':False]
['text':' constructor.','line_number':92,'multiline':False]
['text':' Check condition 3:','line_number':101,'multiline':False]
['text':' Look up Promise.prototype.then and ensure it's a data property.','line_number':102,'multiline':False]
['text':' Get the referred value, and ensure it holds the canonical "then"','line_number':109,'multiline':False]
['text':' function.','line_number':110,'multiline':False]
['text':' Check condition 4:','line_number':115,'multiline':False]
['text':' Look up the '@@species' value on Promise.','line_number':116,'multiline':False]
['text':' Get the referred value, ensure it holds the canonical Promise[@@species]','line_number':123,'multiline':False]
['text':' function.','line_number':124,'multiline':False]
['text':' Check condition 5:','line_number':131,'multiline':False]
['text':' Look up Promise.resolve and ensure it's a data property.','line_number':132,'multiline':False]
['text':' Get the referred value, and ensure it holds the canonical "resolve"','line_number':139,'multiline':False]
['text':' function.','line_number':140,'multiline':False]
['text':' Store raw pointers below. This is okay to do here, because all objects','line_number':146,'multiline':False]
['text':' are in the tenured heap.','line_number':147,'multiline':False]
['text':' Ensure that Promise.prototype still has the expected shape.','line_number':175,'multiline':False]
['text':' Ensure that Promise still has the expected shape.','line_number':180,'multiline':False]
['text':' Ensure that Promise.prototype.constructor is the canonical constructor.','line_number':185,'multiline':False]
['text':' Ensure that Promise.prototype.then is the canonical "then" function.','line_number':191,'multiline':False]
['text':' Ensure the species getter contains the canonical @@species function.','line_number':197,'multiline':False]
['text':' Ensure that Promise.resolve is the canonical "resolve" function.','line_number':203,'multiline':False]
['text':' If the cache is not initialized, initialize it.','line_number':215,'multiline':False]
['text':' If the promise state is no longer sane, reinitialize.','line_number':220,'multiline':False]
['text':' When we're not allowed to reinitialize, the promise state must','line_number':225,'multiline':False]
['text':' still be sane if the cache is already initialized.','line_number':226,'multiline':False]
['text':' If the cache is disabled or still uninitialized, don't bother trying to','line_number':231,'multiline':False]
['text':' optimize.','line_number':232,'multiline':False]
['text':' By the time we get here, we should have a sane promise state.','line_number':237,'multiline':False]
['text':' Promise and Promise.prototype are in their default states iff the','line_number':244,'multiline':False]
['text':' lookup cache was successfully initialized.','line_number':245,'multiline':False]
['text':' Ensure |promise|'s prototype is the actual Promise.prototype.','line_number':251,'multiline':False]
['text':' Ensure |promise| doesn't define any own properties. This serves as a','line_number':256,'multiline':False]
['text':' quick check to make sure |promise| doesn't define an own "constructor"','line_number':257,'multiline':False]
['text':' or "then" property which may shadow Promise.prototype.constructor or','line_number':258,'multiline':False]
['text':' Promise.prototype.then.','line_number':259,'multiline':False]
['text':' Promise and Promise.prototype must be in their default states.','line_number':265,'multiline':False]
['text':' The object uses the default properties from Promise.prototype.','line_number':270,'multiline':False]
