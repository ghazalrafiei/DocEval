['text':' -*- Mode: C++; tab-width: 8; indent-tabs-mode: nil; c-basic-offset: 2 -*-
 * vim: set ts=8 sts=2 et sw=2 tw=80:
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. ','line_number':1,'multiline':True]
['text':' MOZ_ASSERT, MOZ_RELEASE_ASSERT, MOZ_CRASH','line_number':9,'multiline':False]
['text':' Nothing','line_number':14,'multiline':False]
['text':' JS_STACK_GROWTH_DIRECTION','line_number':38,'multiline':False]
['text':' On the main thread, get stack base from glibc's __libc_stack_end rather','line_number':69,'multiline':False]
['text':' than pthread APIs to avoid filesystem calls /proc/self/maps.  Non-main','line_number':70,'multiline':False]
['text':' threads spawned with pthreads can read this information directly from their','line_number':71,'multiline':False]
['text':' pthread struct, but the main thread must go parse /proc/self/maps to figure','line_number':72,'multiline':False]
['text':' the mapped stack address space ranges.  We want to avoid reading from','line_number':73,'multiline':False]
['text':' /proc/ so that firefox can run in sandboxed environments where /proc may','line_number':74,'multiline':False]
['text':' not be mounted.','line_number':75,'multiline':False]
['text':' If __libc_stack_end is not found, architecture specific frame pointer','line_number':79,'multiline':False]
['text':' hopping will need to be implemented.','line_number':80,'multiline':False]
['text':' We don't need to fix stackBase, as it already roughly points to beginning','line_number':88,'multiline':False]
['text':' of the stack','line_number':89,'multiline':False]
['text':' Non-main threads have the required info stored in memory, so no filesystem','line_number':93,'multiline':False]
['text':' calls are made.','line_number':94,'multiline':False]
['text':' stackBase will be the *lowest* address on all architectures.','line_number':100,'multiline':False]
['text':' Since we rearrange the layout for wasi via --stack-first flag for the linker','line_number':122,'multiline':False]
['text':' the final layout is: 0x00 | <- stack | data | heap -> |.','line_number':123,'multiline':False]
['text':' __wasi__','line_number':131,'multiline':False]
['text':' e.g. on FreeBSD 4.8 or newer, neundorf@kde.org ','line_number':144,'multiline':True]
['text':'
   * FIXME: this function is non-portable;
   * other POSIX systems may have different np alternatives
   ','line_number':147,'multiline':True]
['text':' bionic's pthread_attr_getstack prior to API 21 doesn't tell the truth','line_number':163,'multiline':False]
['text':' for the main thread (see bug 846670). So we scan /proc/self/maps to','line_number':164,'multiline':False]
['text':' find the segment which contains the stack.','line_number':165,'multiline':False]
['text':' Put the string on the stack, otherwise there is the danger that it','line_number':168,'multiline':False]
['text':' has not been decompressed by the the on-demand linker. Bug 1165460.','line_number':169,'multiline':False]
['text':'','line_number':170,'multiline':False]
['text':' The volatile keyword should stop the compiler from trying to omit','line_number':171,'multiline':False]
['text':' the stack copy in the future (hopefully).','line_number':172,'multiline':False]
['text':' For non main-threads pthread allocates the stack itself so it tells','line_number':193,'multiline':False]
['text':' the truth.','line_number':194,'multiline':False]
['text':' !XP_WIN ','line_number':214,'multiline':True]
