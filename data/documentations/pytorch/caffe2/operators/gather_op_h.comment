['text':' This maintains index-mapping functions shared by Gather and BatchGather ops.','line_number':10,'multiline':False]
['text':' New shape is concatenation:','line_number':13,'multiline':False]
['text':'  [data dims before axis] + [indices dims] + [data dims after axis]','line_number':14,'multiline':False]
['text':' If the dimension we are indexing is empty, just use data_dims as shape.','line_number':22,'multiline':False]
['text':' This replicates behavior in (https://github.com/pytorch/pytorch/pull/13781)','line_number':23,'multiline':False]
['text':' needed to allow workflows with empty batch to succeed.','line_number':24,'multiline':False]
['text':' Check that indices fall within dimension array size with CAFFE_ENFORCE.','line_number':40,'multiline':False]
['text':'','line_number':47,'multiline':False]
['text':' Actual gather implementation - resizes output and copies indexed data.','line_number':62,'multiline':False]
['text':' If we endup using it on GPU doing O(N) memcpy is probably not best :)','line_number':72,'multiline':False]
['text':' TODO: implement prefetching if it starts mattering (TF does it)','line_number':73,'multiline':False]
['text':' ONNX allows negative axis to index from the back, valid range: [-r, r].','line_number':80,'multiline':False]
['text':' New shape:','line_number':88,'multiline':False]
['text':'  [data dims before axis] + [indices dims] + [data dims after axis]','line_number':89,'multiline':False]
['text':' Succeed if size of output is zero, which can happen for empty batch which','line_number':95,'multiline':False]
['text':' would have data dimension size of 0.','line_number':96,'multiline':False]
['text':' This *must* be done AFTER output->raw_mutable_data() above as that has','line_number':97,'multiline':False]
['text':' important allocation side effect that we must see.','line_number':98,'multiline':False]
['text':' Treat indices as a single block even if they have multiple dimensions.','line_number':112,'multiline':False]
['text':' The "gathered batch" is a cumulative result combining indexed blocks.','line_number':113,'multiline':False]
['text':' Special-case single-float copy for efficiency','line_number':131,'multiline':False]
['text':' outer_dims_product specifies how many times we repeat inner dimensions,','line_number':150,'multiline':False]
['text':' so we just iterate over it to cover all outer dimensions.','line_number':151,'multiline':False]
['text':' namespace gather_helper','line_number':171,'multiline':False]
['text':' TBD: We may want to fix the old index wrap behaviour once we have','line_number':183,'multiline':False]
['text':' operator versioning, to only apply it when needed as otherwise its likely','line_number':184,'multiline':False]
['text':' an error.','line_number':185,'multiline':False]
['text':' Right now, we apply index wrapping by default only to axis == 0,','line_number':186,'multiline':False]
['text':' since we have ONNX conversion code that uses it. For other ops it','line_number':187,'multiline':False]
['text':' needs to be specified explicitly with argument or you don't get it.','line_number':188,'multiline':False]
['text':' namespace caffe2','line_number':218,'multiline':False]
['text':' GATHER_OP_H_','line_number':219,'multiline':False]
