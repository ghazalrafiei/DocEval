['text':'# @package gradient_checker','line_number':1,'multiline':False]
['text':' Module caffe2.python.gradient_checker','line_number':2,'multiline':False]
['text':' If grad_blob is not a single blob, it should be a gradient slice.','line_number':26,'multiline':False]
['text':' To make it comparable with the estimiated gradient which is dense,','line_number':27,'multiline':False]
['text':' we need to first convert grad_blob to dense gradient.','line_number':28,'multiline':False]
['text':' Run.','line_number':190,'multiline':False]
['text':' Get Loss and feed in the gradients, run gradient ops.','line_number':193,'multiline':False]
['text':' Run gradient ops','line_number':200,'multiline':False]
['text':' Get gradients','line_number':202,'multiline':False]
['text':' Entering the checker workspace','line_number':260,'multiline':False]
['text':' TODO(jiayq): use the gradient registration instead of the old','line_number':267,'multiline':False]
['text':' hack.','line_number':268,'multiline':False]
['text':' First, feed in the input.','line_number':274,'multiline':False]
['text':' Get the loss and gradient for the original.','line_number':281,'multiline':False]
['text':' Grad check is very expensive (as it involves running the op from','line_number':300,'multiline':False]
['text':' scratch for each of the input tensor elements). Thus, let's','line_number':301,'multiline':False]
['text':' run it by default only on a small subset of dimensions. Here we','line_number':302,'multiline':False]
['text':' apply very scientific approach: the first and the last 3 elements','line_number':303,'multiline':False]
['text':' of each tensor. Pass CAFFE2_FULL_GRAD_CHECK=1 env var to enable','line_number':304,'multiline':False]
['text':' the full check','line_number':305,'multiline':False]
['text':' Positive gradient','line_number':310,'multiline':False]
['text':' Negative gradient','line_number':316,'multiline':False]
['text':' Recover the value','line_number':322,'multiline':False]
['text':' Now, check correctness','line_number':326,'multiline':False]
['text':' After finishing, cleaning up things.','line_number':336,'multiline':False]
['text':' We reset the workspace to make sure everything intermediate is','line_number':338,'multiline':False]
['text':' cleaned up. Note that there is no need to delete a workspace -','line_number':339,'multiline':False]
['text':' when empty it takes a very limited amount of memory.','line_number':340,'multiline':False]
