['text':'!/usr/bin/env python3','line_number':1,'multiline':False]
['text':' Owner(s): ["oncall: r2p"]','line_number':2,'multiline':False]
['text':' Copyright (c) Facebook, Inc. and its affiliates.','line_number':4,'multiline':False]
['text':' All rights reserved.','line_number':5,'multiline':False]
['text':'','line_number':6,'multiline':False]
['text':' This source code is licensed under the BSD-style license found in the','line_number':7,'multiline':False]
['text':' LICENSE file in the root directory of this source tree.','line_number':8,'multiline':False]
['text':' just check these env vars exist, os.environ[...] will naturally throw','line_number':166,'multiline':False]
['text':' if the variable does not exist','line_number':167,'multiline':False]
['text':' checks if the env var ``key`` matches ``value``','line_number':191,'multiline':False]
['text':' this function is intended to be used as the entrypoint to the elastic run','line_number':192,'multiline':False]
['text':' start a standalone, single process etcd server to use for all tests','line_number':257,'multiline':False]
['text':' stop the standalone etcd server','line_number':263,'multiline':False]
['text':' pyre-fixme[56]: Pyre was not able to infer the type of the decorator','line_number':325,'multiline':False]
['text':'  `torch.distributed.elastic.multiprocessing.errors.record`.','line_number':326,'multiline':False]
['text':' (role, agent_result)','line_number':331,'multiline':False]
['text':' each element in this queue holds a tuple (role, RunResult) for each agent','line_number':394,'multiline':False]
['text':' run first agent of first config on main process for test coverage + ease of debugging','line_number':397,'multiline':False]
['text':' it is important we loop in reverse order b/c running fn on the main process blocks','line_number':398,'multiline':False]
['text':' the default is c10d backend','line_number':440,'multiline':False]
['text':' just checks that all env vars that we need to set on the user script','line_number':512,'multiline':False]
['text':' is actually set','line_number':513,'multiline':False]
['text':' make sure TORCH_NCCL_ASYNC_ERROR_HANDLING set in os.environ is honored','line_number':518,'multiline':False]
['text':' if not present in env var it should default to 1','line_number':530,'multiline':False]
['text':' Set the env for watchdog','line_number':541,'multiline':False]
['text':' Run the agent','line_number':545,'multiline':False]
['text':' Do not set the env for watchdog','line_number':553,'multiline':False]
['text':' Run the agent','line_number':557,'multiline':False]
['text':' _dist_sum internally checks that the sum computed is valid','line_number':634,'multiline':False]
['text':' When the process method is spawn, the coverage collector hangs','line_number':653,'multiline':False]
['text':' due to getting stuck on the _dist_sum in waiting for TCPStore workers','line_number':654,'multiline':False]
['text':' to join the cluster','line_number':655,'multiline':False]
['text':' TODO(aivanou): t83447589 come up with the proper fix','line_number':656,'multiline':False]
['text':' sums all ranks on 3 agents; each running 1, 2, 3 workers respectively','line_number':701,'multiline':False]
['text':' sum should be equal to 0 + (1 + 2) + (3 + 4 + 5) = 15','line_number':702,'multiline':False]
['text':' sum asserted inside _dist_sum()','line_number':703,'multiline':False]
['text':' When the process method is spawn, the coverage collector hangs','line_number':709,'multiline':False]
['text':' due to getting stuck on the _dist_sum in waiting for TCPStore workers','line_number':710,'multiline':False]
['text':' to join the cluster','line_number':711,'multiline':False]
['text':' TODO(aivanou): t83447589 come up with the proper fix','line_number':712,'multiline':False]
['text':' ran two; both failed; first failure is either rank 0 or 1','line_number':753,'multiline':False]
['text':' role -> [role_rank,...]','line_number':896,'multiline':False]
['text':' group rank -> [(rank, role_rank),...]','line_number':898,'multiline':False]
['text':' global world size == sum of all the role world sizes','line_number':901,'multiline':False]
['text':' Make sure that each agent assigns consecutive ranks to workers','line_number':925,'multiline':False]
['text':' The first argument is the global_rank and the second argument','line_number':926,'multiline':False]
['text':' is role_rank','line_number':927,'multiline':False]
['text':' restart odd agents','line_number':962,'multiline':False]
['text':' wait for all processes to finish should not take exit barrier time','line_number':1026,'multiline':False]
['text':' Validate that the processes finish close to each other.','line_number':1036,'multiline':False]
['text':' Using a slightly higher timeout than 2 * monitor_interval (0.01) to make it less flaky','line_number':1037,'multiline':False]
['text':' kill odd agents','line_number':1080,'multiline':False]
['text':' there is only one master but the global rank is not stable','line_number':1147,'multiline':False]
['text':' so compare the master return value as a collection','line_number':1148,'multiline':False]
['text':' _sleep() returns its own rank','line_number':1188,'multiline':False]
['text':' _sleep() returns its own rank','line_number':1224,'multiline':False]
