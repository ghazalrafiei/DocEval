['text':' Graph after EliminateConcatCommonInputs:','line_number':40,'multiline':False]
['text':'  graph(%0 : ...,','line_number':41,'multiline':False]
['text':'        %1 : ...,','line_number':42,'multiline':False]
['text':'        %2 : ...):','line_number':43,'multiline':False]
['text':'    %3 : int = prim::Constant[value=0]()','line_number':44,'multiline':False]
['text':'    %4 : Tensor = prim::VarConcat(%0, %1, %3)','line_number':45,'multiline':False]
['text':'    %7 : Tensor = prim::VarConcat(%4, %2, %3) // UPDATED','line_number':46,'multiline':False]
['text':'    %8 : Tensor[] = prim::ListConstruct(%4, %7)','line_number':47,'multiline':False]
['text':'    return (%8)','line_number':48,'multiline':False]
['text':'exactly','line_number':51,'multiline':True]
['text':'exactly','line_number':52,'multiline':True]
['text':'exactly','line_number':53,'multiline':True]
['text':'exactly','line_number':54,'multiline':True]
['text':'exactly','line_number':55,'multiline':True]
['text':' Graph after EliminateConcatCommonInputs:','line_number':85,'multiline':False]
['text':'  graph(%0 : ...,','line_number':86,'multiline':False]
['text':'        %1 : ...,','line_number':87,'multiline':False]
['text':'        %2 : ...):','line_number':88,'multiline':False]
['text':'    %3 : int = prim::Constant[value=0]()','line_number':89,'multiline':False]
['text':'    %4 : Tensor = prim::VarConcat(%1, %2, %3)','line_number':90,'multiline':False]
['text':'    %7 : Tensor = prim::VarConcat(%0, %4, %3) // UPDATED','line_number':91,'multiline':False]
['text':'    %8 : Tensor[] = prim::ListConstruct(%4, %7)','line_number':92,'multiline':False]
['text':'    return (%8)','line_number':93,'multiline':False]
['text':'exactly','line_number':96,'multiline':True]
['text':'exactly','line_number':97,'multiline':True]
['text':'exactly','line_number':98,'multiline':True]
['text':'exactly','line_number':99,'multiline':True]
['text':'exactly','line_number':100,'multiline':True]
['text':' No optimizations should have happened in this case since the inputs','line_number':137,'multiline':False]
['text':' to the `cat` are in different order.','line_number':138,'multiline':False]
['text':'exactly','line_number':175,'multiline':True]
['text':'exactly','line_number':176,'multiline':True]
['text':'exactly','line_number':177,'multiline':True]
['text':'exactly','line_number':178,'multiline':True]
['text':'exactly','line_number':179,'multiline':True]
['text':' After full concat optimization we should have the following graph:','line_number':209,'multiline':False]
['text':'','line_number':210,'multiline':False]
['text':'  graph(%0 : ...,','line_number':211,'multiline':False]
['text':'        %1 : ...):','line_number':212,'multiline':False]
['text':'    ...','line_number':213,'multiline':False]
['text':'    %4 : Tensor = aten::clamp_max(...)','line_number':214,'multiline':False]
['text':'    %5 : Tensor = aten::clamp_max(...)','line_number':215,'multiline':False]
['text':'    %13 : int[] = prim::ListConstruct(...)','line_number':216,'multiline':False]
['text':'    %14 : Tensor = aten::empty(%13, ...)    // concat buffer','line_number':217,'multiline':False]
['text':'    %17 : Tensor = aten::slice(%14, ...)    // slice for %4','line_number':218,'multiline':False]
['text':'    %18 : Tensor = aten::copy_(%17, %4)','line_number':219,'multiline':False]
['text':'    %20 : Tensor = aten::slice(%14, ...)    // slice for %5','line_number':220,'multiline':False]
['text':'    %21 : Tensor = aten::copy_(%20, %5)','line_number':221,'multiline':False]
['text':'    return (%14)','line_number':222,'multiline':False]
['text':'exactly','line_number':224,'multiline':True]
['text':'exactly','line_number':225,'multiline':True]
['text':'exactly','line_number':226,'multiline':True]
['text':'exactly','line_number':227,'multiline':True]
['text':'exactly','line_number':228,'multiline':True]
['text':'exactly','line_number':229,'multiline':True]
['text':'exactly','line_number':230,'multiline':True]
['text':'exactly','line_number':231,'multiline':True]
['text':' No optimizations should have happened in this case since the output','line_number':265,'multiline':False]
['text':' shape of `aten::cat` is not known.','line_number':266,'multiline':False]
['text':' No optimizations should have happened in this case since the shape of %5,','line_number':300,'multiline':False]
['text':' which is an input to `aten::cat`, is not known.','line_number':301,'multiline':False]
['text':' After replacing `aten::cat` with `prim::VarConcat` we should have the','line_number':337,'multiline':False]
['text':' following graph:','line_number':338,'multiline':False]
['text':'','line_number':339,'multiline':False]
['text':'  graph(%0 : ...,','line_number':340,'multiline':False]
['text':'        %1 : ...):','line_number':341,'multiline':False]
['text':'    %zero : int = prim:Constant[value=0]()','line_number':342,'multiline':False]
['text':'    %varcat : Tensor = prim::VarConcat(%0, %1, %2, %3, %4, %5, %zero)','line_number':343,'multiline':False]
['text':'    return (%varcat)','line_number':344,'multiline':False]
['text':'exactly','line_number':346,'multiline':True]
['text':'exactly','line_number':347,'multiline':True]
['text':'exactly','line_number':348,'multiline':True]
['text':' After full concat optimization we should have the following graph:','line_number':382,'multiline':False]
['text':'','line_number':383,'multiline':False]
['text':'  graph(%0 : ...,','line_number':384,'multiline':False]
['text':'        %1 : ...,','line_number':385,'multiline':False]
['text':'        %2 : ...,','line_number':386,'multiline':False]
['text':'        %3 : ....):','line_number':387,'multiline':False]
['text':'    %zero : int = prim:Constant[value=0]()','line_number':388,'multiline':False]
['text':'    %varcat1 : Tensor = prim::VarConcat(%0, %1, %zero)','line_number':389,'multiline':False]
['text':'    %varcat2 : Tensor = prim::VarConcat(%2, %3, %zero)','line_number':390,'multiline':False]
['text':'    return (%varcat1, %varcat2)','line_number':391,'multiline':False]
['text':'exactly','line_number':393,'multiline':True]
['text':'exactly','line_number':394,'multiline':True]
['text':'exactly','line_number':395,'multiline':True]
['text':' After replacing `aten::cat` with `prim::VarConcat` we should have the','line_number':422,'multiline':False]
['text':' following graph:','line_number':423,'multiline':False]
['text':'','line_number':424,'multiline':False]
['text':'  graph(%0 : ...,','line_number':425,'multiline':False]
['text':'        %1 : ...):','line_number':426,'multiline':False]
['text':'    %zero : int = prim:Constant[value=0]()','line_number':427,'multiline':False]
['text':'    %input : Tensor[] = prim::ListConstruct(%0, %1)','line_number':428,'multiline':False]
['text':'    %varcat : Tensor = prim::VarConcat(%0, %1, %zero)','line_number':429,'multiline':False]
['text':'    return (%varcat, %input)','line_number':430,'multiline':False]
['text':'exactly','line_number':432,'multiline':True]
['text':'exactly','line_number':433,'multiline':True]
['text':'exactly','line_number':434,'multiline':True]
['text':' The input list to `aten::cat` is mutated only after `aten::cat` op. So,','line_number':464,'multiline':False]
['text':' it should have been replaced with `prim::VarConcat`. The transformed graph','line_number':465,'multiline':False]
['text':' should look like the following:','line_number':466,'multiline':False]
['text':'','line_number':467,'multiline':False]
['text':'  graph(%0 : ...,','line_number':468,'multiline':False]
['text':'        %1 : ...,','line_number':469,'multiline':False]
['text':'        %2 : ...):','line_number':470,'multiline':False]
['text':'    %3 : int = prim:Constant[value=0]()','line_number':471,'multiline':False]
['text':'    %4 : Tensor[] = prim::ListConstruct(%0, %1)','line_number':472,'multiline':False]
['text':'    %7 : Tensor = prim::VarConcat(%0, %1, %3)','line_number':473,'multiline':False]
['text':'    %6 : Tensor = aten::append(%4, %2)','line_number':474,'multiline':False]
['text':'    return (%7, %4)','line_number':475,'multiline':False]
['text':'exactly','line_number':477,'multiline':True]
['text':'exactly','line_number':478,'multiline':True]
['text':'exactly','line_number':479,'multiline':True]
['text':' No transformation should have happened since the `prim::ListConstruct` is','line_number':510,'multiline':False]
['text':' mutated before `aten::cat`.','line_number':511,'multiline':False]
['text':'exactly','line_number':513,'multiline':True]
['text':'exactly','line_number':514,'multiline':True]
['text':'exactly','line_number':515,'multiline':True]
['text':' The mutation of the list must be removed and the `aten::cat` op must','line_number':525,'multiline':False]
['text':' be replaced with the `prim::VarConcat` op in the graph. The transformed','line_number':526,'multiline':False]
['text':' graph should look like the following:','line_number':527,'multiline':False]
['text':'','line_number':528,'multiline':False]
['text':'  graph(%0 : ...,','line_number':529,'multiline':False]
['text':'        %1 : ...,','line_number':530,'multiline':False]
['text':'        %2 : ...):','line_number':531,'multiline':False]
['text':'    %3 : int = prim:Constant[value=0]()','line_number':532,'multiline':False]
['text':'    %7 : Tensor = prim::VarConcat(%0, %1, %2, %3)','line_number':533,'multiline':False]
['text':'    return (%7)','line_number':534,'multiline':False]
['text':'exactly','line_number':536,'multiline':True]
['text':'exactly','line_number':537,'multiline':True]
['text':'exactly','line_number':538,'multiline':True]
['text':' All the mutations of the list must be removed and the `aten::cat` ops must','line_number':578,'multiline':False]
['text':' be replaced with `prim::VarConcat` ops in the graph. The transformed graph','line_number':579,'multiline':False]
['text':' should look like the following:','line_number':580,'multiline':False]
['text':'','line_number':581,'multiline':False]
['text':'  graph(%0 : ...,','line_number':582,'multiline':False]
['text':'        %1 : ...,','line_number':583,'multiline':False]
['text':'        %2 : ...,','line_number':584,'multiline':False]
['text':'        %3 : ...,','line_number':585,'multiline':False]
['text':'        %4 : ...):','line_number':586,'multiline':False]
['text':'    %10 : int = prim:Constant[value=0]()','line_number':587,'multiline':False]
['text':'    %5 : Tensor = prim::VarConcat(%0, %1, %10)','line_number':588,'multiline':False]
['text':'    %6 : Tensor = prim::VarConcat(%0, %1, %2, %10)','line_number':589,'multiline':False]
['text':'    %7 : Tensor = prim::VarConcat(%0, %1, %2, %3, %10)','line_number':590,'multiline':False]
['text':'    %8 : Tensor = prim::VarConcat(%0, %1, %2, %3, %4, %10)','line_number':591,'multiline':False]
['text':'    return (%5, %6, %7, %8)','line_number':592,'multiline':False]
['text':'exactly','line_number':594,'multiline':True]
['text':'exactly','line_number':595,'multiline':True]
['text':'exactly','line_number':596,'multiline':True]
['text':' After performing:','line_number':635,'multiline':False]
['text':'     * Remove list mutation','line_number':636,'multiline':False]
['text':'     * Use variadic cat','line_number':637,'multiline':False]
['text':'     * Eliminate common inputs','line_number':638,'multiline':False]
['text':' we should have the following graph:','line_number':639,'multiline':False]
['text':'','line_number':640,'multiline':False]
['text':'  graph(%0 : ...,','line_number':641,'multiline':False]
['text':'        %1 : ...,','line_number':642,'multiline':False]
['text':'        %2 : ...):','line_number':643,'multiline':False]
['text':'    %3 : int = prim::Constant[value=0]()','line_number':644,'multiline':False]
['text':'    %10 : Tensor = prim::VarConcat(%0, %1, %2, %3)','line_number':645,'multiline':False]
['text':'    %12 : Tensor = prim::VarConcat(%10, %0, %3) // UPDATED','line_number':646,'multiline':False]
['text':'    %8 : Tensor[] = prim::ListConstruct(%10, %12)','line_number':647,'multiline':False]
['text':'    return (%8)','line_number':648,'multiline':False]
['text':'exactly','line_number':650,'multiline':True]
['text':'exactly','line_number':651,'multiline':True]
['text':'exactly','line_number':652,'multiline':True]
['text':'exactly','line_number':653,'multiline':True]
['text':'exactly','line_number':654,'multiline':True]
['text':' After performing CombineConcats:','line_number':679,'multiline':False]
['text':'  graph(%0 : Tensor):','line_number':680,'multiline':False]
['text':'    %dim : int = prim::Constant[value=0]()','line_number':681,'multiline':False]
['text':'    %input : Tensor[] = prim::ListConstruct(%0, %0, %0)','line_number':682,'multiline':False]
['text':'    %concat : Tensor = aten::cat(%input, %dim)','line_number':683,'multiline':False]
['text':'    return (%concat)','line_number':684,'multiline':False]
['text':'exactly','line_number':686,'multiline':True]
['text':'exactly','line_number':687,'multiline':True]
['text':' After performing CombineConcats:','line_number':714,'multiline':False]
['text':'  graph(%0 : Tensor):','line_number':715,'multiline':False]
['text':'    %dim : int = prim::Constant[value=0]()','line_number':716,'multiline':False]
['text':'    %input : Tensor[] = prim::ListConstruct(%0, %1, %0, %0, %1, %0)','line_number':717,'multiline':False]
['text':'    %concat : Tensor = aten::cat(%input, %dim)','line_number':718,'multiline':False]
['text':'    return (%concat)','line_number':719,'multiline':False]
['text':'exactly','line_number':721,'multiline':True]
['text':'exactly','line_number':722,'multiline':True]
['text':' No modifications due to aten::append','line_number':741,'multiline':False]
['text':' namespace jit','line_number':745,'multiline':False]
['text':' namespace torch','line_number':746,'multiline':False]
