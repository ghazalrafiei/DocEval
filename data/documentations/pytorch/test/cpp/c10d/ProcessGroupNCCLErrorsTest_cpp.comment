['text':' In the constructor of ProcessGroupNCCL. We don't allow the watchdog thread','line_number':149,'multiline':False]
['text':' to run any handling or desync report when the main thread is block wait.','line_number':150,'multiline':False]
['text':' Even if users set handling and turn on desyncDebug flag, they will get','line_number':151,'multiline':False]
['text':' reset. For the ease of unit test, we want the main thread to be block wait,','line_number':152,'multiline':False]
['text':' so we have this hack to manually set the desync debug flag after PG','line_number':153,'multiline':False]
['text':' creation.','line_number':154,'multiline':False]
['text':' Override the heartbeat monitor function to make sure that we capture','line_number':196,'multiline':False]
['text':' the exception in the monitor thread because we cannot try-catch it in','line_number':197,'multiline':False]
['text':' the main thread and we set a flag for the main thread to check.','line_number':198,'multiline':False]
['text':' It's really hard to unit test std::abort. So we override it instead.','line_number':207,'multiline':False]
['text':' Commented this override, we do see process aborted with core dump without','line_number':208,'multiline':False]
['text':' this override.','line_number':209,'multiline':False]
['text':' Override the heartbeat monitor function to set a long timeout to mimic the','line_number':228,'multiline':False]
['text':' stuck in getting debug info.','line_number':229,'multiline':False]
['text':' Enable LOG(INFO) messages.','line_number':255,'multiline':False]
['text':' Now run all reduce with errors.','line_number':292,'multiline':False]
['text':' Verify the work item failed.','line_number':297,'multiline':False]
['text':' Communicators might be aborted here, further operations would fail.','line_number':302,'multiline':False]
['text':' Now run all reduce with errors.','line_number':320,'multiline':False]
['text':' Communicators might be aborted here, further operations would fail.','line_number':325,'multiline':False]
['text':' Now run all reduce with errors.','line_number':342,'multiline':False]
['text':' Should not throw exceptions.','line_number':346,'multiline':False]
['text':' Verify the work item failed.','line_number':350,'multiline':False]
['text':' Communicators might be aborted here, further operations would fail.','line_number':354,'multiline':False]
['text':' Function to read what we wrote to the local disk for validation.','line_number':357,'multiline':False]
['text':' Read the strings from the file','line_number':360,'multiline':False]
['text':' While the file stream is in good state','line_number':361,'multiline':False]
['text':' Extend the nested class outside the parent class','line_number':371,'multiline':False]
['text':' Enable nccl flight recorder.','line_number':408,'multiline':False]
['text':' Set a long watchdog timeout, so that we have enough time to lock the','line_number':411,'multiline':False]
['text':' watchdog and let the heartbeat monitor thread to kick in.','line_number':412,'multiline':False]
['text':' The storer here is very similar to the fallback storer.','line_number':415,'multiline':False]
['text':' The only difference is that we are storing traces also in memory for','line_number':416,'multiline':False]
['text':' validation.','line_number':417,'multiline':False]
['text':' Normal collective case.','line_number':423,'multiline':False]
['text':' Now run all reduce with errors.','line_number':430,'multiline':False]
['text':' Wait long enough before monitor thread throws exceptions.','line_number':433,'multiline':False]
['text':' Check the monitoring thread launched and exception thrown.','line_number':436,'multiline':False]
['text':' Check the traces read from storage match with the original nccl trace.','line_number':444,'multiline':False]
['text':' We cannot capture the exception thrown in watchdog thread without making','line_number':463,'multiline':False]
['text':' lots of changes to the code. So we don't let the watchdog throw','line_number':464,'multiline':False]
['text':' exception.','line_number':465,'multiline':False]
['text':' Set a super short watchdog timeout.','line_number':469,'multiline':False]
['text':' Need to have this check for every test to make sure we only run the test','line_number':489,'multiline':False]
['text':' when there are GPUs available.','line_number':490,'multiline':False]
['text':' Write debug info will lead to watchdog thread to wait for 30 seconds.','line_number':496,'multiline':False]
['text':' And this is hard to override, so we just call it before hand. Otherwise,','line_number':497,'multiline':False]
['text':' we need to set a long heartbeat timeout which will make the test way','line_number':498,'multiline':False]
['text':' slower.','line_number':499,'multiline':False]
['text':' The flag is true shows that the heartbeat monitor thread does not kill','line_number':503,'multiline':False]
['text':' the watchdog thread when it is getting debug info such as desync debug','line_number':504,'multiline':False]
['text':' info.','line_number':505,'multiline':False]
['text':' The flag is false shows that the heartbeat monitor thread does not','line_number':507,'multiline':False]
['text':' trigger process abort if getting debug info and destroy PG is fast.','line_number':508,'multiline':False]
['text':' Communicators might be aborted here, further operations would fail.','line_number':511,'multiline':False]
['text':' Need to have this check for every test to make sure we only run the test','line_number':515,'multiline':False]
['text':' when there are GPUs available.','line_number':516,'multiline':False]
['text':' Need to keep main thread sleep longer so that we can let heartbeat monitor','line_number':521,'multiline':False]
['text':' thread to finish the extra wait and flip the flag.','line_number':522,'multiline':False]
['text':' The flag is false shows that we get stuck in getting debug info such as','line_number':524,'multiline':False]
['text':' desync debug info in the watchdog thread.','line_number':525,'multiline':False]
['text':' The flag is true shows that the heartbeat monitor thread does trigger','line_number':527,'multiline':False]
['text':' process abort if getting debug info gets stuck.','line_number':528,'multiline':False]
['text':' Communicators might be aborted here, further operations would fail.','line_number':531,'multiline':False]
