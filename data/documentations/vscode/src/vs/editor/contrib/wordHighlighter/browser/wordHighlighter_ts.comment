['text':'---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------','line_number':1,'multiline':True]
['text':' import { TextualMultiDocumentHighlightFeature } from 'vs/editor/contrib/wordHighlighter/browser/textualHighlightProvider';','line_number':36,'multiline':False]
['text':' import { registerEditorFeature } from 'vs/editor/common/editorFeatures';','line_number':37,'multiline':False]
['text':' in order of score ask the occurrences provider','line_number':44,'multiline':False]
['text':' until someone response with a good result','line_number':45,'multiline':False]
['text':' (good = none empty array)','line_number':46,'multiline':False]
['text':' in order of score ask the occurrences provider','line_number':63,'multiline':False]
['text':' until someone response with a good result','line_number':64,'multiline':False]
['text':' (good = none empty array)','line_number':65,'multiline':False]
['text':' Even if we are on a different word, if that word is in the decorations ranges, the request is still valid','line_number':126,'multiline':False]
['text':' (Same symbol)','line_number':127,'multiline':False]
['text':' We are changing the position => ignore this event','line_number':298,'multiline':False]
['text':' Early exit if nothing needs to be done!','line_number':303,'multiline':False]
['text':' Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)','line_number':304,'multiline':False]
['text':' if there is a query already, highlight off that query','line_number':338,'multiline':False]
['text':' return if no model','line_number':409,'multiline':False]
['text':' iterate over editors and store models in currentModels','line_number':430,'multiline':False]
['text':' Remove any existing decorations + a possible query, and re - run to update decorations','line_number':457,'multiline':False]
['text':' clear query if focused non-nb editor','line_number':461,'multiline':False]
['text':' remove modelInfo to account for nb cell being disposed','line_number':464,'multiline':False]
['text':' Cancel any renderDecorationsTimer','line_number':471,'multiline':False]
['text':' Cancel any worker request','line_number':477,'multiline':False]
['text':' Invalidate any worker request callback','line_number':483,'multiline':False]
['text':' Remove any existing decorations','line_number':491,'multiline':False]
['text':' Cancel any renderDecorationsTimer','line_number':494,'multiline':False]
['text':' Cancel any worker request','line_number':500,'multiline':False]
['text':' Invalidate any worker request callback','line_number':506,'multiline':False]
['text':' disabled','line_number':515,'multiline':False]
['text':' ignore typing & other','line_number':521,'multiline':False]
['text':' need to check if the model is a notebook cell, should not stop if nb','line_number':522,'multiline':False]
['text':' notebook case','line_number':551,'multiline':False]
['text':' inline case','line_number':565,'multiline':False]
['text':' ? current works when highlighting outside of an inline diff, highlighting in.','line_number':566,'multiline':False]
['text':' ? broken when highlighting within a diff editor. highlighting the main editor does not work','line_number':567,'multiline':False]
['text':' ? editor group service could be useful here','line_number':568,'multiline':False]
['text':' embedded inline chat diff would pass this, allowing highlights','line_number':579,'multiline':False]
['text':'? currentModels.push(diffModel.original);','line_number':580,'multiline':False]
['text':' no matching editors have been found','line_number':584,'multiline':False]
['text':' multi-doc OFF','line_number':588,'multiline':False]
['text':' multi-doc ON','line_number':593,'multiline':False]
['text':' no focus (new nb cell, etc)','line_number':609,'multiline':False]
['text':' no previous query, nothing to highlight','line_number':611,'multiline':False]
['text':' ignore multiline selection','line_number':617,'multiline':False]
['text':' The selection must be inside a word or surround one word at most','line_number':628,'multiline':False]
['text':' no previous query, nothing to highlight','line_number':630,'multiline':False]
['text':' All the effort below is trying to achieve this:','line_number':636,'multiline':False]
['text':' - when cursor is moved to a word, trigger immediately a findOccurrences request','line_number':637,'multiline':False]
['text':' - 250ms later after the last cursor move event, render the occurrences','line_number':638,'multiline':False]
['text':' - no flickering!','line_number':639,'multiline':False]
['text':' There are 4 cases:','line_number':651,'multiline':False]
['text':' a) old workerRequest is valid & completed, renderDecorationsTimer fired','line_number':652,'multiline':False]
['text':' b) old workerRequest is valid & completed, renderDecorationsTimer not fired','line_number':653,'multiline':False]
['text':' c) old workerRequest is valid, but not completed','line_number':654,'multiline':False]
['text':' d) old workerRequest is not valid','line_number':655,'multiline':False]
['text':' For a) no action is needed','line_number':657,'multiline':False]
['text':' For c), member 'lastCursorPositionChangeTime' will be used when installing the timer so no action is needed','line_number':658,'multiline':False]
['text':' case b)','line_number':664,'multiline':False]
['text':' Delay the firing of renderDecorationsTimer by an extra 250 ms','line_number':665,'multiline':False]
['text':' case d)','line_number':671,'multiline':False]
['text':' Stop all previous actions and start fresh','line_number':672,'multiline':False]
['text':' 2 cases where we want to send the word','line_number':680,'multiline':False]
['text':' a) there is no stored query model, but there is a word. This signals the editor that drove the highlight is disposed (cell out of viewport, etc)','line_number':681,'multiline':False]
['text':' b) the queried model is not the current model. This signals that the editor that drove the highlight is still in the viewport, but we are highlighting a different cell','line_number':682,'multiline':False]
['text':' otherwise, we send null in place of the word, and the model and selection are used to compute the word','line_number':683,'multiline':False]
['text':' use this.model','line_number':688,'multiline':False]
['text':' use stored query model + selection','line_number':690,'multiline':False]
['text':' Synchronous','line_number':717,'multiline':False]
['text':' Asynchronous','line_number':721,'multiline':False]
['text':' create new loop, iterate over current editors using this.codeEditorService.listCodeEditors(),','line_number':730,'multiline':False]
['text':' if the URI of that codeEditor is in the map, then add the decorations to the decorations array','line_number':731,'multiline':False]
['text':' then set the decorations for the editor','line_number':732,'multiline':False]
['text':' eager because it uses `saveViewState`/`restoreViewState`','line_number':921,'multiline':False]
['text':' registerEditorFeature(TextualMultiDocumentHighlightFeature);','line_number':925,'multiline':False]
