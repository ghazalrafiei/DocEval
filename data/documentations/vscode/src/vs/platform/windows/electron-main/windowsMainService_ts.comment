['text':'---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------','line_number':1,'multiline':True]
['text':'#region Helper Interfaces','line_number':60,'multiline':False]
['text':'*
	 * By default, resolving a path will check
	 * if the path exists. This can be disabled
	 * with this flag.
	 ','line_number':87,'multiline':True]
['text':'*
	 * Will reject a path if it points to a transient
	 * workspace as indicated by a `transient: true`
	 * property in the workspace file.
	 ','line_number':94,'multiline':True]
['text':'*
	 * If enabled, will resolve the path line/column
	 * aware and properly remove this information
	 * from the resulting file path.
	 ','line_number':101,'multiline':True]
['text':'*
	 * Forces to resolve the provided path as workspace
	 * file instead of opening it as a file.
	 ','line_number':108,'multiline':True]
['text':'*
	 * The remoteAuthority to use if the URL to open is
	 * neither `file` nor `vscode-remote`.
	 ','line_number':114,'multiline':True]
['text':'*
	 * The workspace to open
	 ','line_number':133,'multiline':True]
['text':'*
	 * Whether the path is considered to be transient or not
	 * for example, a transient workspace should not add to
	 * the workspaces history and should never restore.
	 ','line_number':138,'multiline':True]
['text':'*
	 * The backup path to use
	 ','line_number':145,'multiline':True]
['text':'*
	 * The remote authority for the Code instance to open. Undefined if not remote.
	 ','line_number':150,'multiline':True]
['text':'*
	 * Optional label for the recent history
	 ','line_number':155,'multiline':True]
['text':'#endregion','line_number':177,'multiline':False]
['text':' Signal a window is ready after having entered a workspace','line_number':237,'multiline':False]
['text':' Update valid roots in protocol service for extension dev windows','line_number':240,'multiline':False]
['text':' Allow access to extension development path','line_number':246,'multiline':False]
['text':' Allow access to extension tests path','line_number':253,'multiline':False]
['text':' Bring window to front','line_number':273,'multiline':False]
['text':' Handle --wait','line_number':276,'multiline':False]
['text':' Make sure addMode is only enabled if we have an active window','line_number':284,'multiline':False]
['text':' Identify things to open from open config','line_number':298,'multiline':False]
['text':' When run with --add, take the folders that are to be opened as','line_number':304,'multiline':False]
['text':' folders that should be added to the currently active window.','line_number':305,'multiline':False]
['text':' When run with --diff, take the first 2 files to open as files to diff','line_number':324,'multiline':False]
['text':' When run with --merge, take the first 4 files to open as files to merge','line_number':330,'multiline':False]
['text':' When run with --wait, make sure we keep the paths to wait for','line_number':337,'multiline':False]
['text':' [3] is the resulting merge file ','line_number':339,'multiline':True]
['text':' These are windows to restore because of hot-exit or from previous session (only performed once on startup!)','line_number':342,'multiline':False]
['text':' Untitled workspaces are always restored','line_number':345,'multiline':False]
['text':' Empty windows with backups are always restored','line_number':349,'multiline':False]
['text':' Open based on config','line_number':355,'multiline':False]
['text':' Make sure to pass focus to the most relevant of the windows if we open multiple','line_number':360,'multiline':False]
['text':' 1.) focus window we opened files in always with highest priority','line_number':363,'multiline':False]
['text':' Otherwise, find a good window based on open params','line_number':368,'multiline':False]
['text':' 2.) focus last active window if we are not instructed to open any paths','line_number':374,'multiline':False]
['text':' 3.) if instructed to open paths, focus last window which is not restored','line_number':384,'multiline':False]
['text':' skip over restored workspace','line_number':389,'multiline':False]
['text':' skip over restored empty window','line_number':390,'multiline':False]
['text':' 4.) finally, always ensure to have at least last used window focused','line_number':401,'multiline':False]
['text':' Remember in recent document list (unless this opens for extension development)','line_number':408,'multiline':False]
['text':' Also do not add paths when files are opened for diffing or merging, only if opened individually','line_number':409,'multiline':False]
['text':' never add transient workspaces to history ','line_number':415,'multiline':True]
['text':' Handle --wait','line_number':427,'multiline':False]
['text':' If we got started with --wait from the CLI, we need to signal to the outside when the window','line_number':435,'multiline':False]
['text':' used for the edit operation is closed or loaded to a different folder so that the waiting','line_number':436,'multiline':False]
['text':' process can continue. We do this by deleting the waitMarkerFilePath.','line_number':437,'multiline':False]
['text':' ignore - could have been deleted from the window already','line_number':446,'multiline':False]
['text':' Keep track of used windows and remember','line_number':462,'multiline':False]
['text':' if files have been opened in one of them','line_number':463,'multiline':False]
['text':' reset `filesToOpen` since files have been opened','line_number':471,'multiline':False]
['text':' Settings can decide if files/folders open in new window or not','line_number':475,'multiline':False]
['text':' Handle folders to add by looking for the last active workspace (not on initial startup)','line_number':478,'multiline':False]
['text':' Handle files to open/diff/merge or to create when we dont open a folder and we do not restore any','line_number':487,'multiline':False]
['text':' folder/untitled from hot-exit by trying to open them in the window that fits best','line_number':488,'multiline':False]
['text':' Find suitable window or folder path to open files in','line_number':492,'multiline':False]
['text':' [3] is the resulting merge file ','line_number':493,'multiline':True]
['text':' only look at the windows with correct authority','line_number':495,'multiline':False]
['text':' figure out a good window to open the files in if any','line_number':498,'multiline':False]
['text':' with a fallback to the last active window.','line_number':499,'multiline':False]
['text':'','line_number':500,'multiline':False]
['text':' in case `openFilesInNewWindow` is enforced, we skip','line_number':501,'multiline':False]
['text':' this step.','line_number':502,'multiline':False]
['text':' We found a window to open the files in','line_number':514,'multiline':False]
['text':' Window is workspace','line_number':517,'multiline':False]
['text':' Window is single folder','line_number':522,'multiline':False]
['text':' Window is empty','line_number':527,'multiline':False]
['text':' Finally, if no window or folder is found, just open the files in an empty window','line_number':533,'multiline':False]
['text':' Handle workspaces to open (instructed and to restore)','line_number':549,'multiline':False]
['text':' prevent duplicates','line_number':550,'multiline':False]
['text':' Check for existing instances','line_number':553,'multiline':False]
['text':' Do open files','line_number':559,'multiline':False]
['text':' any other folders to open must open in new window then','line_number':562,'multiline':False]
['text':' Open remaining ones','line_number':565,'multiline':False]
['text':' ignore folders that are already open','line_number':568,'multiline':False]
['text':' Do open folder','line_number':574,'multiline':False]
['text':' any other folders to open must open in new window then','line_number':577,'multiline':False]
['text':' Handle folders to open (instructed and to restore)','line_number':581,'multiline':False]
['text':' prevent duplicates','line_number':582,'multiline':False]
['text':' Check for existing instances','line_number':585,'multiline':False]
['text':' Do open files','line_number':591,'multiline':False]
['text':' any other folders to open must open in new window then','line_number':594,'multiline':False]
['text':' Open remaining ones','line_number':597,'multiline':False]
['text':' ignore folders that are already open','line_number':600,'multiline':False]
['text':' Do open folder','line_number':606,'multiline':False]
['text':' any other folders to open must open in new window then','line_number':609,'multiline':False]
['text':' Handle empty to restore','line_number':613,'multiline':False]
['text':' prevent duplicates','line_number':614,'multiline':False]
['text':' any other folders to open must open in new window then','line_number':622,'multiline':False]
['text':' Handle empty to open (only if no other window opened)','line_number':626,'multiline':False]
['text':' any other window to open must open in new window then','line_number':637,'multiline':False]
['text':' make sure window or any of the children has focus','line_number':648,'multiline':False]
['text':' make sure window has focus','line_number':679,'multiline':False]
['text':' fix for https://github.com/microsoft/vscode/issues/97172','line_number':692,'multiline':False]
['text':' fix for https://github.com/microsoft/vscode/issues/49587','line_number':714,'multiline':False]
['text':' Extract paths: from API','line_number':737,'multiline':False]
['text':' Check for force empty','line_number':743,'multiline':False]
['text':' Extract paths: from CLI','line_number':748,'multiline':False]
['text':' add an empty window if we did not have windows to open from command line','line_number':752,'multiline':False]
['text':' Extract paths: from previous session','line_number':758,'multiline':False]
['text':' add an empty window if we did not have windows to restore','line_number':762,'multiline':False]
['text':' Convert multiple folders into workspace (if opened via API or CLI)','line_number':768,'multiline':False]
['text':' This will ensure to open these folders in one window instead of multiple','line_number':769,'multiline':False]
['text':' If we are in `addMode`, we should not do this because in that case all','line_number':770,'multiline':False]
['text':' folders should be added to the existing window.','line_number':771,'multiline':False]
['text':' only if all folder have the same authority','line_number':776,'multiline':False]
['text':' Add workspace and remove folders thereby','line_number':779,'multiline':False]
['text':' Check for `window.startup` setting to include all windows','line_number':786,'multiline':False]
['text':' from the previous session if this is the initial startup and we have','line_number':787,'multiline':False]
['text':' not restored windows already otherwise.','line_number':788,'multiline':False]
['text':' Use `unshift` to ensure any new window to open comes last','line_number':789,'multiline':False]
['text':' for proper focus treatment.','line_number':790,'multiline':False]
['text':' Path exists','line_number':808,'multiline':False]
['text':' Path does not exist: show a warning box','line_number':815,'multiline':False]
['text':' special case diff / merge mode to force open','line_number':840,'multiline':False]
['text':' workspace as file','line_number':841,'multiline':False]
['text':' https://github.com/microsoft/vscode/issues/149731','line_number':842,'multiline':False]
['text':' folder uris','line_number':847,'multiline':False]
['text':' file uris','line_number':862,'multiline':False]
['text':' folder or file paths','line_number':877,'multiline':False]
['text':' none: no window to restore','line_number':912,'multiline':False]
['text':' one: restore last opened workspace/folder or empty window','line_number':916,'multiline':False]
['text':' all: restore all windows','line_number':917,'multiline':False]
['text':' folders: restore last opened folders only','line_number':918,'multiline':False]
['text':' Collect previously opened windows','line_number':924,'multiline':False]
['text':' Workspaces','line_number':935,'multiline':False]
['text':' https://github.com/microsoft/vscode/issues/119695 ','line_number':937,'multiline':True]
['text':' Folders','line_number':943,'multiline':False]
['text':' Empty window, potentially editors open to be restored','line_number':951,'multiline':False]
['text':' always reopen all windows when an update was applied','line_number':967,'multiline':False]
['text':' by default restore all windows','line_number':970,'multiline':False]
['text':' by default restore all windows','line_number':973,'multiline':False]
['text':' handle file:// openables with some extra validation','line_number':982,'multiline':False]
['text':' handle non file:// openables','line_number':992,'multiline':False]
['text':' use remote authority from vscode','line_number':999,'multiline':False]
['text':' normalize URI','line_number':1002,'multiline':False]
['text':' File','line_number':1005,'multiline':False]
['text':' Workspace','line_number':1022,'multiline':False]
['text':' Folder','line_number':1027,'multiline':False]
['text':' Extract line/col information from path','line_number':1045,'multiline':False]
['text':' Ensure the path is normalized and absolute','line_number':1052,'multiline':False]
['text':' File','line_number':1058,'multiline':False]
['text':' Workspace (unless disabled via flag)','line_number':1061,'multiline':False]
['text':' If the workspace is transient and we are to ignore','line_number':1066,'multiline':False]
['text':' transient workspaces, reject it.','line_number':1067,'multiline':False]
['text':' Folder','line_number':1092,'multiline':False]
['text':' Special device: in POSIX environments, we may get /dev/null passed','line_number':1101,'multiline':False]
['text':' in (for example git uses it to signal one side of a diff does not','line_number':1102,'multiline':False]
['text':' exist). In that special case, treat it like a file to support this','line_number':1103,'multiline':False]
['text':' scenario ()','line_number':1104,'multiline':False]
['text':' since file does not seem to exist anymore, remove from recent','line_number':1120,'multiline':False]
['text':' assume this is a file that does not yet exist','line_number':1123,'multiline':False]
['text':' Due to https://github.com/microsoft/vscode/issues/195436, we can only','line_number':1156,'multiline':False]
['text':' update settings from within a window. But we do not know if a window','line_number':1157,'multiline':False]
['text':' is about to open or can already handle the request, so we have to send','line_number':1158,'multiline':False]
['text':' to any current window and any newly opening window.','line_number':1159,'multiline':False]
['text':' do not handle UNC error again ','line_number':1165,'multiline':True]
['text':' keep showing the dialog until decision (https://github.com/microsoft/vscode/issues/181956)','line_number':1171,'multiline':False]
['text':' Extract line/col information from path','line_number':1181,'multiline':False]
['text':' make absolute','line_number':1189,'multiline':False]
['text':' guess the file type:','line_number':1200,'multiline':False]
['text':' - if it ends with a slash it's a folder','line_number':1201,'multiline':False]
['text':' - if in goto line mode or if it has a file extension, it's a file or a workspace','line_number':1202,'multiline':False]
['text':' - by defaults it's a folder','line_number':1203,'multiline':False]
['text':' file name ends with .code-workspace','line_number':1206,'multiline':False]
['text':' file name starts with a dot or has an file extension','line_number':1221,'multiline':False]
['text':' let the user settings override how folders are open in a new window or same window unless we are forced','line_number':1238,'multiline':False]
['text':' default ','line_number':1240,'multiline':True]
['text':' default ','line_number':1241,'multiline':True]
['text':' let the user settings override how files are open in a new window or same window unless we are forced (not for extension development though)','line_number':1248,'multiline':False]
['text':' macOS: by default we open files in a new window if this is triggered via DOCK context','line_number':1254,'multiline':False]
['text':' Linux/Windows: by default we open files in the new window unless triggered via DIALOG / MENU context','line_number':1261,'multiline':False]
['text':' or from the integrated terminal where we assume the user prefers to open in the current window','line_number':1262,'multiline':False]
['text':' finally check for overrides of default','line_number':1269,'multiline':False]
['text':' Reload an existing extension development host window on the same path','line_number':1280,'multiline':False]
['text':' We currently do not allow more than one extension development window','line_number':1281,'multiline':False]
['text':' on the same extension path.','line_number':1282,'multiline':False]
['text':' make sure it gets focus and is restored','line_number':1286,'multiline':False]
['text':' Fill in previously opened workspace unless an explicit path is provided and we are not unit testing','line_number':1295,'multiline':False]
['text':' Make sure that we do not try to open:','line_number':1333,'multiline':False]
['text':' - a workspace or folder that is already opened','line_number':1334,'multiline':False]
['text':' - a workspace or file that has a different authority as the extension development.','line_number':1335,'multiline':False]
['text':' Open it','line_number':1368,'multiline':False]
['text':' Build up the window configuration from provided options, config and environment','line_number':1399,'multiline':False]
['text':' Inherit CLI arguments from environment and/or','line_number':1402,'multiline':False]
['text':' the specific properties from this launch if provided','line_number':1403,'multiline':False]
['text':' Will be filled in by the window once loaded later','line_number':1410,'multiline':False]
['text':' If we know the backup folder upfront (for empty windows to restore), we can set it','line_number':1417,'multiline':False]
['text':' directly here which helps for restoring UI state associated with that window.','line_number':1418,'multiline':False]
['text':' For all other cases we first call into registerEmptyWindowBackup() to set it before','line_number':1419,'multiline':False]
['text':' loading the window.','line_number':1420,'multiline':False]
['text':' Set to default profile first and resolve and update the profile','line_number':1426,'multiline':False]
['text':' only after the workspace-backup is registered.','line_number':1427,'multiline':False]
['text':' Because, workspace identifier of an empty window is known only then.','line_number':1428,'multiline':False]
['text':' New window','line_number':1466,'multiline':False]
['text':' Create the window','line_number':1470,'multiline':False]
['text':' Add as window tab if configured (macOS only)','line_number':1479,'multiline':False]
['text':' Add to our list of windows','line_number':1485,'multiline':False]
['text':' Indicate new window via event','line_number':1488,'multiline':False]
['text':' Indicate number change via event','line_number':1491,'multiline':False]
['text':' Window Events','line_number':1494,'multiline':False]
['text':' remove built in listener so we can handle this on our own','line_number':1504,'multiline':False]
['text':' Lifecycle','line_number':1507,'multiline':False]
['text':' Existing window','line_number':1511,'multiline':False]
['text':' Some configuration things get inherited if the window is being reused and we are','line_number':1514,'multiline':False]
['text':' in extension development host mode. These options are all development related.','line_number':1515,'multiline':False]
['text':' Update window identifier and session now','line_number':1535,'multiline':False]
['text':' that we have the window object in hand.','line_number':1536,'multiline':False]
['text':' If the window was already loaded, make sure to unload it','line_number':1539,'multiline':False]
['text':' first and only load the new configuration if that was','line_number':1540,'multiline':False]
['text':' not vetoed','line_number':1541,'multiline':False]
['text':' Register window for backups unless the window','line_number':1557,'multiline':False]
['text':' is for extension development, where we do not','line_number':1558,'multiline':False]
['text':' keep any backups.','line_number':1559,'multiline':False]
['text':' Empty windows are special in that they provide no workspace on','line_number':1574,'multiline':False]
['text':' their configuration. To properly register them with the backup','line_number':1575,'multiline':False]
['text':' service, we either use the provided associated `backupFolder`','line_number':1576,'multiline':False]
['text':' in case we restore a previously opened empty window or we have','line_number':1577,'multiline':False]
['text':' to generate a new empty window workspace identifier to be used','line_number':1578,'multiline':False]
['text':' as `backupFolder`.','line_number':1579,'multiline':False]
['text':' Associate the configured profile to the workspace','line_number':1595,'multiline':False]
['text':' unless the window is for extension development,','line_number':1596,'multiline':False]
['text':' where we do not persist the associations','line_number':1597,'multiline':False]
['text':' Load it','line_number':1602,'multiline':False]
['text':' Remove from our list so that Electron can clean it up','line_number':1620,'multiline':False]
['text':' Emit','line_number':1623,'multiline':False]
['text':' Clean up','line_number':1626,'multiline':False]
['text':' Remove from our list so that Electron can clean it up','line_number':1632,'multiline':False]
['text':' Emit','line_number':1635,'multiline':False]
['text':' do not send if we are instructed to ignore it','line_number':1675,'multiline':False]
