['text':'---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------','line_number':1,'multiline':True]
['text':'*
	 * Signals when the watcher is ready to watch.
	 ','line_number':28,'multiline':True]
['text':'*
	 * The watch request associated to the watcher.
	 ','line_number':33,'multiline':True]
['text':'*
	 * How often this watcher has been restarted in case of an unexpected
	 * shutdown.
	 ','line_number':38,'multiline':True]
['text':'*
	 * The cancellation token associated with the lifecycle of the watcher.
	 ','line_number':44,'multiline':True]
['text':'*
	 * An event aggregator to coalesce events and reduce duplicates.
	 ','line_number':49,'multiline':True]
['text':'*
	 * Stops and disposes the watcher. This operation is async to await
	 * unsubscribe call in Parcel.
	 ','line_number':54,'multiline':True]
['text':' A delay for collecting file changes from Parcel','line_number':84,'multiline':False]
['text':' before collecting them for coalescing and emitting.','line_number':85,'multiline':False]
['text':' Parcel internally uses 50ms as delay, so we use 75ms,','line_number':86,'multiline':False]
['text':' to schedule sufficiently after Parcel.','line_number':87,'multiline':False]
['text':'','line_number':88,'multiline':False]
['text':' Note: since Parcel 2.0.7, the very first event is','line_number':89,'multiline':False]
['text':' emitted without delay if no events occured over a','line_number':90,'multiline':False]
['text':' duration of 500ms. But we always want to aggregate','line_number':91,'multiline':False]
['text':' events to apply our coleasing logic.','line_number':92,'multiline':False]
['text':'','line_number':93,'multiline':False]
['text':' Reduce likelyhood of spam from file events via throttling.','line_number':96,'multiline':False]
['text':' (https://github.com/microsoft/vscode/issues/124723)','line_number':97,'multiline':False]
['text':' only process up to 500 changes at once before...','line_number':100,'multiline':False]
['text':' ...resting for 200ms until we process events again...','line_number':101,'multiline':False]
['text':' ...but never buffering more than 30000 events in memory','line_number':102,'multiline':False]
['text':' Error handling on process','line_number':118,'multiline':False]
['text':' Figure out duplicates to remove from the requests','line_number':125,'multiline':False]
['text':' Gather paths that we should start watching','line_number':128,'multiline':False]
['text':' not yet watching that path','line_number':132,'multiline':False]
['text':' Re-watch path if excludes/includes have changed or polling interval','line_number':135,'multiline':False]
['text':' Gather paths that we should stop watching','line_number':139,'multiline':False]
['text':' Logging','line_number':150,'multiline':False]
['text':' Stop watching as instructed','line_number':160,'multiline':False]
['text':' Start watching as instructed','line_number':165,'multiline':False]
['text':' Remember as watcher instance','line_number':182,'multiline':False]
['text':' Path checks for symbolic links / wrong casing','line_number':201,'multiline':False]
['text':' Warm up include patterns for usage','line_number':204,'multiline':False]
['text':' We already ran before, check for events since','line_number':218,'multiline':False]
['text':' Handle & emit events','line_number':226,'multiline':False]
['text':' Store a snapshot of files to the snapshot file','line_number':230,'multiline':False]
['text':' Signal we are ready now when the first snapshot was written','line_number':233,'multiline':False]
['text':' Schedule again at the next interval','line_number':242,'multiline':False]
['text':' Remember as watcher instance','line_number':253,'multiline':False]
['text':' Path checks for symbolic links / wrong casing','line_number':272,'multiline':False]
['text':' Warm up include patterns for usage','line_number':275,'multiline':False]
['text':' return early when disposed','line_number':280,'multiline':False]
['text':' In any case of an error, treat this like a unhandled exception','line_number':283,'multiline':False]
['text':' that might require the watcher to restart. We do not really know','line_number':284,'multiline':False]
['text':' the state of parcel at this point and as such will try to restart','line_number':285,'multiline':False]
['text':' up to our maximum of restarts.','line_number':286,'multiline':False]
['text':' Handle & emit events','line_number':291,'multiline':False]
['text':' Normalize events: handle NFC normalization and symlinks','line_number':312,'multiline':False]
['text':' It is important to do this before checking for includes','line_number':313,'multiline':False]
['text':' to check on the original path.','line_number':314,'multiline':False]
['text':' Check for includes','line_number':317,'multiline':False]
['text':' Add to event aggregator for later processing','line_number':320,'multiline':False]
['text':' Apply include filter if any','line_number':335,'multiline':False]
['text':' Coalesce events: merge events of same kind','line_number':350,'multiline':False]
['text':' Filter events: check for specific events we want to exclude','line_number':353,'multiline':False]
['text':' Broadcast to clients','line_number':356,'multiline':False]
['text':' Handle root path deletes','line_number':359,'multiline':False]
['text':' Logging','line_number':370,'multiline':False]
['text':' Broadcast to clients via throttler','line_number':378,'multiline':False]
['text':' Logging','line_number':381,'multiline':False]
['text':' First check for symbolic link','line_number':398,'multiline':False]
['text':' Second check for casing difference','line_number':401,'multiline':False]
['text':' Note: this will be a no-op on Linux platforms','line_number':402,'multiline':False]
['text':' Correct watch path as needed','line_number':407,'multiline':False]
['text':' ignore','line_number':415,'multiline':False]
['text':' Mac uses NFD unicode form on disk, but we want NFC','line_number':424,'multiline':False]
['text':' Workaround for https://github.com/parcel-bundler/watcher/issues/68','line_number':429,'multiline':False]
['text':' where watching root drive letter adds extra backslashes.','line_number':430,'multiline':False]
['text':' for ex. c:, C:\','line_number':432,'multiline':False]
['text':' Convert paths back to original form in case it differs','line_number':437,'multiline':False]
['text':' Explicitly exclude changes to root if we have any','line_number':451,'multiline':False]
['text':' to avoid VS Code closing all opened editors which','line_number':452,'multiline':False]
['text':' can happen e.g. in case of network connectivity','line_number':453,'multiline':False]
['text':' issues','line_number':454,'multiline':False]
['text':' (https://github.com/microsoft/vscode/issues/136673)','line_number':455,'multiline':False]
['text':' return early when disposed','line_number':473,'multiline':False]
['text':' Watcher path came back! Restart watching...','line_number':476,'multiline':False]
['text':' Stop watching that parent folder','line_number':481,'multiline':False]
['text':' Restart the file watching','line_number':484,'multiline':False]
['text':' Make sure to stop watching when the watcher is disposed','line_number':492,'multiline':False]
['text':' Specially handle ENOSPC errors that can happen when','line_number':500,'multiline':False]
['text':' the watcher consumes so many file descriptors that','line_number':501,'multiline':False]
['text':' we are running into a limit. We only want to warn','line_number':502,'multiline':False]
['text':' once in this case to avoid log spam.','line_number':503,'multiline':False]
['text':' See https://github.com/microsoft/vscode/issues/7950','line_number':504,'multiline':False]
['text':' Any other error is unexpected and we should try to','line_number':513,'multiline':False]
['text':' restart the watcher as a result to get into healthy','line_number':514,'multiline':False]
['text':' state again if possible and if not attempted too much','line_number':515,'multiline':False]
['text':' Restart watcher delayed to accomodate for','line_number':533,'multiline':False]
['text':' changes on disk that have triggered the','line_number':534,'multiline':False]
['text':' need for a restart in the first place.','line_number':535,'multiline':False]
['text':' return early when disposed','line_number':538,'multiline':False]
['text':' Await the watcher having stopped, as this is','line_number':541,'multiline':False]
['text':' needed to properly re-watch the same path','line_number':542,'multiline':False]
['text':' Start watcher again counting the restarts','line_number':545,'multiline':False]
['text':' Sort requests by path length to have shortest first','line_number':574,'multiline':False]
['text':' to have a way to prevent children to be watched if','line_number':575,'multiline':False]
['text':' parents exist.','line_number':576,'multiline':False]
['text':' Map request paths to correlation and ignore identical paths','line_number':579,'multiline':False]
['text':' correlation ','line_number':580,'multiline':True]
['text':' path is ignored entirely (via `**` glob exclude)','line_number':583,'multiline':False]
['text':' adjust for case sensitivity','line_number':586,'multiline':False]
['text':' Only consider requests for watching that are not','line_number':601,'multiline':False]
['text':' a child of an existing request path to prevent','line_number':602,'multiline':False]
['text':' duplication. In addition, drop any request where','line_number':603,'multiline':False]
['text':' everything is excluded (via `**` glob).','line_number':604,'multiline':False]
['text':'','line_number':605,'multiline':False]
['text':' However, allow explicit requests to watch folders','line_number':606,'multiline':False]
['text':' that are symbolic links because the Parcel watcher','line_number':607,'multiline':False]
['text':' does not allow to recursively watch symbolic links.','line_number':608,'multiline':False]
['text':' Check for overlapping requests','line_number':614,'multiline':False]
['text':' Check for invalid paths','line_number':630,'multiline':False]
