['text':' Copyright 2015 The Bazel Authors. All rights reserved.','line_number':1,'multiline':False]
['text':'','line_number':2,'multiline':False]
['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':3,'multiline':False]
['text':' you may not use this file except in compliance with the License.','line_number':4,'multiline':False]
['text':' You may obtain a copy of the License at','line_number':5,'multiline':False]
['text':'','line_number':6,'multiline':False]
['text':'    http://www.apache.org/licenses/LICENSE-2.0','line_number':7,'multiline':False]
['text':'','line_number':8,'multiline':False]
['text':' Unless required by applicable law or agreed to in writing, software','line_number':9,'multiline':False]
['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':10,'multiline':False]
['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':11,'multiline':False]
['text':' See the License for the specific language governing permissions and','line_number':12,'multiline':False]
['text':' limitations under the License.','line_number':13,'multiline':False]
['text':'','line_number':14,'multiline':False]
['text':' classfile.cc -- classfile parsing and stripping.','line_number':15,'multiline':False]
['text':'','line_number':16,'multiline':False]
['text':' TODO(adonovan) don't pass pointers by reference; this is not','line_number':18,'multiline':False]
['text':' compatible with Google C++ style.','line_number':19,'multiline':False]
['text':' See README.txt for details.','line_number':21,'multiline':False]
['text':'','line_number':22,'multiline':False]
['text':' For definition of JVM class file format, see:','line_number':23,'multiline':False]
['text':' Java SE 8 Edition:','line_number':24,'multiline':False]
['text':' http://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4','line_number':25,'multiline':False]
['text':' for PRIx32','line_number':29,'multiline':False]
['text':' Converts a value to string.','line_number':43,'multiline':False]
['text':' Workaround for mingw where std::to_string is not implemented.','line_number':44,'multiline':False]
['text':' See https://gcc.gnu.org/bugzilla/show_bug.cgi?id=52015.','line_number':45,'multiline':False]
['text':' namespace','line_number':52,'multiline':False]
['text':' See Table 4.4 in JVM 17 Spec.','line_number':56,'multiline':False]
['text':' See Tables 4.1, 4.4, 4.5 in JVM Spec.','line_number':75,'multiline':False]
['text':' See Table 4.7.20-A in Java 8 JVM Spec.','line_number':91,'multiline':False]
['text':' Targets for type parameter declarations (ElementType.TYPE_PARAMETER):','line_number':93,'multiline':False]
['text':' Targets for type uses that may be externally visible in classes and members','line_number':97,'multiline':False]
['text':' (ElementType.TYPE_USE):','line_number':98,'multiline':False]
['text':' TARGET_TYPE >= 0x40 is reserved for type uses that occur only within code','line_number':108,'multiline':False]
['text':' blocks. Ijar doesn't need to know about these.','line_number':109,'multiline':False]
['text':' TODO(adonovan) these globals are unfortunate','line_number':114,'multiline':False]
['text':' input constant pool','line_number':115,'multiline':False]
['text':' output constant_pool','line_number':116,'multiline':False]
['text':' Returns the Constant object, given an index into the input constant pool.','line_number':120,'multiline':False]
['text':' Note: constant(0) == NULL; this invariant is exploited by the','line_number':121,'multiline':False]
['text':' InnerClassesAttribute, inter alia.','line_number':122,'multiline':False]
['text':'*********************************************************************
 *                                                                    *
 *                             Constants                              *
 *                                                                    *
 *********************************************************************','line_number':131,'multiline':True]
['text':' See sec.4.4 of JVM spec.','line_number':137,'multiline':False]
['text':' For UTF-8 string constants, returns the encoded string.','line_number':146,'multiline':False]
['text':' Otherwise, returns an undefined string value suitable for debugging.','line_number':147,'multiline':False]
['text':' Called by slot() when a constant has been identified as required','line_number':152,'multiline':False]
['text':' in the output classfile's constant pool.  This is a hook allowing','line_number':153,'multiline':False]
['text':' constants to register their dependency on other constants, by','line_number':154,'multiline':False]
['text':' calling slot() on them in turn.','line_number':155,'multiline':False]
['text':' Returns the index of this constant in the output class's constant','line_number':162,'multiline':False]
['text':' pool, assigning a slot if not already done.','line_number':163,'multiline':False]
['text':' BugBot's "narrowing" warning','line_number':167,'multiline':False]
['text':' is bogus.  The number of','line_number':168,'multiline':False]
['text':' output constants can't exceed','line_number':169,'multiline':False]
['text':' the number of input constants.','line_number':170,'multiline':False]
['text':' zero => "this constant is unreachable garbage"','line_number':183,'multiline':False]
['text':' Extracts class names from a signature and puts them into the global','line_number':187,'multiline':False]
['text':' variable used_class_names.','line_number':188,'multiline':False]
['text':'','line_number':189,'multiline':False]
['text':' desc: the descriptor class names should be extracted from.','line_number':190,'multiline':False]
['text':' p: the position where the extraction should tart.','line_number':191,'multiline':False]
['text':' See sec.4.4.1 of JVM spec.','line_number':194,'multiline':False]
['text':' See sec.4.4.2 of JVM spec.','line_number':215,'multiline':False]
['text':' See sec.4.4.3 of JVM spec.','line_number':245,'multiline':False]
['text':' See sec.4.4.4 of JVM spec.','line_number':266,'multiline':False]
['text':' See sec.4.4.5 of JVM spec.','line_number':283,'multiline':False]
['text':' See sec.4.4.6 of JVM spec.','line_number':301,'multiline':False]
['text':' See sec.4.4.7 of JVM spec.','line_number':329,'multiline':False]
['text':' See sec.4.4.8 of JVM spec.','line_number':351,'multiline':False]
['text':' See sec.4.4.9 of JVM spec.','line_number':374,'multiline':False]
['text':' See sec.4.4.10 of JVM spec.','line_number':393,'multiline':False]
['text':'*********************************************************************
 *                                                                    *
 *                             Attributes                             *
 *                                                                    *
 *********************************************************************','line_number':437,'multiline':True]
['text':' See sec.4.7 of JVM spec.','line_number':443,'multiline':False]
['text':' See sec.4.7.5 of JVM spec.','line_number':478,'multiline':False]
['text':' See sec.4.7.6 of JVM spec.','line_number':502,'multiline':False]
['text':' We keep an entry if the constant referring to the inner class is already','line_number':537,'multiline':False]
['text':' kept. Then we mark its outer class and its class name as kept, too, then','line_number':538,'multiline':False]
['text':' iterate until a fixed point is reached.','line_number':539,'multiline':False]
['text':' JVMS 4.7.6: inner_name_index is zero iff the class is anonymous','line_number':552,'multiline':False]
['text':' JVMS 4.7.6: outer_class_info_index is zero for top-level classes','line_number':558,'multiline':False]
['text':' See sec.4.7.7 of JVM spec.','line_number':595,'multiline':False]
['text':' We preserve EnclosingMethod attributes to be able to identify local and','line_number':596,'multiline':False]
['text':' anonymous classes. These classes will be stripped of most content, as they','line_number':597,'multiline':False]
['text':' represent implementation details that shoudn't leak into the ijars. Omitting','line_number':598,'multiline':False]
['text':' EnclosingMethod attributes can lead to type-checking failures in the presence','line_number':599,'multiline':False]
['text':' of generics (see b/9070939).','line_number':600,'multiline':False]
['text':' See sec.4.7.16.1 of JVM spec.','line_number':622,'multiline':False]
['text':' Used by AnnotationDefault and other attributes.','line_number':623,'multiline':False]
['text':' See sec.4.7.16 of JVM spec.','line_number':712,'multiline':False]
['text':' See sec 4.7.20 of Java 8 JVM Spec','line_number':755,'multiline':False]
['text':'','line_number':756,'multiline':False]
['text':' Each entry in the annotations table represents a single run-time visible','line_number':757,'multiline':False]
['text':' annotation on a type used in a declaration or expression. The type_annotation','line_number':758,'multiline':False]
['text':' structure has the following format:','line_number':759,'multiline':False]
['text':'','line_number':760,'multiline':False]
['text':' type_annotation {','line_number':761,'multiline':False]
['text':'   u1 target_type;','line_number':762,'multiline':False]
['text':'   union {','line_number':763,'multiline':False]
['text':'     type_parameter_target;','line_number':764,'multiline':False]
['text':'     supertype_target;','line_number':765,'multiline':False]
['text':'     type_parameter_bound_target;','line_number':766,'multiline':False]
['text':'     empty_target;','line_number':767,'multiline':False]
['text':'     method_formal_parameter_target;','line_number':768,'multiline':False]
['text':'     throws_target;','line_number':769,'multiline':False]
['text':'     localvar_target;','line_number':770,'multiline':False]
['text':'     catch_target;','line_number':771,'multiline':False]
['text':'     offset_target;','line_number':772,'multiline':False]
['text':'     type_argument_target;','line_number':773,'multiline':False]
['text':'   } target_info;','line_number':774,'multiline':False]
['text':'   type_path target_path;','line_number':775,'multiline':False]
['text':'   u2        type_index;','line_number':776,'multiline':False]
['text':'   u2        num_element_value_pairs;','line_number':777,'multiline':False]
['text':'   {','line_number':778,'multiline':False]
['text':'     u2            element_name_index;','line_number':779,'multiline':False]
['text':'     element_value value;','line_number':780,'multiline':False]
['text':'   }','line_number':781,'multiline':False]
['text':'   element_value_pairs[num_element_value_pairs];','line_number':782,'multiline':False]
['text':' }','line_number':783,'multiline':False]
['text':'','line_number':784,'multiline':False]
['text':'p','line_number':857,'multiline':True]
['text':'p','line_number':858,'multiline':True]
['text':' See sec.4.7.20 of JVM spec.','line_number':984,'multiline':False]
['text':' We preserve AnnotationDefault attributes because they are required','line_number':985,'multiline':False]
['text':' in order to make use of an annotation in new code.','line_number':986,'multiline':False]
['text':' See sec.4.7.2 of JVM spec.','line_number':1012,'multiline':False]
['text':' We preserve ConstantValue attributes because they are required for','line_number':1013,'multiline':False]
['text':' compile-time constant propagation.','line_number':1014,'multiline':False]
['text':' See sec.4.7.9 of JVM spec.','line_number':1032,'multiline':False]
['text':' We preserve Signature attributes because they are required by the','line_number':1033,'multiline':False]
['text':' compiler for type-checking of generics.','line_number':1034,'multiline':False]
['text':' See sec.4.7.15 of JVM spec.','line_number':1057,'multiline':False]
['text':' We preserve Deprecated attributes because they are required by the','line_number':1058,'multiline':False]
['text':' compiler to generate warning messages.','line_number':1059,'multiline':False]
['text':'p','line_number':1061,'multiline':True]
['text':' See sec.4.7.16-17 of JVM spec v3.  Includes RuntimeVisible and','line_number':1073,'multiline':False]
['text':' RuntimeInvisible.','line_number':1074,'multiline':False]
['text':'','line_number':1075,'multiline':False]
['text':' We preserve all annotations.','line_number':1076,'multiline':False]
['text':' backpatch length','line_number':1117,'multiline':False]
['text':' See sec.4.7.18-19 of JVM spec.  Includes RuntimeVisible and','line_number':1123,'multiline':False]
['text':' RuntimeInvisible.','line_number':1124,'multiline':False]
['text':'','line_number':1125,'multiline':False]
['text':' We preserve all annotations.','line_number':1126,'multiline':False]
['text':' backpatch length','line_number':1166,'multiline':False]
['text':' See sec.4.7.20 of Java 8 JVM spec. Includes RuntimeVisibleTypeAnnotations','line_number':1172,'multiline':False]
['text':' and RuntimeInvisibleTypeAnnotations.','line_number':1173,'multiline':False]
['text':'attribute_length','line_number':1176,'multiline':True]
['text':' backpatch length','line_number':1200,'multiline':False]
['text':' See JVMS §4.7.24','line_number':1206,'multiline':False]
['text':'attribute_length','line_number':1209,'multiline':True]
['text':' backpatch length','line_number':1231,'multiline':False]
['text':' See JVMS §4.7.28','line_number':1242,'multiline':False]
['text':'attribute_length','line_number':1245,'multiline':True]
['text':' See JVMS §4.7.29','line_number':1260,'multiline':False]
['text':'attribute_length','line_number':1263,'multiline':True]
['text':' See JVMS §4.7.30','line_number':1296,'multiline':False]
['text':' See JVMS §4.7.31','line_number':1345,'multiline':False]
['text':'*********************************************************************
 *                                                                    *
 *                             ClassFile                              *
 *                                                                    *
 *********************************************************************','line_number':1389,'multiline':True]
['text':' A field or method.','line_number':1395,'multiline':False]
['text':' See sec.4.5 and 4.6 of JVM spec.','line_number':1396,'multiline':False]
['text':' See sec.4.1 of JVM spec.','line_number':1419,'multiline':False]
['text':' Header:','line_number':1424,'multiline':False]
['text':' Body:','line_number':1429,'multiline':False]
['text':' Constants do not need to be deleted; they are owned by the constant pool.','line_number':1446,'multiline':False]
['text':' NB: NULLs appear after long/double.','line_number':1464,'multiline':False]
['text':' Make the inner classes attribute the last, so that it can know which','line_number':1489,'multiline':False]
['text':' constants were needed','line_number':1490,'multiline':False]
['text':' drop these attributes','line_number':1538,'multiline':False]
['text':' TODO(bazel-team): omit private inner classes','line_number':1548,'multiline':False]
['text':' These are opaque blobs, so can be handled with a general','line_number':1565,'multiline':False]
['text':' attribute handler','line_number':1566,'multiline':False]
['text':' Skip over unknown attributes with a warning.  The JVM spec','line_number':1589,'multiline':False]
['text':' says this is ok, so long as we handle the mandatory attributes.','line_number':1590,'multiline':False]
['text':' Don't even warn for the D8 desugar SynthesizedClass attribute. It is','line_number':1591,'multiline':False]
['text':' not relevant for ijar.','line_number':1592,'multiline':False]
['text':' See sec.4.4 of JVM spec.','line_number':1619,'multiline':False]
['text':' dummy first item','line_number':1623,'multiline':False]
['text':' Longs and doubles occupy two constant pool slots.','line_number':1682,'multiline':False]
['text':' ("In retrospect, making 8-byte constants take two "constant','line_number':1683,'multiline':False]
['text':' pool entries was a poor choice." --JVM Spec.)','line_number':1684,'multiline':False]
['text':' JVMS 4.7.6: a class must has EnclosingMethod attribute iff it','line_number':1729,'multiline':False]
['text':' represents a local class or an anonymous class','line_number':1730,'multiline':False]
['text':' drop private fields','line_number':1790,'multiline':False]
['text':' drop class initializers','line_number':1800,'multiline':False]
['text':' drop private methods','line_number':1804,'multiline':False]
['text':' drop package-private non-bridge synthetic methods, e.g. synthetic','line_number':1809,'multiline':False]
['text':' constructors used to instantiate private nested classes within their','line_number':1810,'multiline':False]
['text':' declaring compilation unit','line_number':1811,'multiline':False]
['text':' In theory, '/' is also reserved, but it's okay if we just parse package','line_number':1822,'multiline':False]
['text':' identifiers as part of the class name. Note that signatures are UTF-8, but','line_number':1823,'multiline':False]
['text':' this works just as well as in plain ASCII.','line_number':1824,'multiline':False]
['text':' These functions form a crude recursive descent parser for descriptors and','line_number':1837,'multiline':False]
['text':' signatures in class files (see JVM spec 4.3).','line_number':1838,'multiline':False]
['text':'','line_number':1839,'multiline':False]
['text':' This parser is a bit more liberal than the spec, but this should be fine,','line_number':1840,'multiline':False]
['text':' because it accepts all valid class files and croaks only on invalid ones.','line_number':1841,'multiline':False]
['text':' We have to write the body out before the header in order to reference','line_number':1985,'multiline':False]
['text':' the essential constants and populate the output constant pool:','line_number':1986,'multiline':False]
['text':' advances q','line_number':1989,'multiline':False]
['text':' advances p','line_number':1992,'multiline':False]
['text':' Class is invalid or kept. Simply copy it to the output and call it a day.','line_number':2001,'multiline':False]
['text':' Constant pool item zero is a dummy entry.  Setting it marks the','line_number':2006,'multiline':False]
['text':' beginning of the output phase; calls to Constant::slot() will','line_number':2007,'multiline':False]
['text':' fail if called prior to this.','line_number':2008,'multiline':False]
['text':' Now clean up all the mess we left behind.','line_number':2015,'multiline':False]
['text':' namespace devtools_ijar','line_number':2026,'multiline':False]
