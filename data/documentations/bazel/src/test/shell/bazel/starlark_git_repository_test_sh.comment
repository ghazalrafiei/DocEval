['text':'!/bin/bash','line_number':1,'multiline':False]
['text':'','line_number':2,'multiline':False]
['text':' Copyright 2015 The Bazel Authors. All rights reserved.','line_number':3,'multiline':False]
['text':'','line_number':4,'multiline':False]
['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':5,'multiline':False]
['text':' you may not use this file except in compliance with the License.','line_number':6,'multiline':False]
['text':' You may obtain a copy of the License at','line_number':7,'multiline':False]
['text':'','line_number':8,'multiline':False]
['text':'    http://www.apache.org/licenses/LICENSE-2.0','line_number':9,'multiline':False]
['text':'','line_number':10,'multiline':False]
['text':' Unless required by applicable law or agreed to in writing, software','line_number':11,'multiline':False]
['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':12,'multiline':False]
['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':13,'multiline':False]
['text':' See the License for the specific language governing permissions and','line_number':14,'multiline':False]
['text':' limitations under the License.','line_number':15,'multiline':False]
['text':'','line_number':16,'multiline':False]
['text':' Test git_repository and new_git_repository workspace rules.','line_number':17,'multiline':False]
['text':'','line_number':18,'multiline':False]
['text':' --- begin runfiles.bash initialization ---','line_number':21,'multiline':False]
['text':' --- end runfiles.bash initialization ---','line_number':40,'multiline':False]
['text':' `uname` returns the current platform, e.g "MSYS_NT-10.0" or "Linux".','line_number':45,'multiline':False]
['text':' `tr` converts all upper case letters to lower case.','line_number':46,'multiline':False]
['text':' `case` matches the result if the `uname | tr` expression to string prefixes','line_number':47,'multiline':False]
['text':' that use the same wildcards as names do in Bash, i.e. "msys*" matches strings','line_number':48,'multiline':False]
['text':' starting with "msys", and "*" matches everything (it's the default case).','line_number':49,'multiline':False]
['text':' As of 2019-01-15, Bazel on Windows only supports MSYS Bash.','line_number':52,'multiline':False]
['text':' Enable symlink runfiles tree to make bazel run work','line_number':63,'multiline':False]
['text':' Global test setup.','line_number':67,'multiline':False]
['text':'','line_number':68,'multiline':False]
['text':' Unpacks the test Git repositories in the test temporary directory.','line_number':69,'multiline':False]
['text':' Fix environment variables for a hermetic use of git.','line_number':88,'multiline':False]
['text':' Test cloning a Git repository using the git_repository rule.','line_number':99,'multiline':False]
['text':'','line_number':100,'multiline':False]
['text':' This test uses the pluto Git repository at tag 1-build, which contains the','line_number':101,'multiline':False]
['text':' following files:','line_number':102,'multiline':False]
['text':'','line_number':103,'multiline':False]
['text':' pluto/','line_number':104,'multiline':False]
['text':'   WORKSPACE','line_number':105,'multiline':False]
['text':'   BUILD','line_number':106,'multiline':False]
['text':'   info','line_number':107,'multiline':False]
['text':'','line_number':108,'multiline':False]
['text':' Followed by a test at 2-subdir which contains the following files to test','line_number':109,'multiline':False]
['text':' the strip_prefix functionality:','line_number':110,'multiline':False]
['text':'','line_number':111,'multiline':False]
['text':' pluto/','line_number':112,'multiline':False]
['text':'   pluto/','line_number':113,'multiline':False]
['text':'     WORKSPACE','line_number':114,'multiline':False]
['text':'     BUILD','line_number':115,'multiline':False]
['text':'     info','line_number':116,'multiline':False]
['text':'','line_number':117,'multiline':False]
['text':' In each case, set up workspace with the following files:','line_number':118,'multiline':False]
['text':'','line_number':119,'multiline':False]
['text':' $WORKSPACE_DIR/','line_number':120,'multiline':False]
['text':'   WORKSPACE','line_number':121,'multiline':False]
['text':'   planets/','line_number':122,'multiline':False]
['text':'     BUILD','line_number':123,'multiline':False]
['text':'     planet_info.sh','line_number':124,'multiline':False]
['text':'','line_number':125,'multiline':False]
['text':' //planets has a dependency on a target in the pluto Git repository.','line_number':126,'multiline':False]
['text':' Commit corresponds to tag 1-build. See testdata/pluto.git_log.','line_number':129,'multiline':False]
['text':' -eq 2 ] && strip_prefix="strip_prefix=\"$2\","','line_number':133,'multiline':False]
['text':' -eq 3 ] && shallow_since="shallow_since=\"$3\","','line_number':134,'multiline':False]
['text':' Create a workspace that clones the repository at the first commit.','line_number':135,'multiline':False]
['text':'!/bin/sh','line_number':157,'multiline':False]
['text':' This commit has the files in a subdirectory named 'pluto'','line_number':175,'multiline':False]
['text':' so we strip_prefix and the build should still work.','line_number':176,'multiline':False]
['text':' This date is the previous day before the commit was made.','line_number':181,'multiline':False]
['text':' We need the revious day, because git adds current time to the specified date.','line_number':182,'multiline':False]
['text':' Test cloning a Git repository using the new_git_repository rule.','line_number':201,'multiline':False]
['text':'','line_number':202,'multiline':False]
['text':' This test uses the pluto Git repository at tag 0-initial, which contains the','line_number':203,'multiline':False]
['text':' following files:','line_number':204,'multiline':False]
['text':'','line_number':205,'multiline':False]
['text':' pluto/','line_number':206,'multiline':False]
['text':'   info','line_number':207,'multiline':False]
['text':'','line_number':208,'multiline':False]
['text':' Then it uses the pluto Git repository at tag 3-subdir-bare, which contains the','line_number':209,'multiline':False]
['text':' following files:','line_number':210,'multiline':False]
['text':' pluto/','line_number':211,'multiline':False]
['text':'   pluto/','line_number':212,'multiline':False]
['text':'     info','line_number':213,'multiline':False]
['text':'','line_number':214,'multiline':False]
['text':' Set up workspace with the following files:','line_number':215,'multiline':False]
['text':'','line_number':216,'multiline':False]
['text':' $WORKSPACE_DIR/','line_number':217,'multiline':False]
['text':'   WORKSPACE','line_number':218,'multiline':False]
['text':'   pluto.BUILD','line_number':219,'multiline':False]
['text':'   planets/','line_number':220,'multiline':False]
['text':'     BUILD','line_number':221,'multiline':False]
['text':'     planet_info.sh','line_number':222,'multiline':False]
['text':'','line_number':223,'multiline':False]
['text':' //planets has a dependency on a target in the $TEST_TMPDIR/pluto Git','line_number':224,'multiline':False]
['text':' repository.','line_number':225,'multiline':False]
['text':' -eq 3 ] && strip_prefix="strip_prefix=\"$3\","','line_number':229,'multiline':False]
['text':' Create a workspace that clones the repository at the first commit.','line_number':231,'multiline':False]
['text':'!/bin/sh','line_number':284,'multiline':False]
['text':' Test cloning a Git repository that has a submodule using the','line_number':301,'multiline':False]
['text':' new_git_repository rule.','line_number':302,'multiline':False]
['text':'','line_number':303,'multiline':False]
['text':' This test uses the outer-planets Git repository at revision 1-submodule, which','line_number':304,'multiline':False]
['text':' contains the following files:','line_number':305,'multiline':False]
['text':'','line_number':306,'multiline':False]
['text':' outer_planets/','line_number':307,'multiline':False]
['text':'   neptune/','line_number':308,'multiline':False]
['text':'     info','line_number':309,'multiline':False]
['text':'   pluto/  --> submodule ../pluto','line_number':310,'multiline':False]
['text':'     info','line_number':311,'multiline':False]
['text':'','line_number':312,'multiline':False]
['text':' Set up workspace with the following files:','line_number':313,'multiline':False]
['text':'','line_number':314,'multiline':False]
['text':' $WORKSPACE_DIR/','line_number':315,'multiline':False]
['text':'   WORKSPACE','line_number':316,'multiline':False]
['text':'   outer_planets.BUILD','line_number':317,'multiline':False]
['text':'   planets/','line_number':318,'multiline':False]
['text':'     BUILD','line_number':319,'multiline':False]
['text':'     planet_info.sh','line_number':320,'multiline':False]
['text':'','line_number':321,'multiline':False]
['text':' planets has a dependency on targets in the $TEST_TMPDIR/outer_planets Git','line_number':322,'multiline':False]
['text':' repository.','line_number':323,'multiline':False]
['text':' Create a workspace that clones the outer_planets repository.','line_number':327,'multiline':False]
['text':'!/bin/sh','line_number':370,'multiline':False]
['text':' Create a workspace that clones the outer_planets repository.','line_number':385,'multiline':False]
['text':'!/bin/sh','line_number':428,'multiline':False]
['text':' Use batch to force server restarts.','line_number':449,'multiline':False]
['text':' Without changing anything, restart the server, which should not cause the checkout to be re-cloned.','line_number':454,'multiline':False]
['text':' Change the commit id, which should cause the checkout to be re-cloned.','line_number':459,'multiline':False]
['text':' Change the WORKSPACE but not the commit id, which should not cause the checkout to be re-cloned.','line_number':470,'multiline':False]
['text':' This comment line is to change the line numbers, which should not cause Bazel','line_number':473,'multiline':False]
['text':' to refetch the repository','line_number':474,'multiline':False]
['text':' Change the strip_prefix which should cause a new checkout','line_number':486,'multiline':False]
['text':' Change the commit id, which should cause the checkout to be re-cloned.','line_number':519,'multiline':False]
['text':' Helper function for setting up the workspace as follows','line_number':570,'multiline':False]
['text':'','line_number':571,'multiline':False]
['text':' $WORKSPACE_DIR/','line_number':572,'multiline':False]
['text':'   WORKSPACE','line_number':573,'multiline':False]
['text':'   planets/','line_number':574,'multiline':False]
['text':'     planet_info.sh','line_number':575,'multiline':False]
['text':'     BUILD','line_number':576,'multiline':False]
['text':'!/bin/sh','line_number':581,'multiline':False]
['text':' Verifies that rule fails if both tag and commit are set.','line_number':594,'multiline':False]
['text':'','line_number':595,'multiline':False]
['text':' This test uses the pluto Git repository at tag 1-build, which contains the','line_number':596,'multiline':False]
['text':' following files:','line_number':597,'multiline':False]
['text':'','line_number':598,'multiline':False]
['text':' pluto/','line_number':599,'multiline':False]
['text':'   WORKSPACE','line_number':600,'multiline':False]
['text':'   BUILD','line_number':601,'multiline':False]
['text':'   info','line_number':602,'multiline':False]
['text':' Commit corresponds to tag 1-build. See testdata/pluto.git_log.','line_number':606,'multiline':False]
['text':' Verifies that rule fails if neither tag or commit are set.','line_number':625,'multiline':False]
['text':'','line_number':626,'multiline':False]
['text':' This test uses the pluto Git repository at tag 1-build, which contains the','line_number':627,'multiline':False]
['text':' following files:','line_number':628,'multiline':False]
['text':'','line_number':629,'multiline':False]
['text':' pluto/','line_number':630,'multiline':False]
['text':'   WORKSPACE','line_number':631,'multiline':False]
['text':'   BUILD','line_number':632,'multiline':False]
['text':'   info','line_number':633,'multiline':False]
['text':' Verifies that if a non-existent subdirectory is supplied, then strip_prefix','line_number':652,'multiline':False]
['text':' throws an error.','line_number':653,'multiline':False]
['text':' Verifies that rule fails if tag and shallow_since are set','line_number':675,'multiline':False]
['text':'','line_number':676,'multiline':False]
['text':' Verifies that load statement works while using strip_prefix.','line_number':697,'multiline':False]
['text':'','line_number':698,'multiline':False]
['text':' This test uses the strip-prefix Git repository, which contains the','line_number':699,'multiline':False]
['text':' following files:','line_number':700,'multiline':False]
['text':'','line_number':701,'multiline':False]
['text':' strip-prefix','line_number':702,'multiline':False]
['text':' └── prefix-foo','line_number':703,'multiline':False]
['text':'     ├── BUILD','line_number':704,'multiline':False]
['text':'     ├── WORKSPACE','line_number':705,'multiline':False]
['text':'     └── defs.bzl','line_number':706,'multiline':False]
