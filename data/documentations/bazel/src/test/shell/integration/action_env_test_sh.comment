['text':'!/bin/bash','line_number':1,'multiline':False]
['text':'','line_number':2,'multiline':False]
['text':' Copyright 2016 The Bazel Authors. All rights reserved.','line_number':3,'multiline':False]
['text':'','line_number':4,'multiline':False]
['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':5,'multiline':False]
['text':' you may not use this file except in compliance with the License.','line_number':6,'multiline':False]
['text':' You may obtain a copy of the License at','line_number':7,'multiline':False]
['text':'','line_number':8,'multiline':False]
['text':'    http://www.apache.org/licenses/LICENSE-2.0','line_number':9,'multiline':False]
['text':'','line_number':10,'multiline':False]
['text':' Unless required by applicable law or agreed to in writing, software','line_number':11,'multiline':False]
['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':12,'multiline':False]
['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':13,'multiline':False]
['text':' See the License for the specific language governing permissions and','line_number':14,'multiline':False]
['text':' limitations under the License.','line_number':15,'multiline':False]
['text':'','line_number':16,'multiline':False]
['text':' An end-to-end test that Bazel's provides the correct environment variables','line_number':17,'multiline':False]
['text':' to actions.','line_number':18,'multiline':False]
['text':' Load the test setup defined in the parent directory','line_number':20,'multiline':False]
['text':'### SETUP #############################################################','line_number':25,'multiline':False]
['text':'!/bin/sh','line_number':91,'multiline':False]
['text':'### TESTS #############################################################','line_number':101,'multiline':False]
['text':' If an unrelated value changes, we expect the action not to be executed again','line_number':145,'multiline':False]
['text':' However, if a used variable changes, we expect the change to be propagated','line_number':151,'multiline':False]
['text':' But repeating the build with no further changes, no action should happen','line_number':159,'multiline':False]
['text':' Recreate .bazelrc as removing it affects other tests that run in the','line_number':208,'multiline':False]
['text':' same shard with this test.','line_number':209,'multiline':False]
['text':' Verify that changes to the explicitly specified action_env in honored in','line_number':277,'multiline':False]
['text':' tests. Regression test for #3265.','line_number':278,'multiline':False]
['text':' start with a fresh bazel, to have a reproducible starting point','line_number':280,'multiline':False]
['text':' While the test is cached, changing the environment should rerun it and','line_number':284,'multiline':False]
['text':' detect the failure in the new environment.','line_number':285,'multiline':False]
['text':' Redo the same FOO being taken from the environment','line_number':288,'multiline':False]
['text':' If FOO is passed using --host_action_env, it should be listed in host env vars','line_number':299,'multiline':False]
['text':' But if FOO is passed using --action_env, it should not be listed in host env vars','line_number':306,'multiline':False]
['text':' If an unrelated value changes, we expect the action not to be executed again','line_number':347,'multiline':False]
['text':' However, if a used variable changes, we expect the change to be propagated','line_number':353,'multiline':False]
['text':' But repeating the build with no further changes, no action should happen','line_number':361,'multiline':False]
['text':' If FOO is passed using --host_action_env, it should be listed in host env vars','line_number':394,'multiline':False]
['text':' But if FOO is passed using --action_env, it should not be listed in host env vars','line_number':401,'multiline':False]
['text':' If an unrelated value changes, we expect the action not to be executed again','line_number':442,'multiline':False]
['text':' However, if a used variable changes, we expect the change to be propagated','line_number':448,'multiline':False]
['text':' But repeating the build with no further changes, no action should happen','line_number':456,'multiline':False]
