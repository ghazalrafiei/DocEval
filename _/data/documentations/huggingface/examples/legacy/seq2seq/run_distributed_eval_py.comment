['text':'!/usr/bin/env python','line_number':1,'multiline':False]['text':' Copyright 2020 The HuggingFace Team. All rights reserved.','line_number':2,'multiline':False]['text':'','line_number':3,'multiline':False]['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':4,'multiline':False]['text':' you may not use this file except in compliance with the License.','line_number':5,'multiline':False]['text':' You may obtain a copy of the License at','line_number':6,'multiline':False]['text':'','line_number':7,'multiline':False]['text':'     http://www.apache.org/licenses/LICENSE-2.0','line_number':8,'multiline':False]['text':'','line_number':9,'multiline':False]['text':' Unless required by applicable law or agreed to in writing, software','line_number':10,'multiline':False]['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':11,'multiline':False]['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':12,'multiline':False]['text':' See the License for the specific language governing permissions and','line_number':13,'multiline':False]['text':' limitations under the License.','line_number':14,'multiline':False]['text':' determine if we need to increase num_beams','line_number':73,'multiline':False]['text':' update config with task specific params','line_number':74,'multiline':False]['text':' AttributeError risk?','line_number':75,'multiline':False]['text':' if this is wrong, check config.model_type.','line_number':80,'multiline':False]['text':' I set shuffle=True for a more accurate progress bar.','line_number':96,'multiline':False]['text':' If all the longest samples are first, the prog bar estimate is too high at the beginning.','line_number':97,'multiline':False]['text':' batch size chunks, each of size num_return_seq','line_number':112,'multiline':False]['text':' this handles locking.','line_number':167,'multiline':False]['text':' In theory, a node could finish and save before another node hits this. If this happens, we can address later.','line_number':171,'multiline':False]['text':' Calculate metrics, save metrics,  and save _generations.txt','line_number':210,'multiline':False]['text':' TODO(@stas00): add whatever metadata to metrics','line_number':219,'multiline':False]['text':' WAIT FOR lots of .json files','line_number':241,'multiline':False]['text':' make sure all json files are fully saved','line_number':250,'multiline':False]['text':' Unreachable','line_number':257,'multiline':False]['text':' Usage for MT:','line_number':261,'multiline':False]