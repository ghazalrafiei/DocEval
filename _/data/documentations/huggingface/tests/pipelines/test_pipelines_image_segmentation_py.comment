['text':' Copyright 2021 The HuggingFace Team. All rights reserved.','line_number':1,'multiline':False]['text':'','line_number':2,'multiline':False]['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':3,'multiline':False]['text':' you may not use this file except in compliance with the License.','line_number':4,'multiline':False]['text':' You may obtain a copy of the License at','line_number':5,'multiline':False]['text':'','line_number':6,'multiline':False]['text':'     http://www.apache.org/licenses/LICENSE-2.0','line_number':7,'multiline':False]['text':'','line_number':8,'multiline':False]['text':' Unless required by applicable law or agreed to in writing, software','line_number':9,'multiline':False]['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':10,'multiline':False]['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':11,'multiline':False]['text':' See the License for the specific language governing permissions and','line_number':12,'multiline':False]['text':' limitations under the License.','line_number':13,'multiline':False]['text':' Instance segmentation (maskformer, and detr) have a slot for null class','line_number':107,'multiline':False]['text':' and can output nothing even with a low threshold','line_number':108,'multiline':False]['text':' XXX: PIL.Image implements __eq__ which bypasses ANY, so we inverse the comparison','line_number':112,'multiline':False]['text':' to make it work','line_number':113,'multiline':False]['text':' RGBA','line_number':118,'multiline':False]['text':' LA','line_number':122,'multiline':False]['text':' L','line_number':126,'multiline':False]['text':' We need to test batch_size with images with the same size.','line_number':132,'multiline':False]['text':' Detr doesn't normalize the size of the images, meaning we can have','line_number':133,'multiline':False]['text':' 800x800 or 800x1200, meaning we cannot batch simply.','line_number':134,'multiline':False]['text':' We simply bail on this','line_number':135,'multiline':False]['text':' 5 times the same image so the output shape is predictable','line_number':140,'multiline':False]['text':' The default task is `image-classification` we need to override','line_number':177,'multiline':False]['text':' This model does NOT support neither `instance` nor  `panoptic`','line_number':180,'multiline':False]['text':' We should error out','line_number':181,'multiline':False]['text':' Shortening by hashing','line_number':216,'multiline':False]['text':' This is extremely brittle, and those values are made specific for the CI.','line_number':220,'multiline':False]['text':' This must be surprising to the reader.','line_number':276,'multiline':False]['text':' The `panoptic` returns only LABEL_215, and this returns 3 labels.','line_number':277,'multiline':False]['text':'','line_number':278,'multiline':False]['text':' page links (to visualize)','line_number':283,'multiline':False]['text':' actual links to get files','line_number':289,'multiline':False]['text':' Convert masks to numpy array','line_number':293,'multiline':False]['text':' With un-trained tiny random models, the output `logits` tensor is very likely to contain many values','line_number':301,'multiline':False]['text':' close to each other, which cause `argmax` to give quite different results when running the test on 2','line_number':302,'multiline':False]['text':' environments. We use a lower threshold `0.9` here to avoid flakiness.','line_number':303,'multiline':False]['text':' shortening by hashing','line_number':338,'multiline':False]['text':' Shortening by hashing','line_number':372,'multiline':False]['text':' Shortening by hashing','line_number':419,'multiline':False]['text':' Shortening by hashing','line_number':501,'multiline':False]['text':' Shortening by hashing','line_number':572,'multiline':False]['text':' Shortening by hashing','line_number':625,'multiline':False]['text':' Different task','line_number':645,'multiline':False]['text':' Shortening by hashing','line_number':647,'multiline':False]['text':' Different task','line_number':667,'multiline':False]['text':' Shortening by hashing','line_number':669,'multiline':False]