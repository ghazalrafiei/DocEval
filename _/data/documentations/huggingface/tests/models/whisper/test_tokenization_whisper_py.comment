['text':' Copyright 2022 The HuggingFace Team. All rights reserved.','line_number':1,'multiline':False]['text':'','line_number':2,'multiline':False]['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':3,'multiline':False]['text':' you may not use this file except in compliance with the License.','line_number':4,'multiline':False]['text':' You may obtain a copy of the License at','line_number':5,'multiline':False]['text':'','line_number':6,'multiline':False]['text':'     http://www.apache.org/licenses/LICENSE-2.0','line_number':7,'multiline':False]['text':'','line_number':8,'multiline':False]['text':' Unless required by applicable law or agreed to in writing, software','line_number':9,'multiline':False]['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':10,'multiline':False]['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':11,'multiline':False]['text':' See the License for the specific language governing permissions and','line_number':12,'multiline':False]['text':' limitations under the License.','line_number':13,'multiline':False]['text':' fmt: skip','line_number':80,'multiline':False]['text':' fmt: skip','line_number':81,'multiline':False]['text':' fmt: skip','line_number':88,'multiline':False]['text':' fmt: skip','line_number':89,'multiline':False]['text':' Whisper relies on specific additional special tokens, so we skip this','line_number':98,'multiline':False]['text':' general test. In particular, this test loads fast tokenizer from slow','line_number':99,'multiline':False]['text':' tokenizer, and the conversion uses prefix_tokens, where we reference','line_number':100,'multiline':False]['text':' additional special tokens by specific indices, hence overriding the','line_number':101,'multiline':False]['text':' list with less tokens leads to out of index error','line_number':102,'multiline':False]['text':' fmt: skip','line_number':107,'multiline':False]['text':' Merge when the previous sequence is a suffix of the next sequence','line_number':124,'multiline':False]['text':' fmt: skip','line_number':125,'multiline':False]['text':' Now previous is larger than next.','line_number':149,'multiline':False]['text':' We merge what we can and remove the extra right side of the left sequence','line_number':150,'multiline':False]['text':' Nothing in common','line_number':156,'multiline':False]['text':' Some errors in the overlap.','line_number':162,'multiline':False]['text':' We take from previous on the left, from the next on the right of the overlap','line_number':163,'multiline':False]['text':' We take from previous on the left, from the next on the right of the overlap','line_number':169,'multiline':False]['text':' This works on 3 sequences','line_number':175,'multiline':False]['text':' This works on 3 sequences with errors','line_number':182,'multiline':False]['text':' fmt: off','line_number':192,'multiline':False]['text':' fmt: on','line_number':198,'multiline':False]['text':' fmt: off','line_number':212,'multiline':False]['text':' fmt: on','line_number':219,'multiline':False]['text':' 'whatever "whatever" said someone, clever!?'','line_number':254,'multiline':False]['text':' tokenizer tests','line_number':276,'multiline':False]['text':' fast tokenizer tests','line_number':289,'multiline':False]['text':' fmt: off','line_number':323,'multiline':False]['text':' fmt: on','line_number':334,'multiline':False]['text':' fmt: off','line_number':347,'multiline':False]['text':' format: <|startoftranscript|> <|lang-id|> <|task|> <|notimestamps|> ... transcription ids ... <|endoftext|>','line_number':348,'multiline':False]['text':' fmt: on','line_number':358,'multiline':False]['text':' Copied from tests.models.speech_to_text.test_tokenization_speech_to_text.SpeechToTextTokenizerMultilinguialTest.test_tokenizer_decode_ignores_language_codes','line_number':371,'multiline':False]['text':' fmt: off','line_number':387,'multiline':False]['text':' fmt: on','line_number':394,'multiline':False]['text':' change the language prefix token from Spanish to English','line_number':403,'multiline':False]['text':' fmt: off','line_number':409,'multiline':False]['text':' fmt: on','line_number':416,'multiline':False]['text':' fmt: off','line_number':429,'multiline':False]['text':' fmt: on','line_number':440,'multiline':False]['text':' test `decode_with_offsets`','line_number':464,'multiline':False]['text':' test a single sequence with timestamps','line_number':473,'multiline':False]['text':' fmt: off','line_number':474,'multiline':False]['text':' fmt: on','line_number':480,'multiline':False]['text':' test a sequence without a single timestamps','line_number':491,'multiline':False]['text':' fmt: off','line_number':492,'multiline':False]['text':' fmt: on','line_number':498,'multiline':False]['text':' This is in English, but it's just here to make sure the chat control tokens are being added properly','line_number':506,'multiline':False]