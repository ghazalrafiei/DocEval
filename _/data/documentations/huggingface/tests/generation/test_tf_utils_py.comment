['text':' coding=utf-8','line_number':1,'multiline':False]['text':' Copyright 2022 The HuggingFace Team Inc.','line_number':2,'multiline':False]['text':'','line_number':3,'multiline':False]['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':4,'multiline':False]['text':' you may not use this file except in compliance with the License.','line_number':5,'multiline':False]['text':' You may obtain a clone of the License at','line_number':6,'multiline':False]['text':'','line_number':7,'multiline':False]['text':'     http://www.apache.org/licenses/LICENSE-2.0','line_number':8,'multiline':False]['text':'','line_number':9,'multiline':False]['text':' Unless required by applicable law or agreed to in writing, software','line_number':10,'multiline':False]['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':11,'multiline':False]['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':12,'multiline':False]['text':' See the License for the specific language governing permissions and','line_number':13,'multiline':False]['text':' limitations under the License.','line_number':14,'multiline':False]['text':' tests whether the top_k_top_p_filtering function behaves as expected','line_number':53,'multiline':False]['text':' 3rd highest value; idx. 0','line_number':58,'multiline':False]['text':' 5th highest value; idx. 9','line_number':67,'multiline':False]['text':' 2nd highest value; idx. 10','line_number':68,'multiline':False]['text':' 4th highest value; idx. 25','line_number':83,'multiline':False]['text':' 1st highest value; idx. 26','line_number':84,'multiline':False]['text':' cummulative prob of 5 highest values <= 0.6','line_number':88,'multiline':False]['text':' 4th highest value; idx. 13','line_number':103,'multiline':False]['text':' 2nd highest value; idx. 17','line_number':107,'multiline':False]['text':' 5th highest value; idx. 18','line_number':108,'multiline':False]['text':' 3rd highest value; idx. 20','line_number':110,'multiline':False]['text':' 1st highest value; idx. 27','line_number':117,'multiline':False]['text':' cummulative prob of 5 highest values <= 0.6','line_number':120,'multiline':False]['text':' expected non filtered idx as noted above','line_number':128,'multiline':False]['text':' expected non filtered values as noted above','line_number':133,'multiline':False]['text':' setting framework_dependent_parameters needs to be gated, just like its contents' imports','line_number':149,'multiline':False]['text':' TF-only test: tf.saved_model export','line_number':165,'multiline':False]['text':' TF-only test: tf.saved_model export','line_number':208,'multiline':False]['text':' TF-only test: tf.saved_model export','line_number':252,'multiline':False]['text':' file needed to load the TF tokenizer','line_number':254,'multiline':False]['text':' Has PT equivalent: this test relies on random sampling','line_number':280,'multiline':False]['text':' forces the generation to happen on CPU, to avoid GPU-related quirks','line_number':296,'multiline':False]['text':' Has PT equivalent: ample use of framework-specific code','line_number':309,'multiline':False]['text':' Let's create a fake model that has a different signature. In particular, this fake model accepts "foo" as an','line_number':316,'multiline':False]['text':' argument. Because "foo" is not in the encoder signature and doesn't start with "decoder_", it will be part of','line_number':317,'multiline':False]['text':' the encoder kwargs prior to signature filtering, which would lead to an exception. But filtering kicks in and','line_number':318,'multiline':False]['text':' saves the day.','line_number':319,'multiline':False]['text':' Encoder signature filtering only kicks in if it doesn't accept wildcard kwargs. The following test will fail','line_number':328,'multiline':False]['text':' because it doesn't do signature filtering.','line_number':329,'multiline':False]['text':' Normal generation still works (the output will be different because the encoder weights are different)','line_number':337,'multiline':False]['text':' FakeEncoder.call() accepts **kwargs -> no filtering -> value error due to unexpected input "foo"','line_number':340,'multiline':False]