['text':' Copyright 2021 The HuggingFace Team. All rights reserved.','line_number':1,'multiline':False]['text':'','line_number':2,'multiline':False]['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':3,'multiline':False]['text':' you may not use this file except in compliance with the License.','line_number':4,'multiline':False]['text':' You may obtain a copy of the License at','line_number':5,'multiline':False]['text':'','line_number':6,'multiline':False]['text':'     http://www.apache.org/licenses/LICENSE-2.0','line_number':7,'multiline':False]['text':'','line_number':8,'multiline':False]['text':' Unless required by applicable law or agreed to in writing, software','line_number':9,'multiline':False]['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':10,'multiline':False]['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':11,'multiline':False]['text':' See the License for the specific language governing permissions and','line_number':12,'multiline':False]['text':' limitations under the License.','line_number':13,'multiline':False]['text':' pylint: disable=invalid-name','line_number':47,'multiline':False]['text':' This is the minimal required version to support some ONNX Runtime features','line_number':50,'multiline':False]['text':' Parse the version of the installed onnxruntime','line_number':64,'multiline':False]['text':' We require 1.4.0 minimum','line_number':67,'multiline':False]['text':' Check if we need to override certain configuration item','line_number':134,'multiline':False]['text':' Ensure inputs match','line_number':141,'multiline':False]['text':' TODO: Check when exporting QA we provide "is_pair=True"','line_number':142,'multiline':False]['text':' PyTorch deprecated the `enable_onnx_checker` and `use_external_data_format` arguments in v1.11,','line_number':170,'multiline':False]['text':' so we check the torch version for backwards compatibility','line_number':171,'multiline':False]['text':' export can work with named args but the dict containing named args','line_number':173,'multiline':False]['text':' has to be the last element of the args tuple.','line_number':174,'multiline':False]['text':' Check if we need to override certain configuration item','line_number':263,'multiline':False]['text':' Ensure inputs match','line_number':270,'multiline':False]['text':' generate inputs with a different batch_size and seq_len that was used for conversion to properly test','line_number':375,'multiline':False]['text':' dynamic input shapes.','line_number':376,'multiline':False]['text':' Create ONNX Runtime session','line_number':392,'multiline':False]['text':' Compute outputs from the reference model','line_number':396,'multiline':False]['text':' We flatten potential collection of outputs (i.e. past_keys) to a flat structure','line_number':402,'multiline':False]['text':' Overwriting the output name as "present" since it is the name used for the ONNX outputs','line_number':404,'multiline':False]['text':' ("past_key_values" being taken for the ONNX inputs)','line_number':405,'multiline':False]['text':' Create onnxruntime inputs from the reference model inputs','line_number':414,'multiline':False]['text':' We flatten potential collection of inputs (i.e. past_keys)','line_number':417,'multiline':False]['text':' Compute outputs from the ONNX model','line_number':426,'multiline':False]['text':' Check we have a subset of the keys into onnx_outputs against ref_outputs','line_number':429,'multiline':False]['text':' Check the shape and values match','line_number':443,'multiline':False]['text':' Shape','line_number':451,'multiline':False]['text':' Values','line_number':461,'multiline':False]['text':' We are fine if config_inputs has more keys than model_inputs','line_number':487,'multiline':False]['text':' Make sure the input order match (VERY IMPORTANT !!!!)','line_number':491,'multiline':False]