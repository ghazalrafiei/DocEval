['text':' coding=utf-8','line_number':1,'multiline':False]['text':' Copyright 2018 The HuggingFace Inc. team.','line_number':2,'multiline':False]['text':'','line_number':3,'multiline':False]['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':4,'multiline':False]['text':' you may not use this file except in compliance with the License.','line_number':5,'multiline':False]['text':' You may obtain a copy of the License at','line_number':6,'multiline':False]['text':'','line_number':7,'multiline':False]['text':'     http://www.apache.org/licenses/LICENSE-2.0','line_number':8,'multiline':False]['text':'','line_number':9,'multiline':False]['text':' Unless required by applicable law or agreed to in writing, software','line_number':10,'multiline':False]['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':11,'multiline':False]['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':12,'multiline':False]['text':' See the License for the specific language governing permissions and','line_number':13,'multiline':False]['text':' limitations under the License.','line_number':14,'multiline':False]['text':' Register all the supported tasks here','line_number':151,'multiline':False]['text':' This task is a special case as it's parametrized by SRC, TGT languages.','line_number':267,'multiline':False]['text':' Those model configs are special, they are generic over their task, meaning','line_number':414,'multiline':False]['text':' any tokenizer/feature_extractor might be use for a given model so we cannot','line_number':415,'multiline':False]['text':' use the statically defined TOKENIZER_MAPPING and FEATURE_EXTRACTOR_MAPPING to','line_number':416,'multiline':False]['text':' see if the model defines such objects or not.','line_number':417,'multiline':False]['text':' Make sure we only pass use_auth_token once as a kwarg (it used to be possible to pass it in model_kwargs,','line_number':694,'multiline':False]['text':' this is to keep BC).','line_number':695,'multiline':False]['text':' We make a call to the config file first (which may be absent) to get the commit hash as soon as possible','line_number':746,'multiline':False]['text':' Config is the primordial information item.','line_number':758,'multiline':False]['text':' Instantiate config if needed','line_number':759,'multiline':False]['text':' Check for an adapter file in the model path if PEFT is available','line_number':766,'multiline':False]['text':' `find_adapter_config_file` doesn't accept `trust_remote_code`','line_number':768,'multiline':False]['text':' Retrieve the task','line_number':807,'multiline':False]['text':' Use default model/config/tokenizer for the task if no model is provided','line_number':830,'multiline':False]['text':' At that point framework might still be undetermined','line_number':832,'multiline':False]['text':' Load the correct model if possible','line_number':866,'multiline':False]['text':' Infer the framework from the model if not already defined','line_number':867,'multiline':False]['text':' If `model` (instance of `PretrainedModel` instead of `str`) is passed (and/or same for config), while','line_number':886,'multiline':False]['text':' `image_processor` or `feature_extractor` is `None`, the loading will fail. This happens particularly for some','line_number':887,'multiline':False]['text':' vision tasks when calling `pipeline()` with `model` and only one of the `image_processor` and `feature_extractor`.','line_number':888,'multiline':False]['text':' TODO: we need to make `NO_IMAGE_PROCESSOR_TASKS` and `NO_FEATURE_EXTRACTOR_TASKS` more robust to avoid such issue.','line_number':889,'multiline':False]['text':' This block is only temporarily to make CI green.','line_number':890,'multiline':False]['text':' Using class name to avoid importing the real class.','line_number':898,'multiline':False]['text':' This is a special category of models, that are fusions of multiple models','line_number':901,'multiline':False]['text':' so the model_config might not define a tokenizer, but it seems to be','line_number':902,'multiline':False]['text':' necessary for the task, so we're force-trying to load it.','line_number':903,'multiline':False]['text':' Using class name to avoid importing the real class.','line_number':909,'multiline':False]['text':' This is a special category of models, that are fusions of multiple models','line_number':913,'multiline':False]['text':' so the model_config might not define a tokenizer, but it seems to be','line_number':914,'multiline':False]['text':' necessary for the task, so we're force-trying to load it.','line_number':915,'multiline':False]['text':' Using class name to avoid importing the real class.','line_number':921,'multiline':False]['text':' This is a special category of models, that are fusions of multiple models','line_number':924,'multiline':False]['text':' so the model_config might not define a tokenizer, but it seems to be','line_number':925,'multiline':False]['text':' necessary for the task, so we're force-trying to load it.','line_number':926,'multiline':False]['text':' These will never require a tokenizer.','line_number':930,'multiline':False]['text':' the model on the other hand might have a tokenizer, but','line_number':931,'multiline':False]['text':' the files could be missing from the hub, instead of failing','line_number':932,'multiline':False]['text':' on such repos, we just force to not load it.','line_number':933,'multiline':False]['text':' Try to infer tokenizer from model or config name (if provided as str)','line_number':942,'multiline':False]['text':' Impossible to guess what is the right tokenizer here','line_number':949,'multiline':False]['text':' Instantiate tokenizer if needed','line_number':955,'multiline':False]['text':' For tuple we have (tokenizer name, {kwargs})','line_number':958,'multiline':False]['text':' Try to infer image processor from model or config name (if provided as str)','line_number':972,'multiline':False]['text':' Backward compatibility, as `feature_extractor` used to be the name','line_number':978,'multiline':False]['text':' for `ImageProcessor`.','line_number':979,'multiline':False]['text':' Impossible to guess what is the right image_processor here','line_number':983,'multiline':False]['text':' Instantiate image_processor if needed','line_number':990,'multiline':False]['text':' Try to infer feature extractor from model or config name (if provided as str)','line_number':997,'multiline':False]['text':' Impossible to guess what is the right feature_extractor here','line_number':1004,'multiline':False]['text':' Instantiate feature_extractor if needed','line_number':1011,'multiline':False]['text':' to trigger `ImportError` if not installed','line_number':1023,'multiline':False]