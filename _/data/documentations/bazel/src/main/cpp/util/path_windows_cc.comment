['text':' Copyright 2018 The Bazel Authors. All rights reserved.','line_number':1,'multiline':False]['text':'','line_number':2,'multiline':False]['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':3,'multiline':False]['text':' you may not use this file except in compliance with the License.','line_number':4,'multiline':False]['text':' You may obtain a copy of the License at','line_number':5,'multiline':False]['text':'','line_number':6,'multiline':False]['text':'    http://www.apache.org/licenses/LICENSE-2.0','line_number':7,'multiline':False]['text':'','line_number':8,'multiline':False]['text':' Unless required by applicable law or agreed to in writing, software','line_number':9,'multiline':False]['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':10,'multiline':False]['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':11,'multiline':False]['text':' See the License for the specific language governing permissions and','line_number':12,'multiline':False]['text':' limitations under the License.','line_number':13,'multiline':False]['text':' wcslen','line_number':22,'multiline':False]['text':' unique_ptr','line_number':26,'multiline':False]['text':' The path may not be Windows-style and may not be normalized, so convert it.','line_number':69,'multiline':False]['text':' The path may not be Windows-style and may not be normalized, so convert it.','line_number':82,'multiline':False]['text':' Get the size of the expanded string, so we know how big of a buffer to','line_number':95,'multiline':False]['text':' provide. The returned size includes the null terminator.','line_number':96,'multiline':False]['text':' Try again with a buffer bigger than MAX_PATH.','line_number':105,'multiline':False]['text':' Convert forward slashes and backslashes to double (escaped) backslashes, so','line_number':131,'multiline':False]['text':' they are safe to pass on the command line to the JVM and the JVM won't','line_number':132,'multiline':False]['text':' misinterpret them.','line_number':133,'multiline':False]['text':' See https://github.com/bazelbuild/bazel/issues/2576 and','line_number':134,'multiline':False]['text':' https://github.com/bazelbuild/bazel/issues/6098','line_number':135,'multiline':False]['text':' In the result we replace each '/' and '\' with "\\", i.e. the total size','line_number':142,'multiline':False]['text':' *increases* by `separators`.','line_number':143,'multiline':False]['text':' Create a string of that size, filled with zeroes.','line_number':144,'multiline':False]['text':' count ','line_number':145,'multiline':True]['text':' Checks if the path is absolute and/or is a root path.','line_number':168,'multiline':False]['text':'','line_number':169,'multiline':False]['text':' If `must_be_root` is true, then in addition to being absolute, the path must','line_number':170,'multiline':False]['text':' also be just the root part, no other components, e.g. "c:\" is both absolute','line_number':171,'multiline':False]['text':' and root, but "c:\foo" is just absolute.','line_number':172,'multiline':False]['text':' An absolute path is one that starts with "/", "\", "c:/", "c:\",','line_number':176,'multiline':False]['text':' "\\?\c:\", or rarely "\??\c:\" or "\\.\c:\".','line_number':177,'multiline':False]['text':'','line_number':178,'multiline':False]['text':' It is unclear whether the UNC prefix is just "\\?\" or is "\??\" also','line_number':179,'multiline':False]['text':' valid (in some cases it seems to be, though MSDN doesn't mention it).','line_number':180,'multiline':False]['text':' path is (or starts with) "/" or "\"','line_number':182,'multiline':False]['text':' path is (or starts with) "c:/" or "c:\" or similar','line_number':185,'multiline':False]['text':' path is (or starts with) "\\?\c:\" or "\??\c:\" or similar','line_number':188,'multiline':False]['text':' must_be_root ','line_number':206,'multiline':True]['text':' Windows path, top-level directory, e.g. "c:\foo",','line_number':207,'multiline':False]['text':' result is ("c:\", "foo").','line_number':208,'multiline':False]['text':' Or UNC path, top-level directory, e.g. "\\?\c:\foo"','line_number':209,'multiline':False]['text':' result is ("\\?\c:\", "foo").','line_number':210,'multiline':False]['text':' Include the "/" or "\" in the drive specifier.','line_number':212,'multiline':False]['text':' Windows path (neither top-level nor drive root), Unix path, or','line_number':215,'multiline':False]['text':' relative path.','line_number':216,'multiline':False]['text':' If the only "/" is the leading one, then that shall be the first','line_number':218,'multiline':False]['text':' pair element, otherwise the substring up to the rightmost "/".','line_number':219,'multiline':False]['text':' If the rightmost "/" is the tail, then the second pair element','line_number':221,'multiline':False]['text':' should be empty.','line_number':222,'multiline':False]['text':' Handle the case with no '/' or '\' in `path`.','line_number':228,'multiline':False]['text':' Path has "\\?\" prefix --> assume it's already Windows-style.','line_number':257,'multiline':False]['text':' Unsupported path: "\\" or "\\server\path", or some degenerate form of','line_number':262,'multiline':False]['text':' these, such as "//foo".','line_number':263,'multiline':False]['text':' Unsupported path: "c:" or "c:foo"','line_number':271,'multiline':False]['text':' This is an absolute Windows path on the current drive, e.g. "\foo\bar".','line_number':287,'multiline':False]['text':' otherwise this is a relative path, or absolute Windows path.','line_number':291,'multiline':False]['text':' must_be_root ','line_number':326,'multiline':True]['text':' GetShortPathNameW can fail if `wpath` does not exist. This is expected','line_number':374,'multiline':False]['text':' when we are about to create a file at that path, so instead of failing,','line_number':375,'multiline':False]['text':' walk up in the path until we find a prefix that exists and can be','line_number':376,'multiline':False]['text':' shortened, or is a root directory. Save the non-existent tail in','line_number':377,'multiline':False]['text':' `wsuffix`, we'll add it back later.','line_number':378,'multiline':False]['text':' Join all segments.','line_number':387,'multiline':False]['text':' Strip the UNC prefix from `wpath`, and the leading "\" from `wsuffix`.','line_number':403,'multiline':False]['text':' size includes null-terminator','line_number':407,'multiline':False]['text':' GetShortPathNameW may preserve the UNC prefix in the result, so strip it.','line_number':419,'multiline':False]['text':' namespace blaze_util','line_number':537,'multiline':False]