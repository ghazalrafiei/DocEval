['text':'!/bin/bash','line_number':1,'multiline':False]['text':'','line_number':2,'multiline':False]['text':' Copyright 2018 The Bazel Authors. All rights reserved.','line_number':3,'multiline':False]['text':'','line_number':4,'multiline':False]['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':5,'multiline':False]['text':' you may not use this file except in compliance with the License.','line_number':6,'multiline':False]['text':' You may obtain a copy of the License at','line_number':7,'multiline':False]['text':'','line_number':8,'multiline':False]['text':'    http://www.apache.org/licenses/LICENSE-2.0','line_number':9,'multiline':False]['text':'','line_number':10,'multiline':False]['text':' Unless required by applicable law or agreed to in writing, software','line_number':11,'multiline':False]['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':12,'multiline':False]['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':13,'multiline':False]['text':' See the License for the specific language governing permissions and','line_number':14,'multiline':False]['text':' limitations under the License.','line_number':15,'multiline':False]['text':'','line_number':16,'multiline':False]['text':' starlark_configuration_test.sh: integration tests for starlark build configurations','line_number':17,'multiline':False]['text':' --- begin runfiles.bash initialization ---','line_number':19,'multiline':False]['text':' Copy-pasted from Bazel's Bash runfiles library (tools/bash/runfiles/runfiles.bash).','line_number':20,'multiline':False]['text':' --- end runfiles.bash initialization ---','line_number':40,'multiline':False]['text':'### HELPER FXNS #######################################################','line_number':64,'multiline':False]['text':'### TESTS #############################################################','line_number':112,'multiline':False]['text':' Ensure that order doesn't matter.','line_number':178,'multiline':False]['text':' Regression tests for b/134580627','line_number':211,'multiline':False]['text':' Make sure package incrementality works during options parsing','line_number':212,'multiline':False]['text':'############################','line_number':252,'multiline':False]['text':'############################','line_number':293,'multiline':False]['text':' update the flag to return a different value','line_number':367,'multiline':False]['text':' Test that label-typed build setting has access to providers of the','line_number':394,'multiline':False]['text':' target it points to.','line_number':395,'multiline':False]['text':' Find the lines of output for the output target and the generating target','line_number':503,'multiline':False]['text':' Trim to just configuration','line_number':507,'multiline':False]['text':'* }','line_number':508,'multiline':False]['text':'* }','line_number':509,'multiline':False]['text':' Confirm same configuration','line_number':511,'multiline':False]['text':' Setting --noexperimental_check_output_files is required to reproduce the','line_number':556,'multiline':False]['text':' issue: The bug this test covers was caused by starlark flag changes not','line_number':557,'multiline':False]['text':' invalidating the analysis cache, resulting in Bazel not re-running the','line_number':558,'multiline':False]['text':' genrule action during the third invocation (because it sees the action in','line_number':559,'multiline':False]['text':' skyframe as already executed from the first invocation). Bazel will by','line_number':560,'multiline':False]['text':' default also invalidate actions by checking all output files for','line_number':561,'multiline':False]['text':' modification *unless* an output service is registered (which can -','line_number':562,'multiline':False]['text':' correctly - indicate that the output hasn't changed since the last build,','line_number':563,'multiline':False]['text':' here between the second and third runs). As we don't have an output service','line_number':564,'multiline':False]['text':' available in this test we disable output file checking entirely instead.','line_number':565,'multiline':False]['text':' Integration test for an invalid output directory from a mnemonic via a','line_number':582,'multiline':False]['text':' transition. Integration test required because error is emitted in BuildTool.','line_number':583,'multiline':False]['text':' Unit test for dep transition in','line_number':584,'multiline':False]['text':' StarlarkRuleTransitionProviderTest#invalidMnemonicFromDepTransition.','line_number':585,'multiline':False]['text':' Post-test cleanup_workspace() calls "bazel clean", which would also fail','line_number':664,'multiline':False]['text':' unless we reset the bazelrc.','line_number':665,'multiline':False]['text':' Post-test cleanup_workspace() calls "bazel clean", which would also fail','line_number':685,'multiline':False]['text':' unless we reset the bazelrc.','line_number':686,'multiline':False]['text':' Post-test cleanup_workspace() calls "bazel clean", which would also fail','line_number':706,'multiline':False]['text':' unless we reset the bazelrc.','line_number':707,'multiline':False]['text':' Regression test for https://github.com/bazelbuild/bazel/issues/13751.','line_number':711,'multiline':False]