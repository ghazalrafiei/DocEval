['text':'!/bin/bash','line_number':1,'multiline':False]['text':'','line_number':2,'multiline':False]['text':' Copyright 2017 The Bazel Authors. All rights reserved.','line_number':3,'multiline':False]['text':'','line_number':4,'multiline':False]['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':5,'multiline':False]['text':' you may not use this file except in compliance with the License.','line_number':6,'multiline':False]['text':' You may obtain a copy of the License at','line_number':7,'multiline':False]['text':'','line_number':8,'multiline':False]['text':'    http://www.apache.org/licenses/LICENSE-2.0','line_number':9,'multiline':False]['text':'','line_number':10,'multiline':False]['text':' Unless required by applicable law or agreed to in writing, software','line_number':11,'multiline':False]['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':12,'multiline':False]['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':13,'multiline':False]['text':' See the License for the specific language governing permissions and','line_number':14,'multiline':False]['text':' limitations under the License.','line_number':15,'multiline':False]['text':'','line_number':16,'multiline':False]['text':' Test the providers and rules related to toolchains.','line_number':17,'multiline':False]['text':'','line_number':18,'multiline':False]['text':' --- begin runfiles.bash initialization ---','line_number':20,'multiline':False]['text':' Copy-pasted from Bazel's Bash runfiles library (tools/bash/runfiles/runfiles.bash).','line_number':21,'multiline':False]['text':' --- end runfiles.bash initialization ---','line_number':40,'multiline':False]['text':' Clean out the WORKSPACE file.','line_number':47,'multiline':False]['text':' Create shared report rule for printing toolchain info.','line_number':51,'multiline':False]['text':' Define the toolchain.','line_number':176,'multiline':False]['text':' Declare the toolchain.','line_number':184,'multiline':False]['text':' Use the toolchain.','line_number':234,'multiline':False]['text':' Define the toolchain.','line_number':255,'multiline':False]['text':' Declare the toolchain.','line_number':267,'multiline':False]['text':' Use the toolchain.','line_number':283,'multiline':False]['text':' Define the toolchain.','line_number':306,'multiline':False]['text':' Declare the toolchain.','line_number':322,'multiline':False]['text':' Use the toolchain.','line_number':338,'multiline':False]['text':' Create an alias for the toolchain type.','line_number':355,'multiline':False]['text':' Use the alias.','line_number':366,'multiline':False]['text':' Define the toolchain.','line_number':373,'multiline':False]['text':' Declare the toolchain.','line_number':381,'multiline':False]['text':' The rule uses the original, non-aliased type.','line_number':391,'multiline':False]['text':' Use the toolchain.','line_number':398,'multiline':False]['text':' Create an alias for the toolchain type.','line_number':415,'multiline':False]['text':' Use the alias in a rule.','line_number':426,'multiline':False]['text':' Use the toolchain.','line_number':451,'multiline':False]['text':'rite_register_toolchain','line_number':465,'multiline':False]['text':' Do not register test_toolchain to trigger the error.','line_number':466,'multiline':False]['text':' Use the toolchain.','line_number':474,'multiline':False]['text':' The rule uses two separate toolchains.','line_number':492,'multiline':False]['text':' Use the toolchain.','line_number':522,'multiline':False]['text':' The rule uses two separate toolchains.','line_number':539,'multiline':False]['text':' Use the toolchain.','line_number':569,'multiline':False]['text':' Do not register test_toolchain_2 to cause the error.','line_number':585,'multiline':False]['text':' The rule uses two separate toolchains.','line_number':587,'multiline':False]['text':' Use the toolchain.','line_number':617,'multiline':False]['text':' The rule argument toolchains requires one toolchain, but the implementation requests a different','line_number':632,'multiline':False]['text':' one.','line_number':633,'multiline':False]['text':' Trigger the wrong toolchain.','line_number':653,'multiline':False]['text':' Use the toolchain.','line_number':660,'multiline':False]['text':' Use the toolchain.','line_number':682,'multiline':False]['text':' Use the toolchain.','line_number':713,'multiline':False]['text':' Also test aspects executing on an output file.','line_number':798,'multiline':False]['text':' The aspect argument toolchains requires one toolchain, but the implementation requests a','line_number':810,'multiline':False]['text':' different one.','line_number':811,'multiline':False]['text':' Trigger the wrong toolchain.','line_number':829,'multiline':False]['text':' Define constraints.','line_number':874,'multiline':False]['text':' Define the toolchain.','line_number':888,'multiline':False]['text':' Declare the toolchain.','line_number':901,'multiline':False]['text':' Use the toolchain.','line_number':922,'multiline':False]['text':' This should use toolchain_1.','line_number':928,'multiline':False]['text':' This should use toolchain_2.','line_number':935,'multiline':False]['text':' This should not match any toolchains.','line_number':942,'multiline':False]['text':' Use the toolchain.','line_number':967,'multiline':False]['text':' Use the toolchain.','line_number':992,'multiline':False]['text':' Use the toolchain.','line_number':1024,'multiline':False]['text':' It's uncertain which error will happen first, so handle either.','line_number':1064,'multiline':False]['text':' Write toolchain with an invalid target.','line_number':1074,'multiline':False]['text':' Use the toolchain.','line_number':1098,'multiline':False]['text':' Use the toolchain.','line_number':1121,'multiline':False]['text':' Write an invalid rule to be the platform.','line_number':1127,'multiline':False]['text':' When no platform has the constraint, an error','line_number':1185,'multiline':False]['text':' When the platform exists, it is used.','line_number':1191,'multiline':False]['text':' Add test platforms.','line_number':1205,'multiline':False]['text':' Add a rule with default execution constraints.','line_number':1224,'multiline':False]['text':' Use the new rule.','line_number':1240,'multiline':False]['text':' Build the target, using debug messages to verify the correct platform was selected.','line_number':1249,'multiline':False]['text':' Add test platforms.','line_number':1263,'multiline':False]['text':' Add a rule with default execution constraints.','line_number':1282,'multiline':False]['text':' Use the new rule.','line_number':1295,'multiline':False]['text':' Build the target, using debug messages to verify the correct platform was selected.','line_number':1309,'multiline':False]['text':' Add test platforms.','line_number':1322,'multiline':False]['text':' Add a rule with default execution constraints.','line_number':1353,'multiline':False]['text':' Use the new rule.','line_number':1369,'multiline':False]['text':' Build the target, using debug messages to verify the correct platform was selected.','line_number':1383,'multiline':False]['text':' Define the toolchain.','line_number':1406,'multiline':False]['text':' Define config setting','line_number':1419,'multiline':False]['text':' Declare the toolchain.','line_number':1425,'multiline':False]['text':' Use the toolchain.','line_number':1443,'multiline':False]['text':' This should use toolchain_2.','line_number':1449,'multiline':False]['text':' This should use toolchain_1.','line_number':1454,'multiline':False]['text':' This should match toolchain_2.','line_number':1460,'multiline':False]['text':' Define the toolchain.','line_number':1483,'multiline':False]['text':' Define config setting','line_number':1496,'multiline':False]['text':' Declare the toolchain.','line_number':1502,'multiline':False]['text':' Use the toolchain.','line_number':1533,'multiline':False]['text':' Use the toolchain in exec configuration','line_number':1538,'multiline':False]['text':' This should use toolchain_1 (because default host_compilation_mode = opt).','line_number':1545,'multiline':False]['text':' This should use toolchain_2.','line_number':1550,'multiline':False]['text':' This should use toolchain_2.','line_number':1556,'multiline':False]['text':' Add test constraints and platforms.','line_number':1565,'multiline':False]['text':' Default constraint values don't block toolchain resolution.','line_number':1574,'multiline':False]['text':' Add test toolchains using the constraints.','line_number':1591,'multiline':False]['text':' Define the toolchains.','line_number':1598,'multiline':False]['text':' Declare the toolchains.','line_number':1609,'multiline':False]['text':' Register the toolchains','line_number':1630,'multiline':False]['text':' Use the toolchain.','line_number':1642,'multiline':False]['text':' Test some builds and verify which was used.','line_number':1648,'multiline':False]['text':' This should use the default value.','line_number':1649,'multiline':False]['text':' This should use the explicit value.','line_number':1655,'multiline':False]['text':' Create a toolchain rule that also exposes make variables.','line_number':1664,'multiline':False]['text':' Create a rule that consumes the toolchain.','line_number':1687,'multiline':False]['text':' Create and register a toolchain','line_number':1701,'multiline':False]['text':' Define the toolchain.','line_number':1711,'multiline':False]['text':' Declare the toolchain.','line_number':1717,'multiline':False]['text':' Instantiate the rule and verify the output.','line_number':1727,'multiline':False]['text':' Tests of external repositories only work under bazel.','line_number':1743,'multiline':False]['text':' Test cycles in registered toolchains, which can only happen when','line_number':1750,'multiline':False]['text':' registered_toolchains is called for something that is not actually','line_number':1751,'multiline':False]['text':' using the "toolchain" rule.','line_number':1752,'multiline':False]['text':' Set up two sets of rules and toolchains, one depending on the other.','line_number':1756,'multiline':False]['text':' Define the actual targets using these.','line_number':1813,'multiline':False]['text':' Finally, set up the misconfigured WORKSPACE file.','line_number':1852,'multiline':False]['text':' Not a toolchain() target!','line_number':1855,'multiline':False]['text':' Execute the build and check the error message.','line_number':1860,'multiline':False]['text':' Catch the error when a target platform requires a configuration which contains the same target platform.','line_number':1867,'multiline':False]['text':' This can only happen when the target platform is not actually a platform.','line_number':1868,'multiline':False]['text':'!/bin/sh','line_number':1873,'multiline':False]['text':'!/bin/sh','line_number':1877,'multiline':False]['text':' Write a platform with duplicate constraint values for the same setting.','line_number':1905,'multiline':False]['text':' Write a toolchain with duplicate constraint values for the same setting.','line_number':1928,'multiline':False]['text':' Add test platforms.','line_number':1965,'multiline':False]['text':' Add a rule with default execution constraints.','line_number':1984,'multiline':False]['text':' Use the new rule.','line_number':2008,'multiline':False]['text':' Build the target, using debug messages to verify the correct platform was selected.','line_number':2025,'multiline':False]['text':' Add test platforms.','line_number':2212,'multiline':False]['text':' Add a rule with default execution constraints.','line_number':2231,'multiline':False]['text':' Use the new rule.','line_number':2255,'multiline':False]['text':' Define the toolchain.','line_number':2346,'multiline':False]['text':' Declare the toolchain.','line_number':2351,'multiline':False]['text':' Use both toolchains.','line_number':2390,'multiline':False]['text':' Tests for the case where a toolchain requires a different toolchain type.','line_number':2427,'multiline':False]['text':' Regression test for https://github.com/bazelbuild/bazel/issues/13243','line_number':2428,'multiline':False]['text':' Create an inner toolchain.','line_number':2431,'multiline':False]['text':' Create an outer toolchain the uses the inner.','line_number':2460,'multiline':False]['text':' Register all the toolchains.','line_number':2492,'multiline':False]['text':' Write a rule that uses the outer toolchain.','line_number':2498,'multiline':False]['text':' Test that toolchain type labels are correctly resolved relative to the','line_number':2531,'multiline':False]['text':' enclosing file, regardless of the repository name.','line_number':2532,'multiline':False]['text':' See http://b/183060658 for details.','line_number':2533,'multiline':False]['text':' Tests of external repositories only work under bazel.','line_number':2536,'multiline':False]['text':' Create a repository that defines a toolchain type and simple rule.','line_number':2540,'multiline':False]['text':' The toolchain type used in the repository is relative to the repository.','line_number':2541,'multiline':False]['text':' Create a target that uses the rule.','line_number':2609,'multiline':False]['text':' Set up the WORKSPACE.','line_number':2619,'multiline':False]['text':' Test the build.','line_number':2631,'multiline':False]['text':' Add two possible execution platforms.','line_number':2640,'multiline':False]['text':' Register them in order.','line_number':2658,'multiline':False]['text':' Create a toolchain that only works with platform2','line_number':2663,'multiline':False]['text':' The rule must receive the toolchain.','line_number':2667,'multiline':False]['text':' Use the toolchain.','line_number':2695,'multiline':False]['text':' Verify that a toolchain was provided.','line_number':2705,'multiline':False]['text':' Verify that the exec platform is platform2.','line_number':2707,'multiline':False]['text':' Add two possible execution platforms.','line_number':2714,'multiline':False]['text':' Register them in order.','line_number':2732,'multiline':False]['text':' Create a toolchain that only works with platform2','line_number':2737,'multiline':False]['text':' The rule can optionally use the toolchain.','line_number':2741,'multiline':False]['text':' Use the toolchain.','line_number':2769,'multiline':False]['text':' Verify that the exec platform is platform2.','line_number':2780,'multiline':False]['text':' Regression test for https://github.com/bazelbuild/bazel/issues/19945.','line_number':2784,'multiline':False]['text':' Define and declare four identical toolchains.','line_number':2800,'multiline':False]['text':' Use the toolchain.','line_number':2822,'multiline':False]['text':' Test that bazelrc options take precedence over registered toolchains','line_number':2835,'multiline':False]['text':' Test that command-line options take precedence over other toolchains','line_number':2847,'multiline':False]['text':' Test that the last --extra_toolchains takes precedence','line_number':2855,'multiline':False]['text':' TODO(katre): Test using toolchain-provided make variables from a genrule.','line_number':2865,'multiline':False]