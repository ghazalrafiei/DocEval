['text':'!/bin/bash','line_number':1,'multiline':False]['text':'','line_number':2,'multiline':False]['text':' Copyright 2016 The Bazel Authors. All rights reserved.','line_number':3,'multiline':False]['text':'','line_number':4,'multiline':False]['text':' Licensed under the Apache License, Version 2.0 (the "License");','line_number':5,'multiline':False]['text':' you may not use this file except in compliance with the License.','line_number':6,'multiline':False]['text':' You may obtain a copy of the License at','line_number':7,'multiline':False]['text':'','line_number':8,'multiline':False]['text':'    http://www.apache.org/licenses/LICENSE-2.0','line_number':9,'multiline':False]['text':'','line_number':10,'multiline':False]['text':' Unless required by applicable law or agreed to in writing, software','line_number':11,'multiline':False]['text':' distributed under the License is distributed on an "AS IS" BASIS,','line_number':12,'multiline':False]['text':' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.','line_number':13,'multiline':False]['text':' See the License for the specific language governing permissions and','line_number':14,'multiline':False]['text':' limitations under the License.','line_number':15,'multiline':False]['text':'','line_number':16,'multiline':False]['text':' Tests build without the bytes.','line_number':17,'multiline':False]['text':' --- begin runfiles.bash initialization ---','line_number':21,'multiline':False]['text':' --- end runfiles.bash initialization ---','line_number':40,'multiline':False]['text':' Regression test for https://github.com/bazelbuild/bazel/issues/19988.','line_number':92,'multiline':False]['text':' TODO(b/37355380): This test is disabled due to RemoteWorker not supporting','line_number':95,'multiline':False]['text':' setting SDKROOT and DEVELOPER_DIR appropriately, as is required of','line_number':96,'multiline':False]['text':' action executors in order to select the appropriate Xcode toolchain.','line_number':97,'multiline':False]['text':' TODO(b/37355380): This test is disabled due to RemoteWorker not supporting','line_number':112,'multiline':False]['text':' setting SDKROOT and DEVELOPER_DIR appropriately, as is required of','line_number':113,'multiline':False]['text':' action executors in order to select the appropriate Xcode toolchain.','line_number':114,'multiline':False]['text':' TODO(b/37355380): This test is disabled due to RemoteWorker not supporting','line_number':129,'multiline':False]['text':' setting SDKROOT and DEVELOPER_DIR appropriately, as is required of','line_number':130,'multiline':False]['text':' action executors in order to select the appropriate Xcode toolchain.','line_number':131,'multiline':False]['text':' TODO(b/37355380): This test is disabled due to RemoteWorker not supporting','line_number':146,'multiline':False]['text':' setting SDKROOT and DEVELOPER_DIR appropriately, as is required of','line_number':147,'multiline':False]['text':' action executors in order to select the appropriate Xcode toolchain.','line_number':148,'multiline':False]['text':'include "header.h"','line_number':176,'multiline':False]['text':'include "header.h"','line_number':183,'multiline':False]['text':' Test that remote metadata is saved and action cache is hit across server restarts when using','line_number':196,'multiline':False]['text':' --remote_download_minimal','line_number':197,'multiline':False]['text':' Tests that when using --remote_download_outputs=all both toplevel and','line_number':259,'multiline':False]['text':' intermediate outputs are downloaded.','line_number':260,'multiline':False]['text':' Delete the files to test that the outputs can be re-downloaded','line_number':277,'multiline':False]['text':' Test that when using --remote_download_outputs=toplevel only toplevel','line_number':298,'multiline':False]['text':' outputs are downloaded.','line_number':299,'multiline':False]['text':' Nothing changed, no action is re-executed.','line_number':322,'multiline':False]['text':' Delete the file to test that the toplevel output can be re-downloaded','line_number':325,'multiline':False]['text':' Output of foobar is missing, the generating action is re-executed','line_number':334,'multiline':False]['text':' Test that if a second invocation changes toplevel targets, the outputs of','line_number':343,'multiline':False]['text':' new target will be downloaded.','line_number':344,'multiline':False]['text':' Output of foo is missing, the generating action is re-executed','line_number':378,'multiline':False]['text':' Test that --remote_download_toplevel fetches only the top level binaries','line_number':386,'multiline':False]['text':' and generated runfiles.','line_number':387,'multiline':False]['text':' TODO(b/37355380): This test is disabled due to RemoteWorker not supporting','line_number':389,'multiline':False]['text':' setting SDKROOT and DEVELOPER_DIR appropriately, as is required of','line_number':390,'multiline':False]['text':' action executors in order to select the appropriate Xcode toolchain.','line_number':391,'multiline':False]['text':'!/bin/sh','line_number':398,'multiline':False]['text':'include <iostream>','line_number':404,'multiline':False]['text':' Test that --remote_download_toplevel fetches inputs to symlink actions. In','line_number':435,'multiline':False]['text':' particular, cc_binary links against a symlinked imported .so file, and only','line_number':436,'multiline':False]['text':' the symlink is in the runfiles.','line_number':437,'multiline':False]['text':' TODO(b/37355380): This test is disabled due to RemoteWorker not supporting','line_number':440,'multiline':False]['text':' setting SDKROOT and DEVELOPER_DIR appropriately, as is required of','line_number':441,'multiline':False]['text':' action executors in order to select the appropriate Xcode toolchain.','line_number':442,'multiline':False]['text':' TODO(b/37355380): This test is disabled due to RemoteWorker not supporting','line_number':575,'multiline':False]['text':' setting SDKROOT and DEVELOPER_DIR appropriately, as is required of','line_number':576,'multiline':False]['text':' action executors in order to select the appropriate Xcode toolchain.','line_number':577,'multiline':False]['text':' We need the top-level output to be a tree artifact generated by a template','line_number':583,'multiline':False]['text':' action. This is one way to do that: generate a tree artifact of C++ source','line_number':584,'multiline':False]['text':' files, and then compile them with a cc_library / cc_binary rule.','line_number':585,'multiline':False]['text':'','line_number':586,'multiline':False]['text':' The default top-level output of a cc_binary is the final binary, which is','line_number':587,'multiline':False]['text':' not what we want. Instead, we use --output_groups=compilation_outputs to','line_number':588,'multiline':False]['text':' fetch the .o files as the top-level outputs.','line_number':589,'multiline':False]['text':' Test that using --remote_download_toplevel with a non-generated (source)','line_number':621,'multiline':False]['text':' runfile dependency works.','line_number':622,'multiline':False]['text':'!/bin/sh','line_number':625,'multiline':False]['text':' Test that when using --remote_download_toplevel with bazel test only','line_number':650,'multiline':False]['text':' the test.log and test.xml file are downloaded but not the test binary.','line_number':651,'multiline':False]['text':' However when building a test then the test binary should be downloaded.','line_number':652,'multiline':False]['text':' TODO(b/37355380): This test is disabled due to RemoteWorker not supporting','line_number':655,'multiline':False]['text':' setting SDKROOT and DEVELOPER_DIR appropriately, as is required of','line_number':656,'multiline':False]['text':' action executors in order to select the appropriate Xcode toolchain.','line_number':657,'multiline':False]['text':'include <iostream>','line_number':670,'multiline':False]['text':' When invoking bazel test only test.log and test.xml should be downloaded.','line_number':674,'multiline':False]['text':' When invoking bazel build the test binary should be downloaded.','line_number':689,'multiline':False]['text':' Regression test for https://github.com/bazelbuild/bazel/issues/17190.','line_number':700,'multiline':False]['text':'','line_number':701,'multiline':False]['text':' Test that when using --remote_download_toplevel with bazel test, outputs of','line_number':702,'multiline':False]['text':' non-test targets are downloaded. When using --remote_download_minimal with','line_number':703,'multiline':False]['text':' bazel test, outputs of non-test targets are not downloaded.','line_number':704,'multiline':False]['text':'include <iostream>','line_number':721,'multiline':False]['text':' TODO(b/37355380): This test is disabled due to RemoteWorker not supporting','line_number':733,'multiline':False]['text':' setting SDKROOT and DEVELOPER_DIR appropriately, as is required of','line_number':734,'multiline':False]['text':' action executors in order to select the appropriate Xcode toolchain.','line_number':735,'multiline':False]['text':' TODO(b/37355380): This test is disabled due to RemoteWorker not supporting','line_number':746,'multiline':False]['text':' setting SDKROOT and DEVELOPER_DIR appropriately, as is required of','line_number':747,'multiline':False]['text':' action executors in order to select the appropriate Xcode toolchain.','line_number':748,'multiline':False]['text':' Test that when using --remote_download_minimal all URI's in the BEP','line_number':758,'multiline':False]['text':' are rewritten as bytestream://..','line_number':759,'multiline':False]['text':'!/bin/sh','line_number':762,'multiline':False]['text':' Test that when --remote_bytestream_uri_prefix is set, bytestream://','line_number':791,'multiline':False]['text':' URIs do not contain the hostname that's part of --remote_executor.','line_number':792,'multiline':False]['text':' They should use a fixed value instead.','line_number':793,'multiline':False]['text':'!/bin/sh','line_number':796,'multiline':False]['text':' Test that when using --remote_download_minimal, undeclared outputs in a test','line_number':826,'multiline':False]['text':' are reported by BEP','line_number':827,'multiline':False]['text':'!/bin/sh','line_number':855,'multiline':False]['text':' Test that test logs of multiple test attempts can be renamed and reported by','line_number':878,'multiline':False]['text':' BEP.','line_number':879,'multiline':False]['text':' This test is derivative of test_bep_output_groups in','line_number':909,'multiline':False]['text':' build_event_stream_test.sh, which verifies that successful output groups'','line_number':910,'multiline':False]['text':' artifacts appear in BEP when a top-level target fails to build.','line_number':911,'multiline':False]['text':' Test that when using --remote_download_minimal all URI's in the BEP','line_number':913,'multiline':False]['text':' are rewritten as bytestream://.. *even when* a target fails to be built and','line_number':914,'multiline':False]['text':' some output groups within that target are successfully built.','line_number':915,'multiline':False]['text':' In outputgroups/rules.bzl, the `my_rule` definition defines four output','line_number':947,'multiline':False]['text':' groups with different (successful/failed) action counts:','line_number':948,'multiline':False]['text':'    1. foo_outputs (1 successful/1 failed)','line_number':949,'multiline':False]['text':'    2. bar_outputs (1/0)','line_number':950,'multiline':False]['text':'','line_number':951,'multiline':False]['text':' We request both output groups and expect artifacts produced by bar_outputs','line_number':952,'multiline':False]['text':' to appear in BEP with bytestream URIs.','line_number':953,'multiline':False]['text':' This test is derivative of test_failing_aspect_bep_output_groups in','line_number':966,'multiline':False]['text':' build_event_stream_test.sh, which verifies that successful output groups'','line_number':967,'multiline':False]['text':' artifacts appear in BEP when a top-level aspect fails to build.','line_number':968,'multiline':False]['text':' Test that when using --remote_download_minimal all URI's in the BEP','line_number':970,'multiline':False]['text':' are rewritten as bytestream://.. *even when* an aspect fails to be built and','line_number':971,'multiline':False]['text':' some output groups within that aspect are successfully built.','line_number':972,'multiline':False]['text':' In semifailingaspect.bzl, the `semifailing_aspect` definition defines two','line_number':1010,'multiline':False]['text':' output groups: good-aspect-out and bad-aspect-out. We expect the artifacts','line_number':1011,'multiline':False]['text':' produced by good-aspect-out to have bytestream URIs in BEP.','line_number':1012,'multiline':False]['text':' Regression test for #8385','line_number':1027,'multiline':False]['text':'!/bin/sh','line_number':1040,'multiline':False]['text':'!/bin/sh','line_number':1052,'multiline':False]['text':' Test that a test action generating its own test.xml file works with','line_number':1064,'multiline':False]['text':' --remote_download_toplevel.','line_number':1065,'multiline':False]['text':'!/bin/sh','line_number':1069,'multiline':False]['text':' Regression test that Bazel does not crash if remote execution is disabled,','line_number':1102,'multiline':False]['text':' but --remote_download_toplevel is enabled.','line_number':1103,'multiline':False]['text':' test that prefetcher change permission for downloaded files and directories to 0555.','line_number':1128,'multiline':False]['text':' test that prefetcher change permission for downloaded files and directories to 0755 if','line_number':1197,'multiline':False]['text':' --experimental_writable_outputs is set.','line_number':1198,'multiline':False]['text':' Rebuild without the flag and verify that permissions in the','line_number':1266,'multiline':False]['text':' outputs have changed. (Verifies that outputs aren't cached)','line_number':1267,'multiline':False]['text':' Delete directory, rerun build','line_number':1296,'multiline':False]['text':' Clear directory and make it read-only, rerun build','line_number':1309,'multiline':False]['text':' Replace directory with file, rerun build','line_number':1324,'multiline':False]['text':' Test that the prefetcher recreates a non-tree directory when fetching a','line_number':1341,'multiline':False]['text':' remotely stored output into an externally modified output tree.','line_number':1342,'multiline':False]['text':' Test that the prefetcher recreates a tree directory when fetching a','line_number':1364,'multiline':False]['text':' remotely stored output into an externally modified output tree.','line_number':1365,'multiline':False]['text':' test that remote cache is hit when intermediate output is not executable in remote download toplevel mode','line_number':1399,'multiline':False]['text':' Test that --remote_download_toplevel should download non-toplevel','line_number':1433,'multiline':False]['text':' unused_inputs_list for starlark action. See #11732.','line_number':1434,'multiline':False]['text':'!/bin/sh','line_number':1489,'multiline':False]['text':' Test that when testing with --remote_download_minimal, Bazel doesn't','line_number':1517,'multiline':False]['text':' regenerate the test.xml if the action actually produced it. See','line_number':1518,'multiline':False]['text':' https://github.com/bazelbuild/bazel/issues/12554','line_number':1519,'multiline':False]['text':'!/bin/bash','line_number':1537,'multiline':False]['text':' 2 remote spawns: 1 for executing the test, 1 for generating the test.xml','line_number':1560,'multiline':False]['text':' only 1 remote spawn: test.xml is generated by junit','line_number':1567,'multiline':False]['text':' Test that permission of output files are always 0555','line_number':1572,'multiline':False]['text':' no remote execution','line_number':1592,'multiline':False]['text':' normal remote execution','line_number':1607,'multiline':False]['text':' build without bytes','line_number':1623,'multiline':False]['text':' Test that permission of output files are always 0755 if --experimental_writable_outputs is set.','line_number':1640,'multiline':False]['text':' no remote execution','line_number':1660,'multiline':False]['text':' normal remote execution','line_number':1676,'multiline':False]['text':' build without bytes','line_number':1693,'multiline':False]['text':' Test that BwtB doesn't cause build failure if remote cache is disabled in a following build.','line_number':1711,'multiline':False]['text':' See https://github.com/bazelbuild/bazel/issues/13882.','line_number':1712,'multiline':False]['text':' populate the cache','line_number':1733,'multiline':False]['text':' download top level outputs','line_number':1741,'multiline':False]['text':' build without remote cache','line_number':1749,'multiline':False]['text':' TODO(b/37355380): This test is disabled due to RemoteWorker not supporting','line_number':1758,'multiline':False]['text':' setting SDKROOT and DEVELOPER_DIR appropriately, as is required of','line_number':1759,'multiline':False]['text':' action executors in order to select the appropriate Xcode toolchain.','line_number':1760,'multiline':False]['text':' Local compilation requires now remote dep.c to successfully download.','line_number':1778,'multiline':False]['text':' io_bazel is the name of the Bazel workspace and thus contained in the full','line_number':1828,'multiline':False]['text':' path of any output artifact, but not in the exec root relative part that we','line_number':1829,'multiline':False]['text':' want the regex to match against.','line_number':1830,'multiline':False]['text':' Test that `bazel run` works in minimal mode.','line_number':1860,'multiline':False]['text':' Test binary shouldn't be downloaded','line_number':1938,'multiline':False]['text':' Populate remote cache','line_number':1986,'multiline':False]['text':' Clean build, foo.out isn't downloaded','line_number':1994,'multiline':False]['text':' Evict blobs from remote cache','line_number':2004,'multiline':False]['text':' Incremental build triggers remote cache eviction error but Bazel','line_number':2010,'multiline':False]['text':' automatically retries the build and reruns the generating actions for','line_number':2011,'multiline':False]['text':' missing blobs','line_number':2012,'multiline':False]['text':' Populate remote cache','line_number':2053,'multiline':False]['text':' Clean build, foo.out isn't downloaded','line_number':2061,'multiline':False]['text':' Evict blobs from remote cache','line_number':2071,'multiline':False]['text':' Incremental build triggers remote cache eviction error and Bazel tries to','line_number':2077,'multiline':False]['text':' retry the build but failed because the invocation id is the same.','line_number':2078,'multiline':False]['text':' --remote_download_minimal and --remote_download_toplevel install an','line_number':2195,'multiline':False]['text':' OutputService. One of the responsibilities of an OutputService is','line_number':2196,'multiline':False]['text':' that it ensures a valid output path is present.','line_number':2197,'multiline':False]['text':'','line_number':2198,'multiline':False]['text':' Simulate the case where another OutputService replaced the output','line_number':2199,'multiline':False]['text':' path with a symbolic link. If Bazel is rerun with','line_number':2200,'multiline':False]['text':' --remote_download_minimal, it should remove the symbolic link, so','line_number':2201,'multiline':False]['text':' that builds can take place on the local file system.','line_number':2202,'multiline':False]