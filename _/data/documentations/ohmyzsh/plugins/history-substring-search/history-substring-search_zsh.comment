['text':'!/usr/bin/env zsh','line_number':1,'multiline':False]['text':'#############################################################################','line_number':2,'multiline':False]['text':'','line_number':3,'multiline':False]['text':' Copyright (c) 2009 Peter Stephenson','line_number':4,'multiline':False]['text':' Copyright (c) 2011 Guido van Steen','line_number':5,'multiline':False]['text':' Copyright (c) 2011 Suraj N. Kurapati','line_number':6,'multiline':False]['text':' Copyright (c) 2011 Sorin Ionescu','line_number':7,'multiline':False]['text':' Copyright (c) 2011 Vincent Guerci','line_number':8,'multiline':False]['text':' Copyright (c) 2016 Geza Lore','line_number':9,'multiline':False]['text':' Copyright (c) 2017 Bengt Brodersen','line_number':10,'multiline':False]['text':' All rights reserved.','line_number':11,'multiline':False]['text':'','line_number':12,'multiline':False]['text':' Redistribution and use in source and binary forms, with or without','line_number':13,'multiline':False]['text':' modification, are permitted provided that the following conditions are met:','line_number':14,'multiline':False]['text':'','line_number':15,'multiline':False]['text':'  * Redistributions of source code must retain the above copyright','line_number':16,'multiline':False]['text':'    notice, this list of conditions and the following disclaimer.','line_number':17,'multiline':False]['text':'','line_number':18,'multiline':False]['text':'  * Redistributions in binary form must reproduce the above','line_number':19,'multiline':False]['text':'    copyright notice, this list of conditions and the following','line_number':20,'multiline':False]['text':'    disclaimer in the documentation and/or other materials provided','line_number':21,'multiline':False]['text':'    with the distribution.','line_number':22,'multiline':False]['text':'','line_number':23,'multiline':False]['text':'  * Neither the name of the FIZSH nor the names of its contributors','line_number':24,'multiline':False]['text':'    may be used to endorse or promote products derived from this','line_number':25,'multiline':False]['text':'    software without specific prior written permission.','line_number':26,'multiline':False]['text':'','line_number':27,'multiline':False]['text':' THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"','line_number':28,'multiline':False]['text':' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE','line_number':29,'multiline':False]['text':' IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE','line_number':30,'multiline':False]['text':' ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE','line_number':31,'multiline':False]['text':' LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR','line_number':32,'multiline':False]['text':' CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF','line_number':33,'multiline':False]['text':' SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS','line_number':34,'multiline':False]['text':' INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN','line_number':35,'multiline':False]['text':' CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)','line_number':36,'multiline':False]['text':' ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE','line_number':37,'multiline':False]['text':' POSSIBILITY OF SUCH DAMAGE.','line_number':38,'multiline':False]['text':'','line_number':39,'multiline':False]['text':'#############################################################################','line_number':40,'multiline':False]['text':'-----------------------------------------------------------------------------','line_number':42,'multiline':False]['text':' declare global configuration variables','line_number':43,'multiline':False]['text':'-----------------------------------------------------------------------------','line_number':44,'multiline':False]['text':'-----------------------------------------------------------------------------','line_number':52,'multiline':False]['text':' declare internal global variables','line_number':53,'multiline':False]['text':'-----------------------------------------------------------------------------','line_number':54,'multiline':False]['text':'-----------------------------------------------------------------------------','line_number':68,'multiline':False]['text':' the main ZLE widgets','line_number':69,'multiline':False]['text':'-----------------------------------------------------------------------------','line_number':70,'multiline':False]['text':'-----------------------------------------------------------------------------','line_number':95,'multiline':False]['text':' implementation details','line_number':96,'multiline':False]['text':'-----------------------------------------------------------------------------','line_number':97,'multiline':False]['text':'','line_number':101,'multiline':False]['text':' We have to "override" some keys and widgets if the','line_number':102,'multiline':False]['text':' zsh-syntax-highlighting plugin has not been loaded:','line_number':103,'multiline':False]['text':'','line_number':104,'multiline':False]['text':' https://github.com/nicoulaj/zsh-syntax-highlighting','line_number':105,'multiline':False]['text':'','line_number':106,'multiline':False]['text':'','line_number':108,'multiline':False]['text':' Dummy implementation of _zsh_highlight() that','line_number':109,'multiline':False]['text':' simply removes any existing highlights when the','line_number':110,'multiline':False]['text':' user inserts printable characters into $BUFFER.','line_number':111,'multiline':False]['text':'','line_number':112,'multiline':False]['text':'','line_number':119,'multiline':False]['text':' The following snippet was taken from the zsh-syntax-highlighting project:','line_number':120,'multiline':False]['text':'','line_number':121,'multiline':False]['text':' https://github.com/zsh-users/zsh-syntax-highlighting/blob/56b134f5d62ae3d4e66c7f52bd0cc2595f9b305b/zsh-syntax-highlighting.zsh#L126-161','line_number':122,'multiline':False]['text':'','line_number':123,'multiline':False]['text':' Copyright (c) 2010-2011 zsh-syntax-highlighting contributors','line_number':124,'multiline':False]['text':' All rights reserved.','line_number':125,'multiline':False]['text':'','line_number':126,'multiline':False]['text':' Redistribution and use in source and binary forms, with or without','line_number':127,'multiline':False]['text':' modification, are permitted provided that the following conditions are','line_number':128,'multiline':False]['text':' met:','line_number':129,'multiline':False]['text':'','line_number':130,'multiline':False]['text':'  * Redistributions of source code must retain the above copyright','line_number':131,'multiline':False]['text':'    notice, this list of conditions and the following disclaimer.','line_number':132,'multiline':False]['text':'','line_number':133,'multiline':False]['text':'  * Redistributions in binary form must reproduce the above copyright','line_number':134,'multiline':False]['text':'    notice, this list of conditions and the following disclaimer in the','line_number':135,'multiline':False]['text':'    documentation and/or other materials provided with the distribution.','line_number':136,'multiline':False]['text':'','line_number':137,'multiline':False]['text':'  * Neither the name of the zsh-syntax-highlighting contributors nor the','line_number':138,'multiline':False]['text':'    names of its contributors may be used to endorse or promote products','line_number':139,'multiline':False]['text':'    derived from this software without specific prior written permission.','line_number':140,'multiline':False]['text':'','line_number':141,'multiline':False]['text':' THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS','line_number':142,'multiline':False]['text':' IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,','line_number':143,'multiline':False]['text':' THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR','line_number':144,'multiline':False]['text':' PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR','line_number':145,'multiline':False]['text':' CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,','line_number':146,'multiline':False]['text':' EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,','line_number':147,'multiline':False]['text':' PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR','line_number':148,'multiline':False]['text':' PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF','line_number':149,'multiline':False]['text':' LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING','line_number':150,'multiline':False]['text':' NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS','line_number':151,'multiline':False]['text':' SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.','line_number':152,'multiline':False]['text':'','line_number':153,'multiline':False]['text':'--------------8<-------------------8<-------------------8<-----------------','line_number':154,'multiline':False]['text':' Rebind all ZLE widgets to make them invoke _zsh_highlights.','line_number':155,'multiline':False]['text':' Load ZSH module zsh/zleparameter, needed to override user defined widgets.','line_number':158,'multiline':False]['text':' Override ZLE widgets to make them invoke _zsh_highlight.','line_number':164,'multiline':False]['text':'(.*|_*|orig-*|run-help|which-command|beep|yank*)}; do','line_number':166,'multiline':False]['text':' Already rebound event: do nothing.','line_number':169,'multiline':False]['text':' User defined widget: override and rebind old one with prefix "orig-".','line_number':172,'multiline':False]['text':' Completion widget: override and rebind old one with prefix "orig-".','line_number':177,'multiline':False]['text':' Builtin widget: override and make it call the builtin ".widget".','line_number':182,'multiline':False]['text':' Default: unhandled case.','line_number':186,'multiline':False]['text':'-------------->8------------------->8------------------->8-----------------','line_number':191,'multiline':False]['text':'','line_number':202,'multiline':False]['text':' If the buffer is the same as the previously displayed history substring','line_number':203,'multiline':False]['text':' search result, then just keep stepping through the match list. Otherwise','line_number':204,'multiline':False]['text':' start a new search.','line_number':205,'multiline':False]['text':'','line_number':206,'multiline':False]['text':'','line_number':211,'multiline':False]['text':' Clear the previous result.','line_number':212,'multiline':False]['text':'','line_number':213,'multiline':False]['text':'','line_number':217,'multiline':False]['text':' If the buffer is empty, we will just act like up-history/down-history','line_number':218,'multiline':False]['text':' in ZSH, so we do not need to actually search the history. This should','line_number':219,'multiline':False]['text':' speed things up a little.','line_number':220,'multiline':False]['text':'','line_number':221,'multiline':False]['text':'','line_number':227,'multiline':False]['text':' For the purpose of highlighting we keep a copy of the original','line_number':228,'multiline':False]['text':' query string.','line_number':229,'multiline':False]['text':'','line_number':230,'multiline':False]['text':'','line_number':233,'multiline':False]['text':' compose search pattern','line_number':234,'multiline':False]['text':'','line_number':235,'multiline':False]['text':'','line_number':237,'multiline':False]['text':' `=` split string in arguments','line_number':238,'multiline':False]['text':'','line_number':239,'multiline':False]['text':'','line_number':245,'multiline':False]['text':' Escape and join query parts with wildcard character '*' as separator','line_number':246,'multiline':False]['text':' `(j:CHAR:)` join array to string with CHAR as separator','line_number':247,'multiline':False]['text':'','line_number':248,'multiline':False]['text':'','line_number':251,'multiline':False]['text':' Find all occurrences of the search pattern in the history file.','line_number':252,'multiline':False]['text':'','line_number':253,'multiline':False]['text':' (k) returns the "keys" (history index numbers) instead of the values','line_number':254,'multiline':False]['text':' (R) returns values in reverse older, so the index of the youngest','line_number':255,'multiline':False]['text':' matching history entry is at the head of the list.','line_number':256,'multiline':False]['text':'','line_number':257,'multiline':False]['text':'$HISTORY_SUBSTRING_SEARCH_GLOBBING_FLAGS)${search_pattern}]})','line_number':258,'multiline':False]['text':'','line_number':261,'multiline':False]['text':' In order to stay as responsive as possible, we will process the raw','line_number':262,'multiline':False]['text':' matches lazily (when the user requests the next match) to choose items','line_number':263,'multiline':False]['text':' that need to be displayed to the user.','line_number':264,'multiline':False]['text':' _history_substring_search_raw_match_index holds the index of the last','line_number':265,'multiline':False]['text':' unprocessed entry in _history_substring_search_raw_matches. Any items','line_number':266,'multiline':False]['text':' that need to be displayed will be added to','line_number':267,'multiline':False]['text':' _history_substring_search_matches.','line_number':268,'multiline':False]['text':'','line_number':269,'multiline':False]['text':' We use an associative array (_history_substring_search_unique_filter) as','line_number':270,'multiline':False]['text':' a 'set' data structure to ensure uniqueness of the results if desired.','line_number':271,'multiline':False]['text':' If an entry (key) is in the set (non-empty value), then we have already','line_number':272,'multiline':False]['text':' added that entry to _history_substring_search_matches.','line_number':273,'multiline':False]['text':'','line_number':274,'multiline':False]['text':'','line_number':279,'multiline':False]['text':' If $_history_substring_search_match_index is equal to','line_number':280,'multiline':False]['text':' $#_history_substring_search_matches + 1, this indicates that we','line_number':281,'multiline':False]['text':' are beyond the end of $_history_substring_search_matches and that we','line_number':282,'multiline':False]['text':' have also processed all entries in','line_number':283,'multiline':False]['text':' _history_substring_search_raw_matches.','line_number':284,'multiline':False]['text':'','line_number':285,'multiline':False]['text':' If $#_history_substring_search_match_index is equal to 0, this indicates','line_number':286,'multiline':False]['text':' that we are beyond the beginning of $_history_substring_search_matches.','line_number':287,'multiline':False]['text':'','line_number':288,'multiline':False]['text':' If we have initially pressed "up" we have to initialize','line_number':289,'multiline':False]['text':' $_history_substring_search_match_index to 0 so that it will be','line_number':290,'multiline':False]['text':' incremented to 1.','line_number':291,'multiline':False]['text':'','line_number':292,'multiline':False]['text':' If we have initially pressed "down" we have to initialize','line_number':293,'multiline':False]['text':' $_history_substring_search_match_index to 1 so that it will be','line_number':294,'multiline':False]['text':' decremented to 0.','line_number':295,'multiline':False]['text':'','line_number':296,'multiline':False]['text':' the search was successful so display the result properly by clearing away','line_number':309,'multiline':False]['text':' existing highlights and moving the cursor to the end of the result buffer','line_number':310,'multiline':False]['text':'BUFFER}','line_number':313,'multiline':False]['text':' highlight command line using zsh-syntax-highlighting','line_number':316,'multiline':False]['text':' highlight the search query inside the command line','line_number':319,'multiline':False]['text':' highlight first matching query parts','line_number':321,'multiline':False]['text':'m)[\][()|\\*?#<>~^]/\\$MATCH}','line_number':326,'multiline':False]['text':' (i) get index of pattern','line_number':327,'multiline':False]['text':'BUFFER:$highlight_start_index} ]]; then','line_number':329,'multiline':False]['text':'query_part} ))','line_number':331,'multiline':False]['text':' For debugging purposes:','line_number':337,'multiline':False]['text':' zle -R "mn: "$_history_substring_search_match_index" m#: "${#_history_substring_search_matches}','line_number':338,'multiline':False]['text':' read -k -t 200 && zle -U $REPLY','line_number':339,'multiline':False]['text':' Exit successfully from the history-substring-search-* widgets.','line_number':341,'multiline':False]['text':'','line_number':346,'multiline':False]['text':' Check if the UP arrow was pressed to move the cursor within a multi-line','line_number':347,'multiline':False]['text':' buffer. This amounts to three tests:','line_number':348,'multiline':False]['text':'','line_number':349,'multiline':False]['text':' 1. $#buflines -gt 1.','line_number':350,'multiline':False]['text':'','line_number':351,'multiline':False]['text':' 2. $CURSOR -ne $#BUFFER.','line_number':352,'multiline':False]['text':'','line_number':353,'multiline':False]['text':' 3. Check if we are on the first line of the current multi-line buffer.','line_number':354,'multiline':False]['text':'    If so, pressing UP would amount to leaving the multi-line buffer.','line_number':355,'multiline':False]['text':'','line_number':356,'multiline':False]['text':'    We check this by adding an extra "x" to $LBUFFER, which makes','line_number':357,'multiline':False]['text':'    sure that xlbuflines is always equal to the number of lines','line_number':358,'multiline':False]['text':'    until $CURSOR (including the line with the cursor on it).','line_number':359,'multiline':False]['text':'','line_number':360,'multiline':False]['text':'buflines -gt 1 && $CURSOR -ne $#BUFFER && $#xlbuflines -ne 1 ]]; then','line_number':366,'multiline':False]['text':'','line_number':375,'multiline':False]['text':' Check if the DOWN arrow was pressed to move the cursor within a multi-line','line_number':376,'multiline':False]['text':' buffer. This amounts to three tests:','line_number':377,'multiline':False]['text':'','line_number':378,'multiline':False]['text':' 1. $#buflines -gt 1.','line_number':379,'multiline':False]['text':'','line_number':380,'multiline':False]['text':' 2. $CURSOR -ne $#BUFFER.','line_number':381,'multiline':False]['text':'','line_number':382,'multiline':False]['text':' 3. Check if we are on the last line of the current multi-line buffer.','line_number':383,'multiline':False]['text':'    If so, pressing DOWN would amount to leaving the multi-line buffer.','line_number':384,'multiline':False]['text':'','line_number':385,'multiline':False]['text':'    We check this by adding an extra "x" to $RBUFFER, which makes','line_number':386,'multiline':False]['text':'    sure that xrbuflines is always equal to the number of lines','line_number':387,'multiline':False]['text':'    from $CURSOR (including the line with the cursor on it).','line_number':388,'multiline':False]['text':'','line_number':389,'multiline':False]['text':'buflines -gt 1 && $CURSOR -ne $#BUFFER && $#xrbuflines -ne 1 ]]; then','line_number':395,'multiline':False]['text':'','line_number':404,'multiline':False]['text':' Behave like up in ZSH, except clear the $BUFFER','line_number':405,'multiline':False]['text':' when beginning of history is reached like in Fish.','line_number':406,'multiline':False]['text':'','line_number':407,'multiline':False]['text':' we have reached the absolute top of history','line_number':410,'multiline':False]['text':' going up from somewhere below the top of history','line_number':414,'multiline':False]['text':'','line_number':426,'multiline':False]['text':' Behave like down-history in ZSH, except clear the','line_number':427,'multiline':False]['text':' $BUFFER when end of history is reached like in Fish.','line_number':428,'multiline':False]['text':'','line_number':429,'multiline':False]['text':' going down from the absolute top of history','line_number':432,'multiline':False]['text':' going down from somewhere above the bottom of history','line_number':437,'multiline':False]['text':'','line_number':449,'multiline':False]['text':' Process more outstanding raw matches and append any matches that need to','line_number':450,'multiline':False]['text':' be displayed to the user to _history_substring_search_matches.','line_number':451,'multiline':False]['text':' Return whether there were any more results appended.','line_number':452,'multiline':False]['text':'','line_number':453,'multiline':False]['text':'','line_number':455,'multiline':False]['text':' While we have more raw matches. Process them to see if there are any more','line_number':456,'multiline':False]['text':' matches that need to be displayed to the user.','line_number':457,'multiline':False]['text':'','line_number':458,'multiline':False]['text':'_history_substring_search_raw_matches ]]; do','line_number':459,'multiline':False]['text':'','line_number':460,'multiline':False]['text':' Move on to the next raw entry and get its history index.','line_number':461,'multiline':False]['text':'','line_number':462,'multiline':False]['text':'','line_number':466,'multiline':False]['text':' If HISTORY_SUBSTRING_SEARCH_ENSURE_UNIQUE is set to a non-empty value,','line_number':467,'multiline':False]['text':' then ensure that only unique matches are presented to the user.','line_number':468,'multiline':False]['text':' When HIST_IGNORE_ALL_DUPS is set, ZSH already ensures a unique history,','line_number':469,'multiline':False]['text':' so in this case we do not need to do anything.','line_number':470,'multiline':False]['text':'','line_number':471,'multiline':False]['text':'','line_number':473,'multiline':False]['text':' Get the actual history entry at the new index, and check if we have','line_number':474,'multiline':False]['text':' already added it to _history_substring_search_matches.','line_number':475,'multiline':False]['text':'','line_number':476,'multiline':False]['text':'','line_number':480,'multiline':False]['text':' This is a new unique entry. Add it to the filter and append the','line_number':481,'multiline':False]['text':' index to _history_substring_search_matches.','line_number':482,'multiline':False]['text':'','line_number':483,'multiline':False]['text':'','line_number':487,'multiline':False]['text':' Indicate that we did find a match.','line_number':488,'multiline':False]['text':'','line_number':489,'multiline':False]['text':'','line_number':494,'multiline':False]['text':' Just append the new history index to the processed matches.','line_number':495,'multiline':False]['text':'','line_number':496,'multiline':False]['text':'','line_number':499,'multiline':False]['text':' Indicate that we did find a match.','line_number':500,'multiline':False]['text':'','line_number':501,'multiline':False]['text':'','line_number':507,'multiline':False]['text':' We are beyond the end of the list of raw matches. Indicate that no','line_number':508,'multiline':False]['text':' more matches are available.','line_number':509,'multiline':False]['text':'','line_number':510,'multiline':False]['text':'','line_number':515,'multiline':False]['text':' Predicate function that returns whether any more older matches are','line_number':516,'multiline':False]['text':' available.','line_number':517,'multiline':False]['text':'','line_number':518,'multiline':False]['text':'_history_substring_search_matches ]]; then','line_number':520,'multiline':False]['text':'','line_number':521,'multiline':False]['text':' We did not reach the end of the processed list, so we do have further','line_number':522,'multiline':False]['text':' matches.','line_number':523,'multiline':False]['text':'','line_number':524,'multiline':False]['text':'','line_number':528,'multiline':False]['text':' We are at the end of the processed list. Try to process further','line_number':529,'multiline':False]['text':' unprocessed matches. _history_substring_search_process_raw_matches','line_number':530,'multiline':False]['text':' returns whether any more matches were available, so just return','line_number':531,'multiline':False]['text':' that result.','line_number':532,'multiline':False]['text':'','line_number':533,'multiline':False]['text':'','line_number':540,'multiline':False]['text':' Predicate function that returns whether any more younger matches are','line_number':541,'multiline':False]['text':' available.','line_number':542,'multiline':False]['text':'','line_number':543,'multiline':False]['text':'','line_number':546,'multiline':False]['text':' We did not reach the beginning of the processed list, so we do have','line_number':547,'multiline':False]['text':' further matches.','line_number':548,'multiline':False]['text':'','line_number':549,'multiline':False]['text':'','line_number':553,'multiline':False]['text':' We are at the beginning of the processed list. We do not have any more','line_number':554,'multiline':False]['text':' matches.','line_number':555,'multiline':False]['text':'','line_number':556,'multiline':False]['text':'','line_number':562,'multiline':False]['text':' A match is available. The index of the match is held in','line_number':563,'multiline':False]['text':' $_history_substring_search_match_index','line_number':564,'multiline':False]['text':'','line_number':565,'multiline':False]['text':' 1. Make $BUFFER equal to the matching history entry.','line_number':566,'multiline':False]['text':'','line_number':567,'multiline':False]['text':' 2. Use $HISTORY_SUBSTRING_SEARCH_HIGHLIGHT_FOUND','line_number':568,'multiline':False]['text':'    to highlight the current buffer.','line_number':569,'multiline':False]['text':'','line_number':570,'multiline':False]['text':'','line_number':576,'multiline':False]['text':' No more matches are available.','line_number':577,'multiline':False]['text':'','line_number':578,'multiline':False]['text':' 1. Make $BUFFER equal to $_history_substring_search_query so the user can','line_number':579,'multiline':False]['text':'    revise it and search again.','line_number':580,'multiline':False]['text':'','line_number':581,'multiline':False]['text':' 2. Use $HISTORY_SUBSTRING_SEARCH_HIGHLIGHT_NOT_FOUND','line_number':582,'multiline':False]['text':'    to highlight the current buffer.','line_number':583,'multiline':False]['text':'','line_number':584,'multiline':False]['text':'','line_number':592,'multiline':False]['text':' Select history entry during history-substring-down-search:','line_number':593,'multiline':False]['text':'','line_number':594,'multiline':False]['text':' The following variables have been initialized in','line_number':595,'multiline':False]['text':' _history-substring-search-up/down-search():','line_number':596,'multiline':False]['text':'','line_number':597,'multiline':False]['text':' $_history_substring_search_matches is the current list of matches that','line_number':598,'multiline':False]['text':' need to be displayed to the user.','line_number':599,'multiline':False]['text':' $_history_substring_search_match_index is the index of the current match','line_number':600,'multiline':False]['text':' that is being displayed to the user.','line_number':601,'multiline':False]['text':'','line_number':602,'multiline':False]['text':' The range of values that $_history_substring_search_match_index can take','line_number':603,'multiline':False]['text':' is: [0, $#_history_substring_search_matches + 1].  A value of 0','line_number':604,'multiline':False]['text':' indicates that we are beyond the beginning of','line_number':605,'multiline':False]['text':' $_history_substring_search_matches. A value of','line_number':606,'multiline':False]['text':' $#_history_substring_search_matches + 1 indicates that we are beyond','line_number':607,'multiline':False]['text':' the end of $_history_substring_search_matches and that we have also','line_number':608,'multiline':False]['text':' processed all entries in _history_substring_search_raw_matches.','line_number':609,'multiline':False]['text':'','line_number':610,'multiline':False]['text':' If $_history_substring_search_match_index equals','line_number':611,'multiline':False]['text':' $#_history_substring_search_matches and','line_number':612,'multiline':False]['text':' $_history_substring_search_raw_match_index is not greater than','line_number':613,'multiline':False]['text':' $#_history_substring_search_raw_matches, then we need to further process','line_number':614,'multiline':False]['text':' $_history_substring_search_raw_matches to see if there are any more','line_number':615,'multiline':False]['text':' entries that need to be displayed to the user.','line_number':616,'multiline':False]['text':'','line_number':617,'multiline':False]['text':' In _history-substring-search-up-search() the initial value of','line_number':618,'multiline':False]['text':' $_history_substring_search_match_index is 0. This value is set in','line_number':619,'multiline':False]['text':' _history-substring-search-begin(). _history-substring-search-up-search()','line_number':620,'multiline':False]['text':' will initially increment it to 1.','line_number':621,'multiline':False]['text':'','line_number':622,'multiline':False]['text':'_history_substring_search_matches ]]; then','line_number':624,'multiline':False]['text':'','line_number':625,'multiline':False]['text':' We are beyond the end of $_history_substring_search_matches. This','line_number':626,'multiline':False]['text':' can only happen if we have also exhausted the unprocessed matches in','line_number':627,'multiline':False]['text':' _history_substring_search_raw_matches.','line_number':628,'multiline':False]['text':'','line_number':629,'multiline':False]['text':' 1. Update display to indicate search not found.','line_number':630,'multiline':False]['text':'','line_number':631,'multiline':False]['text':'','line_number':637,'multiline':False]['text':' We do have older matches.','line_number':638,'multiline':False]['text':'','line_number':639,'multiline':False]['text':' 1. Move index to point to the next match.','line_number':640,'multiline':False]['text':' 2. Update display to indicate search found.','line_number':641,'multiline':False]['text':'','line_number':642,'multiline':False]['text':'','line_number':647,'multiline':False]['text':' We do not have older matches.','line_number':648,'multiline':False]['text':'','line_number':649,'multiline':False]['text':' 1. Move the index beyond the end of','line_number':650,'multiline':False]['text':'    _history_substring_search_matches.','line_number':651,'multiline':False]['text':' 2. Update display to indicate search not found.','line_number':652,'multiline':False]['text':'','line_number':653,'multiline':False]['text':'','line_number':658,'multiline':False]['text':' When HIST_FIND_NO_DUPS is set, meaning that only unique command lines from','line_number':659,'multiline':False]['text':' history should be matched, make sure the new and old results are different.','line_number':660,'multiline':False]['text':'','line_number':661,'multiline':False]['text':' However, if the HIST_IGNORE_ALL_DUPS shell option, or','line_number':662,'multiline':False]['text':' HISTORY_SUBSTRING_SEARCH_ENSURE_UNIQUE is set, then we already have a','line_number':663,'multiline':False]['text':' unique history, so in this case we do not need to do anything.','line_number':664,'multiline':False]['text':'','line_number':665,'multiline':False]['text':'','line_number':671,'multiline':False]['text':' Repeat the current search so that a different (unique) match is found.','line_number':672,'multiline':False]['text':'','line_number':673,'multiline':False]['text':'','line_number':681,'multiline':False]['text':' Select history entry during history-substring-down-search:','line_number':682,'multiline':False]['text':'','line_number':683,'multiline':False]['text':' The following variables have been initialized in','line_number':684,'multiline':False]['text':' _history-substring-search-up/down-search():','line_number':685,'multiline':False]['text':'','line_number':686,'multiline':False]['text':' $_history_substring_search_matches is the current list of matches that','line_number':687,'multiline':False]['text':' need to be displayed to the user.','line_number':688,'multiline':False]['text':' $_history_substring_search_match_index is the index of the current match','line_number':689,'multiline':False]['text':' that is being displayed to the user.','line_number':690,'multiline':False]['text':'','line_number':691,'multiline':False]['text':' The range of values that $_history_substring_search_match_index can take','line_number':692,'multiline':False]['text':' is: [0, $#_history_substring_search_matches + 1].  A value of 0','line_number':693,'multiline':False]['text':' indicates that we are beyond the beginning of','line_number':694,'multiline':False]['text':' $_history_substring_search_matches. A value of','line_number':695,'multiline':False]['text':' $#_history_substring_search_matches + 1 indicates that we are beyond','line_number':696,'multiline':False]['text':' the end of $_history_substring_search_matches and that we have also','line_number':697,'multiline':False]['text':' processed all entries in _history_substring_search_raw_matches.','line_number':698,'multiline':False]['text':'','line_number':699,'multiline':False]['text':' In _history-substring-search-down-search() the initial value of','line_number':700,'multiline':False]['text':' $_history_substring_search_match_index is 1. This value is set in','line_number':701,'multiline':False]['text':' _history-substring-search-begin(). _history-substring-search-down-search()','line_number':702,'multiline':False]['text':' will initially decrement it to 0.','line_number':703,'multiline':False]['text':'','line_number':704,'multiline':False]['text':'','line_number':707,'multiline':False]['text':' We are beyond the beginning of $_history_substring_search_matches.','line_number':708,'multiline':False]['text':'','line_number':709,'multiline':False]['text':' 1. Update display to indicate search not found.','line_number':710,'multiline':False]['text':'','line_number':711,'multiline':False]['text':'','line_number':717,'multiline':False]['text':' We do have younger matches.','line_number':718,'multiline':False]['text':'','line_number':719,'multiline':False]['text':' 1. Move index to point to the previous match.','line_number':720,'multiline':False]['text':' 2. Update display to indicate search found.','line_number':721,'multiline':False]['text':'','line_number':722,'multiline':False]['text':'','line_number':727,'multiline':False]['text':' We do not have younger matches.','line_number':728,'multiline':False]['text':'','line_number':729,'multiline':False]['text':' 1. Move the index beyond the beginning of','line_number':730,'multiline':False]['text':'    _history_substring_search_matches.','line_number':731,'multiline':False]['text':' 2. Update display to indicate search not found.','line_number':732,'multiline':False]['text':'','line_number':733,'multiline':False]['text':'','line_number':738,'multiline':False]['text':' When HIST_FIND_NO_DUPS is set, meaning that only unique command lines from','line_number':739,'multiline':False]['text':' history should be matched, make sure the new and old results are different.','line_number':740,'multiline':False]['text':'','line_number':741,'multiline':False]['text':' However, if the HIST_IGNORE_ALL_DUPS shell option, or','line_number':742,'multiline':False]['text':' HISTORY_SUBSTRING_SEARCH_ENSURE_UNIQUE is set, then we already have a','line_number':743,'multiline':False]['text':' unique history, so in this case we do not need to do anything.','line_number':744,'multiline':False]['text':'','line_number':745,'multiline':False]['text':'','line_number':751,'multiline':False]['text':' Repeat the current search so that a different (unique) match is found.','line_number':752,'multiline':False]['text':'','line_number':753,'multiline':False]['text':' -*- mode: zsh; sh-indentation: 2; indent-tabs-mode: nil; sh-basic-offset: 2; -*-','line_number':758,'multiline':False]['text':' vim: ft=zsh sw=2 ts=2 et','line_number':759,'multiline':False]