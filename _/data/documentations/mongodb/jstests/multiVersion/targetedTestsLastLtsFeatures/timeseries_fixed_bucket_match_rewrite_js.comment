['text':'*
 * Tests that the query rewrites for fixed bucketing can successfully be handled by a mixed cluster.
 * The primary shard rewrites the query and sends it to the secondary shard that can handle running
 * the rewritten query, even though the secondary shard's FCV is downgraded to 7.0.
 ','line_number':1,'multiline':True]['text':' Create a sharded time-series collection that has fixed buckets.','line_number':27,'multiline':False]['text':' Run the query and confirm the correct results were returned.','line_number':40,'multiline':False]['text':' If data is on both of the shards, we will see 2 "$_internalUnpackBucket" stages in the','line_number':51,'multiline':False]['text':' explain plan.','line_number':52,'multiline':False]['text':' Set up the shards such that the primary shard has [MinKey, 2022-09-30), and the other shard has','line_number':63,'multiline':False]['text':' [2022-09-30, MaxKey].','line_number':64,'multiline':False]['text':' Move one of the chunks into the second shard.','line_number':69,'multiline':False]['text':' Insert 4 documents and expect 2 documents on each shard.','line_number':79,'multiline':False]['text':' Run the pipeline, and expect no eventFilter, since the rewrite should occur.','line_number':88,'multiline':False]['text':' Run a different pipeline, and expect an eventFilter. The rewrite does not apply because the','line_number':92,'multiline':False]['text':' predicate passed in does not align with the bucket boundaries.','line_number':93,'multiline':False]['text':' predValue ','line_number':94,'multiline':True]['text':' Downgrade the FCV version.','line_number':97,'multiline':False]['text':' Run the pipeline, and expect an eventFilter, since the FCV version is downgraded.','line_number':101,'multiline':False]['text':' Downgrade the mongos binary.','line_number':105,'multiline':False]['text':' Downgrade the other shard's binary. We now have a mixed cluster.','line_number':112,'multiline':False]['text':' Before running the query, restart the profiler.','line_number':123,'multiline':False]['text':' Run the pipeline, and expect an eventFilter, since the FCV version is still downgraded.','line_number':131,'multiline':False]['text':' Confirm the other shard ran the query.','line_number':135,'multiline':False]['text':' Downgrade the rest of the shards and the config server.','line_number':140,'multiline':False]['text':' Run the pipeline, and expect an eventFilter, since the FCV version is still downgraded.','line_number':146,'multiline':False]