['text':' Perform the upgrade/downgrade procedure by first setting the featureCompatibilityVersion and','line_number':1,'multiline':False]['text':' then switching the binary.','line_number':2,'multiline':False]['text':' We can't create user databases on a --configsvr instance.','line_number':20,'multiline':False]['text':' Config servers have a majority write concern.','line_number':23,'multiline':False]['text':' Create unique indexes on collection "foo" with two index formatVersions.','line_number':32,'multiline':False]['text':' Providing index version explicitly allows index creation with corresponding','line_number':33,'multiline':False]['text':' formatVersion.','line_number':34,'multiline':False]['text':' Obtain list of all v1 and v2 unique indexes','line_number':55,'multiline':False]['text':' All replicated indexes will be dropped on the primary, and have that','line_number':60,'multiline':False]['text':' drop propogated. Secondary nodes need to recreate unique indexes','line_number':61,'multiline':False]['text':' associated with local collections.','line_number':62,'multiline':False]['text':' Drop and create all v:2 indexes','line_number':86,'multiline':False]['text':' Drop and create all v:1 indexes','line_number':102,'multiline':False]['text':' Create and clear dbpath','line_number':119,'multiline':False]['text':' Return a mongodb connection with startup options, version and dbpath options','line_number':123,'multiline':False]['text':'','line_number':135,'multiline':False]['text':' Standalone tests.','line_number':136,'multiline':False]['text':'','line_number':137,'multiline':False]['text':' New latest binary version standalone.','line_number':143,'multiline':False]['text':' Insert some data.','line_number':148,'multiline':False]['text':' Initially featureCompatibilityVersion is latest except for when we run with shardsvr.','line_number':152,'multiline':False]['text':' We expect featureCompatibilityVersion to be downgradeFCV for shardsvr.','line_number':153,'multiline':False]['text':' Ensure all collections have UUIDs and all unique indexes have new version in latest','line_number':156,'multiline':False]['text':' featureCompatibilityVersion mode.','line_number':157,'multiline':False]['text':' Transitioning from last-lts to last-continuous is only allowed when','line_number':165,'multiline':False]['text':' setFeatureCompatibilityVersion is called with fromConfigServer: true.','line_number':166,'multiline':False]['text':' Ensure featureCompatibilityVersion is downgraded and all collections still have UUIDs.','line_number':176,'multiline':False]['text':' Drop and recreate unique indexes with the older FCV','line_number':180,'multiline':False]['text':' Stop latest binary version mongod.','line_number':183,'multiline':False]['text':' Start the downgraded binary version mongod with same dbpath','line_number':186,'multiline':False]['text':' Check FCV document.','line_number':191,'multiline':False]['text':' Ensure all collections still have UUIDs on a downgraded mongod.','line_number':194,'multiline':False]['text':' Stop downgraded binary version mongod.','line_number':197,'multiline':False]['text':' Start latest binary version mongod again.','line_number':200,'multiline':False]['text':' Ensure setFeatureCompatibilityVersion to latest succeeds, all collections have UUIDs','line_number':205,'multiline':False]['text':' and all unique indexes are in new version.','line_number':206,'multiline':False]['text':' Stop latest binary version mongod for the last time','line_number':212,'multiline':False]['text':'','line_number':216,'multiline':False]['text':' Replica set tests.','line_number':217,'multiline':False]['text':'','line_number':218,'multiline':False]['text':' New latest binary version replica set.','line_number':222,'multiline':False]['text':' Insert some data.','line_number':230,'multiline':False]['text':' Insert some data into the local DB.','line_number':236,'multiline':False]['text':' Initially featureCompatibilityVersion is latest on primary and secondaries except for','line_number':241,'multiline':False]['text':' when we run with shardsvr. We expect featureCompatibilityVersion to be 'downgradeVersion'','line_number':242,'multiline':False]['text':' for shardsvr.','line_number':243,'multiline':False]['text':' Ensure all collections have UUIDs and unique indexes are in new version in latest','line_number':251,'multiline':False]['text':' featureCompatibilityVersion mode on both primary and secondaries.','line_number':252,'multiline':False]['text':' Change featureCompatibilityVersion to downgradeFCV.','line_number':261,'multiline':False]['text':' Transitioning from last-lts to last-continuous is only allowed when','line_number':266,'multiline':False]['text':' setFeatureCompatibilityVersion is called with fromConfigServer: true.','line_number':267,'multiline':False]['text':' Ensure featureCompatibilityVersion is 'downgradeVersion' and all collections still have','line_number':276,'multiline':False]['text':' UUIDs.','line_number':277,'multiline':False]['text':' Ensure all replica set members have finished setting the FCV before checking secondaries.','line_number':279,'multiline':False]['text':' Drop and recreate unique indexes with the older FCV','line_number':292,'multiline':False]['text':' Now drop and recreate unique indexes on secondaries' "local" database','line_number':295,'multiline':False]['text':' Stop latest binary version replica set.','line_number':301,'multiline':False]['text':' signal ','line_number':302,'multiline':True]['text':' forRestart ','line_number':302,'multiline':True]['text':' Downgrade the ReplSetTest binaries and make sure everything is okay.','line_number':304,'multiline':False]['text':' Check that the featureCompatiblityVersion is set to downgradeFCV and all','line_number':308,'multiline':False]['text':' collections still have UUIDs.','line_number':309,'multiline':False]['text':' signal ','line_number':325,'multiline':True]['text':' forRestart ','line_number':325,'multiline':True]['text':' Start latest binary version replica set again.','line_number':327,'multiline':False]['text':' Ensure all collections have UUIDs and unique indexes are in new version after switching','line_number':333,'multiline':False]['text':' back to latest featureCompatibilityVersion on both primary and secondaries.','line_number':334,'multiline':False]['text':' Do tests for regular standalones and replica sets.','line_number':355,'multiline':False]['text':' Do tests for replica sets started with --shardsvr.','line_number':361,'multiline':False]['text':' Do tests for replica sets started with --configsvr.','line_number':365,'multiline':False]