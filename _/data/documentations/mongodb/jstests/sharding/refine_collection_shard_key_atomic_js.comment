['text':'','line_number':1,'multiline':False]['text':' Tests that refineCollectionShardKey atomically updates metadata in config.collections,','line_number':2,'multiline':False]['text':' config.chunks, and config.tags.','line_number':3,'multiline':False]['text':'','line_number':4,'multiline':False]['text':' Cannot run the filtering metadata check on tests that run refineCollectionShardKey.','line_number':6,'multiline':False]['text':' Ensure that there exist three chunks belonging to 'db.foo' covering the entire key range.','line_number':37,'multiline':False]['text':'','line_number':38,'multiline':False]['text':' Chunk 1: {a: MinKey, b: MinKey} -->> {a: 0, b: 0}','line_number':39,'multiline':False]['text':' Chunk 2: {a: 0, b: 0} -->> {a: 5, b: 5}','line_number':40,'multiline':False]['text':' Chunk 3: {a: 5, b: 5} -->> {a: MaxKey, b: MaxKey}','line_number':41,'multiline':False]['text':' Ensure that there exist two zones belonging to 'db.foo' covering the entire key range.','line_number':45,'multiline':False]['text':'','line_number':46,'multiline':False]['text':' Zone 1: {a: MinKey, b: MinKey} -->> {a: 0, b: 0}','line_number':47,'multiline':False]['text':' Zone 2: {a: 0, b: 0} -->> {a: MaxKey, b: MaxKey}','line_number':48,'multiline':False]['text':' Verify that 'config.collections' is as expected before refineCollectionShardKey.','line_number':56,'multiline':False]['text':' Verify that 'config.chunks' is as expected before refineCollectionShardKey.','line_number':61,'multiline':False]['text':' Verify that 'config.tags' is as expected before refineCollectionShardKey.','line_number':72,'multiline':False]['text':' Enable failpoint 'hangRefineCollectionShardKeyBeforeCommit' and run refineCollectionShardKey in a','line_number':80,'multiline':False]['text':' parallel shell.','line_number':81,'multiline':False]['text':' Verify that 'config.collections' has not been updated since we haven't committed the transaction,','line_number':91,'multiline':False]['text':' except for the 'allowMigrations' property which is updated by the','line_number':92,'multiline':False]['text':' RefineCollectionShardKeyCoordinator before the commit phase.','line_number':93,'multiline':False]['text':' Verify that 'config.chunks' has not been updated since we haven't committed the transaction,','line_number':100,'multiline':False]['text':' except for the chunk version which has been bumped by the setAllowMigrations command prior to the','line_number':101,'multiline':False]['text':' refineCollectionShardKey commit.','line_number':102,'multiline':False]['text':' Verify that 'config.tags' has not been updated since we haven't committed the transaction.','line_number':117,'multiline':False]['text':' Disable failpoint 'hangRefineCollectionShardKeyBeforeCommit' and await parallel shell.','line_number':121,'multiline':False]['text':' Verify that 'config.collections' is as expected after refineCollectionShardKey.','line_number':125,'multiline':False]['text':' Verify that 'config.chunks' is as expected after refineCollectionShardKey.','line_number':130,'multiline':False]['text':' Verify that 'config.tags' is as expected after refineCollectionShardKey.','line_number':141,'multiline':False]['text':' Verify that 'config.collections' is as expected before refineCollectionShardKey.','line_number':157,'multiline':False]['text':' Enable failpoint 'hangRefineCollectionShardKeyBeforeUpdatingChunks' and run','line_number':162,'multiline':False]['text':' refineCollectionShardKey in a parallel shell.','line_number':163,'multiline':False]['text':' Manually write to 'config.chunks' to force refineCollectionShardKey to throw a WriteConflict','line_number':172,'multiline':False]['text':' exception.','line_number':173,'multiline':False]['text':' Disable failpoint 'hangRefineCollectionShardKeyBeforeUpdatingChunks' and await parallel shell.','line_number':183,'multiline':False]['text':' Verify that 'config.collections' is as expected after refineCollectionShardKey.','line_number':187,'multiline':False]['text':' Verify that 'config.chunks' is as expected after refineCollectionShardKey.','line_number':192,'multiline':False]['text':' Verify that 'config.tags' is as expected after refineCollectionShardKey.','line_number':199,'multiline':False]