['text':' Tests that change streams on a collection can be resumed during and after the given collection is','line_number':1,'multiline':False]['text':' resharded.','line_number':2,'multiline':False]['text':'','line_number':3,'multiline':False]['text':' @tags: [','line_number':4,'multiline':False]['text':'   requires_majority_read_concern,','line_number':5,'multiline':False]['text':'   uses_atclustertime','line_number':6,'multiline':False]['text':' ]','line_number':7,'multiline':False]['text':' Use a higher frequency for periodic noops to speed up the test.','line_number':11,'multiline':False]['text':' Open a change streams cursor on the collection that will be resharded.','line_number':41,'multiline':False]['text':' We want to confirm that change streams can see events before, during, and after the resharding','line_number':46,'multiline':False]['text':' operation. Note in particular that this test confirms that a regular user change stream does','line_number':47,'multiline':False]['text':' NOT see internal resharding events such as reshardBegin.','line_number':48,'multiline':False]['text':' Verify that the cursor sees changes before the collection is resharded.','line_number':85,'multiline':False]['text':'','line_number':95,'multiline':False]['text':' If a donor is also a recipient, the donor state machine will run renameCollection with','line_number':97,'multiline':False]['text':' {dropTarget : true} rather than running drop and letting the recipient state machine run','line_number':98,'multiline':False]['text':' rename at the end of the resharding operation. So, we ensure that only one of the donor','line_number':99,'multiline':False]['text':' shards will also be a recipient shard order to verify that neither the rename with','line_number':100,'multiline':False]['text':' {dropTarget : true} nor the drop command are picked up by the change streams cursor.','line_number':101,'multiline':False]['text':' Wait until participants are aware of the resharding operation.','line_number':108,'multiline':False]['text':' Open another change streams cursor while the collection is being resharded.','line_number':111,'multiline':False]['text':' Assert that both the cursors see the two new inserts.','line_number':118,'multiline':False]['text':' Check that we can resume from the token returned before resharding began.','line_number':124,'multiline':False]['text':' Assert that both the cursor opened before resharding started and the one opened during','line_number':137,'multiline':False]['text':' resharding see the insert after resharding has finished.','line_number':138,'multiline':False]['text':' Check that we can resume from both the token returned before resharding began and the token','line_number':144,'multiline':False]['text':' returned during resharding.','line_number':145,'multiline':False]