['text':' Tests mongos behavior on snapshot errors encountered during the first statement in a','line_number':1,'multiline':False]['text':' multi-statement transaction. In particular, verifies that snapshot errors on the first statement','line_number':2,'multiline':False]['text':' in a transaction can be successfully retried on, but that a limit exists on the number of retry','line_number':3,'multiline':False]['text':' attempts.','line_number':4,'multiline':False]['text':'','line_number':5,'multiline':False]['text':' Runs against an unsharded collection, a sharded collection with all chunks on one shard, and a','line_number':6,'multiline':False]['text':' sharded collection with one chunk on both shards.','line_number':7,'multiline':False]['text':'','line_number':8,'multiline':False]['text':' @tags: [requires_sharding, uses_transactions, uses_multi_shard_transaction]','line_number':9,'multiline':False]['text':' findAndModify can only target one shard, even in the two shard case.','line_number':29,'multiline':False]['text':' We cannot test killCursors because mongos discards the response from any killCursors','line_number':45,'multiline':False]['text':' requests that may be sent to shards.','line_number':46,'multiline':False]['text':' Verify that all commands that can start a transaction are able to retry on snapshot errors.','line_number':49,'multiline':False]['text':' Distinct isn't allowed on sharded collections in a multi-document transaction.','line_number':59,'multiline':False]['text':'','line_number':64,'multiline':False]['text':' Retry on a single error.','line_number':65,'multiline':False]['text':'','line_number':66,'multiline':False]['text':' Clean up after insert to avoid duplicate key errors.','line_number':77,'multiline':False]['text':'','line_number':82,'multiline':False]['text':' Retry on multiple errors.','line_number':83,'multiline':False]['text':'','line_number':84,'multiline':False]['text':' Clean up after insert to avoid duplicate key errors.','line_number':95,'multiline':False]['text':'','line_number':100,'multiline':False]['text':' Exhaust retry attempts.','line_number':101,'multiline':False]['text':'','line_number':102,'multiline':False]['text':' isSharded ','line_number':132,'multiline':True]['text':' Enable sharding and set up 2 chunks, [minKey, 10), [10, maxKey), each with one document','line_number':135,'multiline':False]['text':' (includes the document already inserted).','line_number':136,'multiline':False]['text':' isSharded ','line_number':151,'multiline':True]['text':' isSharded ','line_number':163,'multiline':True]['text':' Test only one shard throwing the error when more than one are targeted.','line_number':166,'multiline':False]['text':' isSharded ','line_number':168,'multiline':True]