['text':' Test that you can shard with shard key that's only a prefix of an existing index.','line_number':1,'multiline':False]['text':'','line_number':2,'multiline':False]['text':' Part 1: Shard new collection on {num : 1} with an index on {num : 1, x : 1}.','line_number':3,'multiline':False]['text':'         Test that you can split and move chunks around.','line_number':4,'multiline':False]['text':' Part 2: Test that adding an array value for x doesn't make it unusuable.','line_number':5,'multiline':False]['text':' Part 3: Shard new collection on {skey : 1} but with a longer index.','line_number':6,'multiline':False]['text':'         Insert docs with same val for 'skey' but different vals for 'extra'.','line_number':7,'multiline':False]['text':'         Move chunks around and check that [min,max) chunk boundaries are properly obeyed.','line_number':8,'multiline':False]['text':' Shard key index does not exactly match shard key, so it is not compatible with $min/$max.','line_number':11,'multiline':False]['text':'******************Part 1********************','line_number':29,'multiline':False]['text':' no usable index yet, should throw','line_number':44,'multiline':False]['text':' create usable index','line_number':49,'multiline':False]['text':' usable index, doc with empty 'num' value','line_number':52,'multiline':False]['text':' make sure extra index is not created','line_number':56,'multiline':False]['text':' make sure balancing happens','line_number':59,'multiline':False]['text':' Make sure our initial balance cleanup doesn't interfere with later migrations.','line_number':63,'multiline':False]['text':' test splitting','line_number':71,'multiline':False]['text':' test moving','line_number':74,'multiline':False]['text':'******************Part 2********************','line_number':82,'multiline':False]['text':' Migrations and splits will still work on a sharded collection that only has multi key','line_number':84,'multiline':False]['text':' index.','line_number':85,'multiline':False]['text':' indexes for _id_ and num_1_x_1','line_number':91,'multiline':False]['text':'******************Part 3********************','line_number':138,'multiline':False]['text':' Check chunk boundaries obeyed when using prefix shard key.','line_number':140,'multiline':False]['text':' This test repeats with shard key as the prefix of different longer indices.','line_number':141,'multiline':False]['text':' setup new collection on shard0','line_number':144,'multiline':False]['text':' declare a longer index','line_number':152,'multiline':False]['text':' then shard collection on prefix','line_number':161,'multiline':False]['text':' insert docs with same value for skey','line_number':165,'multiline':False]['text':' split on that key, and check it makes 2 chunks','line_number':174,'multiline':False]['text':' movechunk should move ALL docs since they have same value for skey','line_number':179,'multiline':False]['text':' Make sure our migration eventually goes through before testing individual shards','line_number':184,'multiline':False]['text':' check no orphaned docs on the shards','line_number':190,'multiline':False]['text':' and check total','line_number':194,'multiline':False]