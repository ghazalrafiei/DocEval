['text':' Verifies mongos uses a versioned routing table to target subsequent requests for snapshot reads.','line_number':1,'multiline':False]['text':'','line_number':2,'multiline':False]['text':' @tags: [','line_number':3,'multiline':False]['text':'   requires_persistence,','line_number':4,'multiline':False]['text':'   requires_sharding,','line_number':5,'multiline':False]['text':'   uses_multi_shard_transaction,','line_number':6,'multiline':False]['text':'   uses_transactions,','line_number':7,'multiline':False]['text':' ]','line_number':8,'multiline':False]['text':' Disable expiring old chunk history to ensure the transactions are able to read from a','line_number':31,'multiline':False]['text':' shard that has donated a chunk, even if the migration takes longer than the amount of','line_number':32,'multiline':False]['text':' time for which a chunk's history is normally stored (see SERVER-39763).','line_number':33,'multiline':False]['text':' Set up one sharded collection with 2 chunks, both on the primary shard.','line_number':44,'multiline':False]['text':' Temporarily move a chunk to Shard2, to avoid picking a global read timestamp before the','line_number':57,'multiline':False]['text':' sharding metadata cache collections are created.','line_number':58,'multiline':False]['text':' First command targets the first chunk, the second command targets the second chunk.','line_number':64,'multiline':False]['text':' Clone commands so we can modify readConcern and readPreference.','line_number':88,'multiline':False]['text':' Establish a timestamp in the session.','line_number':110,'multiline':False]['text':' Establish a read timestamp.','line_number':124,'multiline':False]['text':' Move a chunk from Shard1 to Shard2 outside of the transaction, and update it. This will','line_number':134,'multiline':False]['text':' happen at a later logical time than the read timestamp.','line_number':135,'multiline':False]['text':' We may or may not see the result of the update above.','line_number':156,'multiline':False]['text':' Must not see the update's result.','line_number':168,'multiline':False]['text':' Move the chunk back to Shard1 and clear updated field for the next iteration.','line_number':180,'multiline':False]['text':' Transactions aren't supported on secondaries.','line_number':194,'multiline':False]