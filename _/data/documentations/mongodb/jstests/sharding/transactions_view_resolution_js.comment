['text':'*
 * Tests mongos behavior when reading against views in a transaction.
 *
 * @tags: [
 *   requires_sharding,
 *   uses_multi_shard_transaction,
 *   uses_transactions,
 * ]
 ','line_number':1,'multiline':True]['text':' Set up an unsharded collection on shard0.','line_number':66,'multiline':False]['text':' Set up a sharded collection with one chunk on each shard in a database with shard0 as its','line_number':69,'multiline':False]['text':' primary shard.','line_number':70,'multiline':False]['text':' Set up a view on the sharded view, in the same database.','line_number':73,'multiline':False]['text':'','line_number':78,'multiline':False]['text':' The first statement a participant shard receives reading from a view should succeed.','line_number':79,'multiline':False]['text':'','line_number':80,'multiline':False]['text':' Unsharded view.','line_number':88,'multiline':False]['text':' Sharded view.','line_number':99,'multiline':False]['text':' View on sharded view.','line_number':110,'multiline':False]['text':'','line_number':121,'multiline':False]['text':' A later statement a participant shard receives reading from a view should succeed.','line_number':122,'multiline':False]['text':'','line_number':123,'multiline':False]['text':' Unsharded view.','line_number':132,'multiline':False]['text':' Sharded view.','line_number':143,'multiline':False]['text':' View on sharded view.','line_number':154,'multiline':False]['text':'','line_number':165,'multiline':False]['text':' Transactions on shards that return a view resolution error on the first statement remain','line_number':166,'multiline':False]['text':' aborted if the shard is not targeted by the retry on the resolved namespace.','line_number':167,'multiline':False]['text':'','line_number':168,'multiline':False]['text':' This may happen when reading from a sharded view, because mongos will target the primary','line_number':169,'multiline':False]['text':' shard first to resolve the view, but the retry on the underlying sharded collection is not','line_number':170,'multiline':False]['text':' guaranteed to target the primary again.','line_number':171,'multiline':False]['text':'','line_number':172,'multiline':False]['text':' Assumes the request in viewFunc does not target the primary shard, Shard0.','line_number':174,'multiline':False]['text':' There should not be an in-progress transaction on the primary shard.','line_number':179,'multiline':False]['text':' The transaction should not have been committed on the primary shard.','line_number':190,'multiline':False]['text':' This is only possible against sharded views.','line_number':200,'multiline':False]['text':' View on sharded view.','line_number':211,'multiline':False]['text':'','line_number':222,'multiline':False]['text':' Shards do not abort on a view resolution error if they have already completed a statement for','line_number':223,'multiline':False]['text':' a transaction.','line_number':224,'multiline':False]['text':'','line_number':225,'multiline':False]['text':' Assumes the primary shard for view is Shard0.','line_number':227,'multiline':False]['text':' Complete a statement on the primary shard for the view.','line_number':230,'multiline':False]['text':' Targets the primary first, but the resolved retry only targets Shard1.','line_number':232,'multiline':False]['text':' This is only possible against sharded views.','line_number':237,'multiline':False]['text':' View on sharded view.','line_number':248,'multiline':False]['text':'','line_number':259,'multiline':False]['text':' Reading from a view using $lookup and $graphLookup should succeed.','line_number':260,'multiline':False]['text':'','line_number':261,'multiline':False]['text':' Set up an unsharded collection to use for $lookup, as lookup into a sharded collection in a','line_number':270,'multiline':False]['text':' transaction is not yet supported.','line_number':271,'multiline':False]['text':' TODO SERVER-39162: Add testing for lookup into sharded collections in a transaction.','line_number':272,'multiline':False]['text':' Lookup the document in the unsharded collection with _id: 1 through the unsharded view.','line_number':279,'multiline':False]['text':' Find the same document through the view using $graphLookup.','line_number':290,'multiline':False]