['text':' SERVER-5124','line_number':1,'multiline':False]['text':' The puporse of this test is to test authentication when adding/removing a shard. The test sets','line_number':2,'multiline':False]['text':' up a sharded system, then adds/removes a shard.','line_number':3,'multiline':False]['text':' TODO SERVER-50144 Remove this and allow orphan checking.','line_number':6,'multiline':False]['text':' This test calls removeShard which can leave docs in config.rangeDeletions in state "pending",','line_number':7,'multiline':False]['text':' therefore preventing orphans from being cleaned up.','line_number':8,'multiline':False]['text':' login method to login into the database','line_number':11,'multiline':False]['text':' admin user object','line_number':17,'multiline':False]['text':' set up a 2 shard cluster with keyfile','line_number':20,'multiline':False]['text':' add the admin user','line_number':28,'multiline':False]['text':' login as admin user','line_number':33,'multiline':False]['text':' start a mongod with NO keyfile','line_number':38,'multiline':False]['text':' --------------- Test 1 --------------------','line_number':43,'multiline':False]['text':' Add shard to the existing cluster (should fail because it was added without a keyfile)','line_number':44,'multiline':False]['text':' stop mongod','line_number':47,'multiline':False]['text':'--------------- Test 2 --------------------','line_number':50,'multiline':False]['text':' start mongod again, this time with keyfile','line_number':51,'multiline':False]['text':' try adding the new shard','line_number':56,'multiline':False]['text':' Add some data','line_number':60,'multiline':False]['text':' add data to the sharded collection','line_number':68,'multiline':False]['text':' move a chunk','line_number':74,'multiline':False]['text':' TODO (SERVER-60767): remove _waitForDelete param; removeShard() will sync on range deletion.','line_number':75,'multiline':False]['text':' verify the chunk was moved','line_number':79,'multiline':False]['text':' start balancer before removing the shard','line_number':85,'multiline':False]['text':'--------------- Test 3 --------------------','line_number':88,'multiline':False]['text':' now drain the shard','line_number':89,'multiline':False]['text':' create user directly on new shard to allow direct reads from config.migrationCoordinators','line_number':92,'multiline':False]['text':' wait until migration coordinator is finished','line_number':98,'multiline':False]