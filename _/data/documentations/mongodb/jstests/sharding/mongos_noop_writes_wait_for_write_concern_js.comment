['text':' Sharding version of jstests/replsets/noop_writes_wait_for_write_concern.js.','line_number':1,'multiline':False]['text':' @tags: [','line_number':2,'multiline':False]['text':'  multiversion_incompatible','line_number':3,'multiline':False]['text':'  ]','line_number':4,'multiline':False]['text':' Create a shard with 3 nodes and stop one of the secondaries. This will allow majority write','line_number':9,'multiline':False]['text':' concern to be met, but w: 3 will always time out.','line_number':10,'multiline':False]['text':' applyOps is not available through mongos.','line_number':29,'multiline':False]['text':' TODO SERVER-80103: findAndModify does not return write concern errors in the presence of','line_number':34,'multiline':False]['text':' other errors.','line_number':35,'multiline':False]['text':' TODO SERVER-80103: dropDatabase and dropCollection do not respect user supplied write','line_number':40,'multiline':False]['text':' concern and instead always use majority.','line_number':41,'multiline':False]['text':' TODO SERVER-80103: create returns WriteConcernFailed as an ordinary error code instead of','line_number':46,'multiline':False]['text':' using the writeConcernError field.','line_number':47,'multiline':False]['text':' Provide a small wtimeout that we expect to time out.','line_number':51,'multiline':False]['text':' We run the command on a different connection. If the the command were run on the','line_number':59,'multiline':False]['text':' same connection, then the client last op for the noop write would be set by the setup','line_number':60,'multiline':False]['text':' operation. By using a fresh connection the client last op begins as null.','line_number':61,'multiline':False]['text':' This test explicitly tests that write concern for noop writes works when the','line_number':62,'multiline':False]['text':' client last op has not already been set by a duplicate operation.','line_number':63,'multiline':False]['text':' We check the error code of 'res' in the 'confirmFunc'.','line_number':66,'multiline':False]['text':' Tests that the command receives a write concern error. If we don't wait for write','line_number':71,'multiline':False]['text':' concern on noop writes then we won't get a write concern error.','line_number':72,'multiline':False]['text':' Make sure that we print out the response.','line_number':76,'multiline':False]['text':' Restart the node so that consistency checks performed by st.stop() can succeed.','line_number':86,'multiline':False]