['text':' Tests that change streams and their update lookups obey the read preference specified by the','line_number':1,'multiline':False]['text':' user.','line_number':2,'multiline':False]['text':' @tags: [','line_number':3,'multiline':False]['text':'   requires_majority_read_concern,','line_number':4,'multiline':False]['text':'   uses_change_streams,','line_number':5,'multiline':False]['text':' ]','line_number':6,'multiline':False]['text':' Use a higher frequency for periodic noops to speed up the test.','line_number':18,'multiline':False]['text':' Enable sharding on the test DB and ensure its primary is st.shard0.shardName.','line_number':27,'multiline':False]['text':' Shard the test collection on _id.','line_number':31,'multiline':False]['text':' Split the collection into 2 chunks: [MinKey, 0), [0, MaxKey].','line_number':35,'multiline':False]['text':' Move the [0, MaxKey] chunk to st.shard1.shardName.','line_number':38,'multiline':False]['text':' Turn on the profiler.','line_number':42,'multiline':False]['text':' Write a document to each chunk.','line_number':50,'multiline':False]['text':' Test that change streams go to the primary by default.','line_number':54,'multiline':False]['text':' Test that the change stream itself goes to the primary. There might be more than one if','line_number':69,'multiline':False]['text':' we needed multiple getMores to retrieve the changes.','line_number':70,'multiline':False]['text':' TODO SERVER-31650 We have to use 'originatingCommand' here and look for the getMore','line_number':71,'multiline':False]['text':' because the initial aggregate will not show up.','line_number':72,'multiline':False]['text':' Test that the update lookup goes to the primary as well.','line_number':76,'multiline':False]['text':' Test that change streams go to the secondary when the readPreference is {mode: "secondary"}.','line_number':93,'multiline':False]['text':' Test that the change stream itself goes to the secondary. There might be more than one if','line_number':109,'multiline':False]['text':' we needed multiple getMores to retrieve the changes.','line_number':110,'multiline':False]['text':' TODO SERVER-31650 We have to use 'originatingCommand' here and look for the getMore','line_number':111,'multiline':False]['text':' because the initial aggregate will not show up.','line_number':112,'multiline':False]['text':' Test that the update lookup goes to the secondary as well.','line_number':116,'multiline':False]['text':' We need to filter out any profiler entries with a stale config - this is the','line_number':124,'multiline':False]['text':' first read on this secondary with a readConcern specified, so it is the first','line_number':125,'multiline':False]['text':' read on this secondary that will enforce shard version.','line_number':126,'multiline':False]