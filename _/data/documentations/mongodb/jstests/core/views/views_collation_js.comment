['text':' @tags: [','line_number':1,'multiline':False]['text':'   #Â Commands on views not supported in implicitly sharded suites.','line_number':2,'multiline':False]['text':'   assumes_unsharded_collection,','line_number':3,'multiline':False]['text':'   does_not_support_stepdowns,','line_number':4,'multiline':False]['text':'   requires_fastcount,','line_number':5,'multiline':False]['text':'   requires_non_retryable_commands,','line_number':6,'multiline':False]['text':'   # Explain of a resolved view must be executed by mongos.','line_number':7,'multiline':False]['text':'   directly_against_shardsvrs_incompatible,','line_number':8,'multiline':False]['text':'   references_foreign_collection,','line_number':9,'multiline':False]['text':' ]','line_number':10,'multiline':False]['text':'*
 * Tests the behavior of operations when interacting with a view's default collation.
 ','line_number':12,'multiline':True]['text':' Creating a view without specifying a collation defaults to the simple collation.','line_number':23,'multiline':False]['text':' Operations that do not specify a collation succeed.','line_number':29,'multiline':False]['text':' Operations that explicitly ask for the "simple" locale succeed against a view with the','line_number':35,'multiline':False]['text':' simple collation.','line_number':36,'multiline':False]['text':' Attempting to override a view's simple collation fails.','line_number':44,'multiline':False]['text':' Create a view with an explicit, non-simple collation.','line_number':57,'multiline':False]['text':' Operations that do not specify a collation succeed.','line_number':64,'multiline':False]['text':' Explain of operations that do not specify a collation succeed.','line_number':70,'multiline':False]['text':' Operations with a matching collation succeed.','line_number':79,'multiline':False]['text':' Explain of operations with a matching collation succeed.','line_number':87,'multiline':False]['text':' Attempting to override the non-simple default collation of a view fails.','line_number':99,'multiline':False]['text':' Attempting to override the default collation of a view with explain fails.','line_number':122,'multiline':False]['text':' You can lookup into a view with the simple collation if the collection also has the same','line_number':183,'multiline':False]['text':' default collation.','line_number':184,'multiline':False]['text':' You can lookup into a view with the simple collation if the operation has a matching','line_number':192,'multiline':False]['text':' collation.','line_number':193,'multiline':False]['text':' You can't lookup into a view with the simple collation if the operation has a conflicting','line_number':213,'multiline':False]['text':' collation.','line_number':214,'multiline':False]['text':' You can lookup into a view with no operation collation specified if the collection's','line_number':262,'multiline':False]['text':' collation matches the collation of the view.','line_number':263,'multiline':False]['text':' You can lookup into a view with a non-simple collation if the operation's collation','line_number':274,'multiline':False]['text':' matches.','line_number':275,'multiline':False]['text':' You can't lookup into a view when aggregating a collection whose default collation does','line_number':295,'multiline':False]['text':' not match the view's default collation.','line_number':296,'multiline':False]['text':' You can't lookup into a view when aggregating a collection and the operation's collation','line_number':310,'multiline':False]['text':' does not match the view's default collation.','line_number':311,'multiline':False]['text':' You may perform an aggregation involving multiple views if they all have the same default','line_number':334,'multiline':False]['text':' collation.','line_number':335,'multiline':False]['text':' You may perform an aggregation involving multiple views and collections if all the views','line_number':343,'multiline':False]['text':' have the same default collation.','line_number':344,'multiline':False]['text':' You cannot perform an aggregation involving multiple views if the views don't all have','line_number':357,'multiline':False]['text':' the same default collation.','line_number':358,'multiline':False]['text':' You cannot create a view that depends on another view with a different default collation.','line_number':372,'multiline':False]['text':' You cannot modify a view to depend on another view with a different default collation.','line_number':398,'multiline':False]['text':' Views cannot be dropped and recreated with a different collation if other views depend on','line_number':413,'multiline':False]['text':' that view.','line_number':414,'multiline':False]['text':' Views cannot be dropped and recreated with a different collation if other views depend on','line_number':426,'multiline':False]['text':' that view via $lookup or $graphLookup.','line_number':427,'multiline':False]['text':' If two views "A" and "C" have different collations and depend on the namespace "B", then "B"','line_number':448,'multiline':False]['text':' cannot be created as a view.','line_number':449,'multiline':False]['text':' Make sure that when an operation does not specify the collation, it correctly uses the','line_number':467,'multiline':False]['text':' default collation associated with the view. For this, we set up a new backing collection with','line_number':468,'multiline':False]['text':' a case-insensitive view.','line_number':469,'multiline':False]['text':' Test that aggregate against a view with a default collation correctly uses the collation.','line_number':483,'multiline':False]['text':' We expect the pipeline to be optimized away, so there should be no pipeline stages in','line_number':484,'multiline':False]['text':' the explain.','line_number':485,'multiline':False]['text':' Test that count against a view with a default collation correctly uses the collation.','line_number':493,'multiline':False]['text':' When the pipeline planner optimizes the $match to run in SBE, there is no "$cursor" stage,','line_number':501,'multiline':False]['text':' and the explain plan has the collation info at the 'queryPlanner' level.','line_number':502,'multiline':False]['text':' Test that distinct against a view with a default collation correctly uses the collation.','line_number':506,'multiline':False]['text':' Test that find against a view with a default collation correctly uses the collation.','line_number':514,'multiline':False]['text':' We expect the pipeline to be optimized away, so there should be no pipeline stages in','line_number':515,'multiline':False]['text':' the explain output.','line_number':516,'multiline':False]