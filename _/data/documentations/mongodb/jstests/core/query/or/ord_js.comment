['text':' Test the dropping indexes required by an indexed $or causes the query to fail cleanly.','line_number':1,'multiline':False]['text':'','line_number':2,'multiline':False]['text':' @tags: [','line_number':3,'multiline':False]['text':'   requires_getmore,','line_number':4,'multiline':False]['text':'   # An index drop does not necessarily cause cursors to be killed on the secondary.','line_number':5,'multiline':False]['text':'   does_not_support_causal_consistency,','line_number':6,'multiline':False]['text':'   # TODO SERVER-77719: Enable this check for Bonsai.','line_number':7,'multiline':False]['text':'   cqf_experimental_incompatible','line_number':8,'multiline':False]['text':' ]','line_number':9,'multiline':False]['text':' The test scenario relies on the optimizer choosing an index for the query. We can do a','line_number':31,'multiline':False]['text':' preliminary check here, using explain. However, this does not guarantee the query below will use','line_number':32,'multiline':False]['text':' an ixscan, because the chosen plan may not be the same.','line_number':33,'multiline':False]['text':' TODO SERVER-77719: Ensure that the decision for using the scan lines up with CQF','line_number':45,'multiline':False]['text':' optimizer. M2: allow only collscans, M4: check bonsai behavior for index scan.','line_number':46,'multiline':False]['text':' This query should match 180 out of 1180 total documents.','line_number':50,'multiline':False]['text':' At this point, our initial query has ended and there is a cursor waiting to read additional','line_number':56,'multiline':False]['text':' documents from index {b:1}. In between getMores, drop the indexes depended on by the query. The','line_number':57,'multiline':False]['text':' query should fail when the next getMore executes.','line_number':58,'multiline':False]['text':' mongos may have some data left from a previous batch stored in memory, so it might not','line_number':63,'multiline':False]['text':' return an error immediately, but it should eventually.','line_number':64,'multiline':False]['text':' We didn't throw an error yet.','line_number':68,'multiline':False]