['text':'*
 * Tests running the update command on a time-series collection.
 * @tags: [
 *   # This test depends on certain writes ending up in the same bucket. Stepdowns and tenant
 *   # migrations may result in writes splitting between two primaries, and thus different buckets.
 *   does_not_support_stepdowns,
 *   tenant_migration_incompatible,
 *   # Specifically testing multi-updates.
 *   requires_multi_updates,
 *   # We need a timeseries collection.
 *   requires_timeseries,
 * ]
 ','line_number':1,'multiline':True]['text':'*
     * Confirms that a set of updates returns the expected set of documents.
     ','line_number':26,'multiline':True]['text':'*********************************** multi:false updates ***********************************','line_number':83,'multiline':True]['text':'*********************************** multi:true updates ************************************','line_number':94,'multiline':True]['text':'************************* Tests updating with an update document **************************','line_number':95,'multiline':True]['text':' Query on the metaField and modify the metaField.','line_number':96,'multiline':False]['text':' Query on the metaField and modify the metaField.','line_number':108,'multiline':False]['text':' Query on the metaField and modify the metaField of 1 matching document.','line_number':125,'multiline':False]['text':' Query on the metaField and update the metaField of multiple matching documents.','line_number':148,'multiline':False]['text':' Query on a field that is not the metaField.','line_number':196,'multiline':False]['text':' Query on the metaField and modify a field that is not the metaField.','line_number':210,'multiline':False]['text':' Query on the metaField and a field that is not the metaField.','line_number':223,'multiline':False]['text':' Query on the metaField and modify the metaField and fields that are not the metaField.','line_number':238,'multiline':False]['text':' Compound query on the metaField using dot notation and modify the metaField.','line_number':252,'multiline':False]['text':' Query on the metaField using dot notation and modify the metaField.','line_number':264,'multiline':False]['text':' Query on the metaField using dot notation and modify the metaField.','line_number':276,'multiline':False]['text':' Query on a field that is not the metaField using dot notation and modify the metaField.','line_number':293,'multiline':False]['text':' Query with an empty document (i.e update all documents in the collection).','line_number':308,'multiline':False]['text':' Remove the metaField.','line_number':328,'multiline':False]['text':' Rename the metaField.','line_number':340,'multiline':False]['text':' Rename a subfield of the metaField.','line_number':355,'multiline':False]['text':' Rename a subfield of the metaField to something not in the metaField.','line_number':368,'multiline':False]['text':' For all documents that have at least one 2 in its metaField array, update the first 2','line_number':383,'multiline':False]['text':' to be 100 using the positional $ operator.','line_number':384,'multiline':False]['text':' Decrement (i.e. increment by a negative amount) all elements in the metaField array using the','line_number':402,'multiline':False]['text':' positional $[] operator.','line_number':403,'multiline':False]['text':' Remove elements from all metaField arrays that match a condition.','line_number':418,'multiline':False]['text':' Multiple updates, ordered: Remove elements from the metaField array that match a condition,','line_number':433,'multiline':False]['text':' and then add elements to the metaField array.','line_number':434,'multiline':False]['text':' Multiple updates, ordered: Query on the metaField and modify the metaField multiple times.','line_number':449,'multiline':False]['text':' Multiple updates, ordered: Query on the metaField and modify the metaField multiple times.','line_number':489,'multiline':False]['text':' Multiple updates, ordered: Query on the metaField and on a field that is not the metaField.','line_number':532,'multiline':False]['text':' Multiple updates, ordered: Query on the metaField and modify the metaField and a field','line_number':553,'multiline':False]['text':' that is not the metaField using dot notation.','line_number':554,'multiline':False]['text':' Multiple updates, ordered: Query on the metaField and modify a field that is not the','line_number':579,'multiline':False]['text':' metaField using dot notation.','line_number':580,'multiline':False]['text':' Multiple updates, unordered: Query on the metaField and modify a field that is not the','line_number':600,'multiline':False]['text':' metaField using dot notation.','line_number':601,'multiline':False]['text':' Multiple updates, ordered: Modify the metaField, a field that is not the metaField, and','line_number':627,'multiline':False]['text':' the metaField. Only the first update should succeed.','line_number':628,'multiline':False]['text':' Multiple updates, unordered: Modify the metaField, a field that is not the metaField, and','line_number':658,'multiline':False]['text':' the metaField. The first and last updates should succeed.','line_number':659,'multiline':False]['text':' Multiple updates, unordered: Query on the metaField and modify a field that is not the','line_number':690,'multiline':False]['text':' metaField using dot notation.','line_number':691,'multiline':False]['text':' Multiple updates, ordered: Modify the metaField, a field that is not the metaField, and','line_number':717,'multiline':False]['text':' the metaField. Only the first update should succeed.','line_number':718,'multiline':False]['text':' Multiple updates, unordered: Modify the metaField, a field that is not the metaField, and','line_number':748,'multiline':False]['text':' the metaField.','line_number':749,'multiline':False]['text':' Multiple unordered updates on multiple matching documents.','line_number':781,'multiline':False]['text':' Update where one of the matching documents is a no-op update.','line_number':811,'multiline':False]['text':' Query for documents using $jsonSchema with the metaField required.','line_number':830,'multiline':False]['text':' Query for documents using $jsonSchema with the metaField in dot notation required.','line_number':847,'multiline':False]['text':' Query for documents using $jsonSchema with a field that is not the metaField required.','line_number':861,'multiline':False]['text':' Query for documents using $jsonSchema with the metaField required and a required','line_number':879,'multiline':False]['text':' subfield of the metaField with the same name as the metaField.','line_number':880,'multiline':False]['text':' Query for documents using $jsonSchema with the metaField required and an optional field that','line_number':898,'multiline':False]['text':' is not the metaField.','line_number':899,'multiline':False]['text':' Multiple updates, unordered: Modify the metaField of all documents using arrayFilters.','line_number':919,'multiline':False]['text':' Multiple updates, unordered: Modify the metaField of multiple documents using arrayFilters.','line_number':936,'multiline':False]['text':' Query for documents on the metaField with the metaField nested within nested operators.','line_number':1003,'multiline':False]['text':' Updates where upsert:false should not insert a new document when no match is found.','line_number':1025,'multiline':False]['text':' Do the same test case as above but with upsert:true, which should fail.','line_number':1037,'multiline':False]['text':' Variables defined in the let option can only be used in the update if the update is an','line_number':1053,'multiline':False]['text':' pipeline update. Since this update is an update document, the literal name of the variable','line_number':1054,'multiline':False]['text':' will be used in the update instead of the variable's value.','line_number':1055,'multiline':False]['text':'************************* Tests updating with an update pipeline ***********************','line_number':1069,'multiline':True]['text':' Modify the metaField, which should fail since update pipelines are not supported.','line_number':1070,'multiline':False]['text':'*********************** Tests updating with a replacement document *********************','line_number':1086,'multiline':True]['text':' Replace a document to have no metaField, which should fail since updates with replacement','line_number':1087,'multiline':False]['text':' documents are not supported.','line_number':1088,'multiline':False]['text':' Replace a document with an empty document, which should fail since updates with','line_number':1101,'multiline':False]['text':' replacement documents are not supported.','line_number':1102,'multiline':False]['text':'********************** Tests updating a collection with no metaField. *********************','line_number':1116,'multiline':True]['text':' Query on a field which is not the (nonexistent) metaField.','line_number':1117,'multiline':False]['text':' Query on all documents and update them to be empty documents.','line_number':1132,'multiline':False]['text':' Query on all documents and update them to be nonempty documents.','line_number':1146,'multiline':False]['text':'*********************** Tests updating a collection using collation. ***********************','line_number':1161,'multiline':True]['text':' Query on the metaField and modify the metaField using collation with strength level 1.','line_number':1166,'multiline':False]['text':' Query on the metaField and modify the metaField using collation with the default strength','line_number':1183,'multiline':False]['text':' (level 3).','line_number':1184,'multiline':False]