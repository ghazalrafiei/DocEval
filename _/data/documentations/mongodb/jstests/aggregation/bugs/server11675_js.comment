['text':' SERVER-11675 Text search integration with aggregation','line_number':1,'multiline':False]['text':' query should have subfields query, project, sort, skip and limit. All but query are optional.','line_number':14,'multiline':False]['text':' no way to add to constructed cursor','line_number':20,'multiline':False]['text':' If the query doesn't specify its own sort, there is a possibility that find() and','line_number':42,'multiline':False]['text':' aggregate() will return the same results in different orders. We sort by _id on the','line_number':43,'multiline':False]['text':' client side, so that the results still count as equal.','line_number':44,'multiline':False]['text':' sanity check','line_number':57,'multiline':False]['text':' $meta sort specification should be rejected if it has additional keys.','line_number':89,'multiline':False]['text':' $meta sort specification should be rejected if the type of meta sort is not known.','line_number':98,'multiline':False]['text':' Sort specification should be rejected if a $-keyword other than $meta is used.','line_number':107,'multiline':False]['text':' Sort specification should be rejected if it is a string, not an object with $meta.','line_number':116,'multiline':False]['text':' sharded find requires projecting the score to sort, but sharded agg does not.','line_number':123,'multiline':False]['text':' remove it to match agg output','line_number':127,'multiline':False]['text':' Make sure {$meta: 'textScore'} can be used as a sub-expression','line_number':137,'multiline':False]['text':' And can be used in $group','line_number':151,'multiline':False]['text':' Make sure metadata crosses shard -> merger boundary','line_number':159,'multiline':False]['text':' force a split. later stages run on merger','line_number':163,'multiline':False]['text':' save for later tests','line_number':168,'multiline':False]['text':' Make sure metadata crosses shard -> merger boundary even if not used on shard','line_number':170,'multiline':False]['text':' force a split. later stages run on merger','line_number':173,'multiline':False]['text':' Make sure metadata works if first $project doesn't use it.','line_number':179,'multiline':False]['text':' Make sure the pipeline fails if it tries to reference the text score and it doesn't exist.','line_number':188,'multiline':False]['text':' Make sure the metadata is 'missing()' when it doesn't exist because the document changed','line_number':193,'multiline':False]['text':' Make sure metadata works after a $unwind','line_number':202,'multiline':False]['text':' Error checking','line_number':213,'multiline':False]['text':' $match, but wrong position','line_number':214,'multiline':False]['text':' wrong $stage, but correct position','line_number':217,'multiline':False]