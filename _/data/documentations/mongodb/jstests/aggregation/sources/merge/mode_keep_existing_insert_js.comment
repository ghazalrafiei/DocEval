['text':' Tests the behaviour of the $merge stage with whenMatched=keepExisting and whenNotMatched=insert.','line_number':1,'multiline':False]['text':'','line_number':2,'multiline':False]['text':' Cannot implicitly shard accessed collections because a collection can be implictly created and','line_number':3,'multiline':False]['text':' exists when none is expected.','line_number':4,'multiline':False]['text':' Test $merge into a non-existent collection.','line_number':18,'multiline':False]['text':' Test $merge into an existing collection.','line_number':30,'multiline':False]['text':' Test $merge does not update documents in the target collection if they were not modified','line_number':40,'multiline':False]['text':' in the source collection.','line_number':41,'multiline':False]['text':' Test $merge doesn't update documents in the target collection if they were modified in the','line_number':50,'multiline':False]['text':' source collection.','line_number':51,'multiline':False]['text':' Update and merge a single document.','line_number':53,'multiline':False]['text':' Update and merge multiple documents.','line_number':61,'multiline':False]['text':' Test $merge inserts a new document into the target collection if it was inserted into the','line_number':71,'multiline':False]['text':' source collection.','line_number':72,'multiline':False]['text':' Insert and merge a single document.','line_number':74,'multiline':False]['text':' Insert and merge multiple documents.','line_number':84,'multiline':False]['text':' Test $merge doesn't modify the target collection if a document has been removed from the','line_number':101,'multiline':False]['text':' source collection.','line_number':102,'multiline':False]['text':' Test $merge fails if a unique index constraint in the target collection is violated.','line_number':115,'multiline':False]['text':' Skip this test if the collection sharded, because an implicitly created sharded','line_number':118,'multiline':False]['text':' key of {_id: 1} will not be covered by a unique index created in this test, which','line_number':119,'multiline':False]['text':' is not allowed.','line_number':120,'multiline':False]['text':' Test $merge fails if it cannot find an index to verify that the 'on' fields will be unique.','line_number':139,'multiline':False]['text':' The 'on' fields contains a single document field.','line_number':141,'multiline':False]['text':' The 'on' fields contains multiple document fields.','line_number':146,'multiline':False]['text':' Test $merge with an explicit 'on' field over a single or multiple document fields which','line_number':153,'multiline':False]['text':' differ from the _id field.','line_number':154,'multiline':False]['text':' Skip this test if the collection sharded, because an implicitly created sharded','line_number':157,'multiline':False]['text':' key of {_id: 1} will not be covered by a unique index created in this test, which','line_number':158,'multiline':False]['text':' is not allowed.','line_number':159,'multiline':False]['text':' The 'on' fields contains a single document field.','line_number':163,'multiline':False]['text':' The 'on' fields contains multiple document fields.','line_number':186,'multiline':False]['text':' Test $merge with a dotted path in the 'on' field.','line_number':212,'multiline':False]['text':' Skip this test if the collection sharded, because an implicitly created sharded','line_number':215,'multiline':False]['text':' key of {_id: 1} will not be covered by a unique index created in this test, which','line_number':216,'multiline':False]['text':' is not allowed.','line_number':217,'multiline':False]['text':' Test $merge fails if the value of the 'on' field in a document is invalid, e.g. missing,','line_number':242,'multiline':False]['text':' null or an array.','line_number':243,'multiline':False]['text':' Skip this test if the collection sharded, because an implicitly created sharded','line_number':246,'multiline':False]['text':' key of {_id: 1} will not be covered by a unique index created in this test, which','line_number':247,'multiline':False]['text':' is not allowed.','line_number':248,'multiline':False]['text':' The 'on' field is missing.','line_number':257,'multiline':False]['text':' The 'on' field is null.','line_number':264,'multiline':False]['text':' The 'on' field is an array.','line_number':271,'multiline':False]['text':' Test $merge when the _id field is removed from the aggregate projection but is used in the','line_number':279,'multiline':False]['text':' $merge's 'on' field.','line_number':280,'multiline':False]['text':' The _id is a single 'on' field (a default one).','line_number':282,'multiline':False]['text':' Remove the _id field from the projection as the arrayEq function cannot ignore','line_number':289,'multiline':False]['text':' mismatches in the ObjectId. The target collection should contain all elements from','line_number':290,'multiline':False]['text':' the source and the target even though they had the same _id's and would have been','line_number':291,'multiline':False]['text':' merged should we not remove the _id field from the aggregate projection.','line_number':292,'multiline':False]['text':' The _id is part of the compound 'on' field.','line_number':297,'multiline':False]['text':' Remove the _id field from the projection as the arrayEq function cannot ignore','line_number':307,'multiline':False]['text':' mismatches in the ObjectId. The target collection should contain all elements from','line_number':308,'multiline':False]['text':' the source and the target even though they had the same _id's and would have been','line_number':309,'multiline':False]['text':' merged should we not remove the _id field from the aggregate projection.','line_number':310,'multiline':False]['text':' Test $merge preserves indexes and options of the existing target collection.','line_number':318,'multiline':False]['text':' Test $merge implicitly creates a new database when the target collection's database doesn't','line_number':336,'multiline':False]['text':' exist.','line_number':337,'multiline':False]['text':' Implicit database creation is prohibited in a cluster.','line_number':360,'multiline':False]['text':' Force a creation of the database and collection, then fall through the test below.','line_number':364,'multiline':False]