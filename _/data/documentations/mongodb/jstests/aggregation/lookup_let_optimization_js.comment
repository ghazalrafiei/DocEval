['text':'*
 * This test ensures that stages dependent on a let variable optimizing to a constant in a $lookup
 * pipeline are evaluated correctly.
 * @tags: [
 *   requires_pipeline_optimization,
 *   not_allowed_with_signed_security_token,
 * ]
 ','line_number':1,'multiline':True]['text':' Verify results when pipeline optimization is disabled.','line_number':29,'multiline':False]['text':' Verify results when pipeline optimization is enabled.','line_number':33,'multiline':False]['text':' Get initial optimization mode.','line_number':38,'multiline':False]['text':' Verify $redact.','line_number':44,'multiline':False]['text':' Expect that documents were pruned.','line_number':57,'multiline':False]['text':' Expect that $redact descended instead.','line_number':58,'multiline':False]['text':' Verify $unionWith.','line_number':65,'multiline':False]['text':' $unionWith should match and include only the document with {test: true} in 'united'.','line_number':81,'multiline':False]['text':' $unionWith should match and include only the document with {test: false} in 'united'.','line_number':87,'multiline':False]['text':' Reset optimization mode.','line_number':96,'multiline':False]