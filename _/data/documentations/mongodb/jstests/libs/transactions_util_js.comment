['text':'*
 * Utilities for testing transactions.
 ','line_number':1,'multiline':True]['text':' Although createCollection and createIndexes are supported inside multi-document','line_number':7,'multiline':False]['text':' transactions, we intentionally exclude them from this list since they are non-','line_number':8,'multiline':False]['text':' idempotent and, for createIndexes, are not supported inside multi-document','line_number':9,'multiline':False]['text':' transactions for all cases.','line_number':10,'multiline':False]['text':' Indicates an aggregation command with a pipeline that cannot run in a transaction but can','line_number':32,'multiline':False]['text':' still execute concurrently with other transactions. Pipelines with $changeStream or $out','line_number':33,'multiline':False]['text':' cannot run within a transaction.','line_number':34,'multiline':False]['text':' bulkWrite always operates on the admin DB so cannot check the dbName directly.','line_number':50,'multiline':False]['text':' Operating namespaces are also contained within a 'nsInfo' array in the command.','line_number':51,'multiline':False]['text':' 'nsInfo' does not exist in command.','line_number':53,'multiline':False]['text':' Loop through 'nsInfo'.','line_number':58,'multiline':False]['text':' Make sure no namespaces are system. collections','line_number':67,'multiline':False]['text':' Make a deep copy of an object for retrying transactions. We make deep copies of object and','line_number':103,'multiline':False]['text':' array literals but not custom types like DB and DBCollection because they could have been','line_number':104,'multiline':False]['text':' modified before a transaction aborts. This function is adapted from the implementation of','line_number':105,'multiline':False]['text':' Object.extend() in src/mongo/shell/types.js.','line_number':106,'multiline':False]['text':' convert ObjectId properly','line_number':111,'multiline':False]['text':' convert NumberLong properly','line_number':113,'multiline':False]['text':' convert Date properly','line_number':115,'multiline':False]['text':' convert Timestamp properly','line_number':117,'multiline':False]['text':' Runs a function 'func()' in a transaction on database 'db'. Invokes function','line_number':137,'multiline':False]['text':' 'beforeTransactionFunc()' before the transaction (can be used to get references to','line_number':138,'multiline':False]['text':' collections etc.). Ensures that the transaction is successfully committed, by retrying the','line_number':139,'multiline':False]['text':' function 'func' in case of the transaction being aborted until the timeout is hit.','line_number':140,'multiline':False]['text':'','line_number':141,'multiline':False]['text':' Function 'beforeTransactionFunc(db, session)' accepts database in session 'db' and the','line_number':142,'multiline':False]['text':' session 'session'.','line_number':143,'multiline':False]['text':' Function 'func(db, state)' accepts database in session 'db' and an object returned by','line_number':144,'multiline':False]['text':' 'beforeTransactionFunc()' - 'state'.','line_number':145,'multiline':False]['text':' 'transactionOptions' - parameters for the transaction.','line_number':146,'multiline':False]