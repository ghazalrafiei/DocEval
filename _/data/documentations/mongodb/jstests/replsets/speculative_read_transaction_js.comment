['text':'*
 * Test that read-only transactions are executed speculatively, and that once they are committed
 * with a majority write concern, the data read is indeed majority-committed.
 *
 * @tags: [uses_transactions, requires_majority_read_concern]
 ','line_number':1,'multiline':True]['text':' The default WC is majority and stopServerReplication will prevent satisfying any majority writes.','line_number':20,'multiline':False]['text':' Do an initial write so we have something to update.','line_number':27,'multiline':False]['text':' Stop replication on the secondary so the majority commit never moves forward.','line_number':31,'multiline':False]['text':' Do a local update in another client.','line_number':34,'multiline':False]['text':' The transaction should see this, due to speculative behavior.','line_number':35,'multiline':False]['text':' Initiate a session on the primary.','line_number':39,'multiline':False]['text':' Abort does not wait for write concern.','line_number':44,'multiline':False]['text':' This transaction should complete because it does not use majority write concern.','line_number':50,'multiline':False]['text':' This transaction should not complete because it uses snapshot read concern, majority','line_number':56,'multiline':False]['text':' write concern and the commit point is not advancing.','line_number':57,'multiline':False]['text':' Allow the majority commit point to advance to allow the failed write concern to clear.','line_number':65,'multiline':False]['text':' Do another local update from another client','line_number':70,'multiline':False]['text':' This transaction should not complete because it uses local read concern upconverted to','line_number':73,'multiline':False]['text':' snapshot.','line_number':74,'multiline':False]['text':' TODO(SERVER-34881): Once default read concern is speculative majority, local read','line_number':75,'multiline':False]['text':'                     concern should not wait for the majority commit point to advance.','line_number':76,'multiline':False]['text':' Allow the majority commit point to advance to allow the failed write concern to clear.','line_number':84,'multiline':False]['text':' Do another local update from another client','line_number':89,'multiline':False]['text':' This transaction should not complete because it uses majority read concern, majority','line_number':92,'multiline':False]['text':' write concern, and the commit point is not advancing.','line_number':93,'multiline':False]['text':' Restart server replication to allow majority commit point to advance.','line_number':101,'multiline':False]