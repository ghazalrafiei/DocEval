['text':' All collections created during a map-reduce should be replicated to secondaries unless they are','line_number':1,'multiline':False]['text':' in the "local" or "admin" databases. Any collection outside of "local" that does not get','line_number':2,'multiline':False]['text':' replicated is a potential problem for workloads with transactions (see SERVER-35365 and','line_number':3,'multiline':False]['text':' SERVER-35282).','line_number':4,'multiline':False]['text':'','line_number':5,'multiline':False]['text':' We verify this requirement by running a map-reduce, examining the logs to find the names of','line_number':6,'multiline':False]['text':' all collections created, and checking the oplog for entries logging the creation of each of those','line_number':7,'multiline':False]['text':' collections.','line_number':8,'multiline':False]['text':' Insert 1000 documents in the "test" collection.','line_number':22,'multiline':False]['text':' Run a simple map-reduce.','line_number':30,'multiline':False]['text':' Examine the logs to find a list of created collections.','line_number':41,'multiline':False]['text':' Although the "admin.system.version" collection is replicated, no "c" entry gets','line_number':53,'multiline':False]['text':' created for it in the oplog, so this test would see it as unreplicated. In general,','line_number':54,'multiline':False]['text':' this test is not concerned with the "admin" database, so we don't examine any "admin"','line_number':55,'multiline':False]['text':' collections.','line_number':56,'multiline':False]['text':' Search for a log entry for the creation of this collection.','line_number':64,'multiline':False]['text':' We do not want to see any replication of "local" collections.','line_number':70,'multiline':False]