['text':'*
 * This test simulates initial sync workflows which are performed by the Atlas automation agent.
 ','line_number':1,'multiline':True]['text':' Set up a standard 3-node replica set.  Note the two secondaries are priority 0; this is','line_number':7,'multiline':False]['text':' different than the real Atlas configuration where the secondaries would be electable.','line_number':8,'multiline':False]['text':' We shorten the election timeout period so the tests with an unhealthy set run and recover','line_number':13,'multiline':False]['text':' faster.','line_number':14,'multiline':False]['text':' Add some data.','line_number':19,'multiline':False]['text':' Wait for the set to become unhealthy.','line_number':31,'multiline':False]['text':' Atlas always adds nodes with 0 votes and priority','line_number':34,'multiline':False]['text':' The second disconnect ensures we can't reach the new node from the 'down' nodes.','line_number':36,'multiline':False]['text':' Make sure we can replicate to it.  This only works if the set was healthy, otherwise we','line_number':55,'multiline':False]['text':' can't.','line_number':56,'multiline':False]['text':' Make sure the set is still consistent after adding the node.','line_number':62,'multiline':False]['text':' If we were in a majority-down scenario, wait for the primary to be re-elected.','line_number':64,'multiline':False]['text':' Remove our extra node.','line_number':69,'multiline':False]['text':' Wait for existing reconfigs to complete.','line_number':76,'multiline':False]['text':' Wait for the set to become unhealthy.','line_number':83,'multiline':False]['text':' Add some data.  We skip this if we have disconnected any nodes, since we may lose the','line_number':90,'multiline':False]['text':' majority, and thus the primary, if we have one node disconnected and another node','line_number':91,'multiline':False]['text':' stopped.','line_number':92,'multiline':False]['text':' restart ','line_number':98,'multiline':True]['text':' We can't use awaitSecondaryNodes because the set might not be healthy.','line_number':99,'multiline':False]['text':' Make sure we can replicate to it, if the set is otherwise healthy.','line_number':103,'multiline':False]['text':' Make sure the set is still consistent after resyncing the node.','line_number':106,'multiline':False]['text':' If we were in a majority-down scenario, wait for the primary to be re-elected.','line_number':108,'multiline':False]['text':' Wait for the node to to become secondary.','line_number':126,'multiline':False]