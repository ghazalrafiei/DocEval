['text':' Test oplog queries that can be optimized with oplogReplay.','line_number':1,'multiline':False]['text':' @tags: [requires_replication, requires_capped]','line_number':2,'multiline':False]['text':'*
 * Helper function for making timestamps with the property that if i < j, then makeTS(i) <
 * makeTS(j).
 ','line_number':13,'multiline':True]['text':' The first object is just a dummy element in order to make both index and id match in the tests','line_number':25,'multiline':False]['text':' and avoid off-by-1 errors','line_number':26,'multiline':False]['text':' A $gt query on just the 'ts' field should return the next document after the timestamp.','line_number':38,'multiline':False]['text':' A $gte query on the 'ts' field should include the timestamp.','line_number':43,'multiline':False]['text':' An $eq query on the 'ts' field should return the single record with the timestamp.','line_number':48,'multiline':False]['text':' An AND with both a $gt and $lt query on the 'ts' field will correctly return results in','line_number':53,'multiline':False]['text':' the proper bounds.','line_number':54,'multiline':False]['text':' An AND with multiple predicates on the 'ts' field correctly returns results on the','line_number':61,'multiline':False]['text':' tightest range.','line_number':62,'multiline':False]['text':' An AND with an $eq predicate in conjunction with other bounds correctly returns one','line_number':77,'multiline':False]['text':' result.','line_number':78,'multiline':False]['text':' An $eq query stops scanning after passing the max timestamp.','line_number':92,'multiline':False]['text':' We expect to be able to seek directly to the entry with a 'ts' of 10.','line_number':95,'multiline':False]['text':' An AND with an $lt predicate stops scanning after passing the max timestamp.','line_number':101,'multiline':False]['text':' An AND with an $lte predicate stops scanning after passing the max timestamp.','line_number':111,'multiline':False]['text':' The max timestamp is respected even when the min timestamp is smaller than the lowest','line_number':121,'multiline':False]['text':' timestamp in the collection.','line_number':122,'multiline':False]['text':' An AND with redundant $eq/$lt/$lte predicates stops scanning after passing the max','line_number':130,'multiline':False]['text':' timestamp.','line_number':131,'multiline':False]['text':' We expect to be able to seek directly to the entry with a 'ts' of 5.','line_number':144,'multiline':False]['text':' An $eq query for a non-existent timestamp scans a single oplog document.','line_number':150,'multiline':False]['text':' We expect to be able to seek directly to the end of the oplog.','line_number':153,'multiline':False]['text':' When the filter matches the last document within the timestamp range, the collection scan','line_number':158,'multiline':False]['text':' examines at most one more document.','line_number':159,'multiline':False]['text':' We expect to be able to seek directly to the start of the 'ts' range.','line_number':163,'multiline':False]['text':' A filter with only an upper bound predicate on 'ts' stops scanning after','line_number':168,'multiline':False]['text':' passing the max timestamp.','line_number':169,'multiline':False]['text':' Oplog replay optimization should work with projection.','line_number':176,'multiline':False]['text':' Oplog replay optimization should work with limit.','line_number':195,'multiline':False]['text':' A query over both 'ts' and '_id' should only pay attention to the 'ts' field for finding','line_number':204,'multiline':False]['text':' the oplog start (SERVER-13566).','line_number':205,'multiline':False]['text':' 'oplogreplay' flag is allowed but ignored on the oplog collection.','line_number':210,'multiline':False]['text':' 'oplogreplay' flag is allowed but ignored on capped collections.','line_number':213,'multiline':False]['text':' Ensure oplog replay hack does not work for backward scans.','line_number':226,'multiline':False]