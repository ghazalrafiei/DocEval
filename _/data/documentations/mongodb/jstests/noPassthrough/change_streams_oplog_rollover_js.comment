['text':' Tests the behaviour of change streams on an oplog which rolls over.','line_number':1,'multiline':False]['text':' @tags: [','line_number':2,'multiline':False]['text':'   requires_replication,','line_number':3,'multiline':False]['text':'   requires_majority_read_concern,','line_number':4,'multiline':False]['text':'   uses_change_streams,','line_number':5,'multiline':False]['text':' ]','line_number':6,'multiline':False]['text':' size in MB','line_number':10,'multiline':False]['text':' Write a document to the test collection.','line_number':21,'multiline':False]['text':' We awaited the replication of the insert, so the change stream shouldn't return them.','line_number':27,'multiline':False]['text':' Record current time to resume a change stream later in the test.','line_number':30,'multiline':False]['text':' Test that we see the the update, and remember its resume tokens.','line_number':35,'multiline':False]['text':' Write some additional documents, then test we can resume after the first update.','line_number':41,'multiline':False]['text':' Test that the change stream can see additional inserts into the collection.','line_number':55,'multiline':False]['text':' Confirm that we can begin a stream at a timestamp that precedes the start of the oplog, if','line_number':63,'multiline':False]['text':' the first entry in the oplog is the replica set initialization message.','line_number':64,'multiline':False]['text':' The first entry we see should be the initial insert into the collection.','line_number':75,'multiline':False]['text':' Test that the stream can't resume if the resume token is no longer present in the oplog.','line_number':80,'multiline':False]['text':' Roll over the entire oplog such that none of the events are still present.','line_number':82,'multiline':False]['text':' The oplog has rolled over if the op that used to be newest is now older than the','line_number':89,'multiline':False]['text':' oplog's current oldest entry. Said another way, the oplog is rolled over when','line_number':90,'multiline':False]['text':' everything in the oplog is newer than what used to be the newest entry.','line_number':91,'multiline':False]['text':' Confirm that attempting to continue reading an existing change stream throws CappedPositionLost.','line_number':100,'multiline':False]['text':' Now confirm that attempting to resumeAfter or startAtOperationTime fails.','line_number':105,'multiline':False]['text':' We also can't start a stream from the "dawn of time" any more, since the first entry in the','line_number':120,'multiline':False]['text':' oplog is no longer the replica set initialization message.','line_number':121,'multiline':False]