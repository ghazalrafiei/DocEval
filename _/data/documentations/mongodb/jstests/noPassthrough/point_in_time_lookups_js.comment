['text':'*
 * Tests the expected point-in-time lookup behaviour.
 *
 * @tags: [
 *     requires_persistence,
 *     requires_replication,
 *     requires_fcv_70,
 * ]
 ','line_number':1,'multiline':True]['text':' Set the history window to 1 hour to prevent the oldest timestamp from advancing. This','line_number':14,'multiline':False]['text':' is necessary to avoid removing data files across restarts for this test.','line_number':15,'multiline':False]['text':' Exercise yielding and restoring point-in-time collections.','line_number':17,'multiline':False]['text':' Set the history window to 1 hour to prevent the oldest timestamp from advancing.','line_number':33,'multiline':False]['text':' This is necessary to avoid removing data files across restarts for this test.','line_number':34,'multiline':False]['text':' restart ','line_number':38,'multiline':True]['text':' The write concern guarantees the stable and oldest timestamp are bumped.','line_number':54,'multiline':False]['text':' Insert a document in an unused collection to obtain a timestamp before creating the collection','line_number':82,'multiline':False]['text':' used for the test.','line_number':83,'multiline':False]['text':' Create an index and drop it immediately.','line_number':111,'multiline':False]['text':' Point-in-time reads on a collection before it was created should have like reading from a','line_number':117,'multiline':False]['text':' non-existent collection.','line_number':118,'multiline':False]['text':'withIndex=','line_number':119,'multiline':True]['text':'numDocs=','line_number':119,'multiline':True]['text':'withIndex=','line_number':120,'multiline':True]['text':'numDocs=','line_number':120,'multiline':True]['text':'withIndex=','line_number':121,'multiline':True]['text':'numDocs=','line_number':121,'multiline':True]['text':'withIndex=','line_number':122,'multiline':True]['text':'numDocs=','line_number':122,'multiline':True]['text':' Reading at 'createTS' from the original collection should not find any document yet.','line_number':126,'multiline':False]['text':' Using the index at this point returns BadValue from hint as it does not exist yet.','line_number':127,'multiline':False]['text':'withIndex=','line_number':128,'multiline':True]['text':'numDocs=','line_number':128,'multiline':True]['text':'withIndex=','line_number':130,'multiline':True]['text':'numDocs=','line_number':132,'multiline':True]['text':'expectedError=','line_number':133,'multiline':True]['text':' Reading at 'createTS' from the renamed collection should not find any document as it was','line_number':135,'multiline':False]['text':' non-existent.','line_number':136,'multiline':False]['text':'withIndex=','line_number':137,'multiline':True]['text':'numDocs=','line_number':137,'multiline':True]['text':'withIndex=','line_number':138,'multiline':True]['text':'numDocs=','line_number':138,'multiline':True]['text':' Reading at 'firstInsertTS' from the original collection should find a document. Using the','line_number':142,'multiline':False]['text':' index at this point returns BadValue from hint as it does not exist yet.','line_number':143,'multiline':False]['text':'withIndex=','line_number':144,'multiline':True]['text':'numDocs=','line_number':144,'multiline':True]['text':'withIndex=','line_number':146,'multiline':True]['text':'numDocs=','line_number':148,'multiline':True]['text':'expectedError=','line_number':149,'multiline':True]['text':' Reading at 'firstInsertTS' from the renamed collection should not find any document as it','line_number':151,'multiline':False]['text':' was non-existent.','line_number':152,'multiline':False]['text':'withIndex=','line_number':153,'multiline':True]['text':'numDocs=','line_number':153,'multiline':True]['text':'withIndex=','line_number':154,'multiline':True]['text':'numDocs=','line_number':154,'multiline':True]['text':' Reading at 'indexTS' from the original collection should find a document. This includes','line_number':158,'multiline':False]['text':' with the index as it now exists.','line_number':159,'multiline':False]['text':'withIndex=','line_number':160,'multiline':True]['text':'numDocs=','line_number':160,'multiline':True]['text':'withIndex=','line_number':161,'multiline':True]['text':'numDocs=','line_number':161,'multiline':True]['text':' Reading at 'indexTS' from the renamed collection should not find any document as it was','line_number':163,'multiline':False]['text':' non-existent.','line_number':164,'multiline':False]['text':'withIndex=','line_number':165,'multiline':True]['text':'numDocs=','line_number':165,'multiline':True]['text':'withIndex=','line_number':166,'multiline':True]['text':'numDocs=','line_number':166,'multiline':True]['text':' Reading at 'secondInsertTS' from the original collection should find two documents. This','line_number':170,'multiline':False]['text':' includes with the index as it now exists.','line_number':171,'multiline':False]['text':'withIndex=','line_number':172,'multiline':True]['text':'numDocs=','line_number':172,'multiline':True]['text':'withIndex=','line_number':173,'multiline':True]['text':'numDocs=','line_number':173,'multiline':True]['text':' Reading at 'secondInsertTS' from the renamed collection should not find any document as','line_number':175,'multiline':False]['text':' it was non-existent.','line_number':176,'multiline':False]['text':'withIndex=','line_number':177,'multiline':True]['text':'numDocs=','line_number':177,'multiline':True]['text':'withIndex=','line_number':178,'multiline':True]['text':'numDocs=','line_number':178,'multiline':True]['text':' Reading at 'renameTS' from the original collection should not find any document as it was','line_number':182,'multiline':False]['text':' non-existent at this time.','line_number':183,'multiline':False]['text':'withIndex=','line_number':184,'multiline':True]['text':'numDocs=','line_number':184,'multiline':True]['text':'withIndex=','line_number':185,'multiline':True]['text':'numDocs=','line_number':185,'multiline':True]['text':' Reading at 'renameTS' from the renamed collection should find two documents. This','line_number':187,'multiline':False]['text':' includes with the index as it now exists.','line_number':188,'multiline':False]['text':'withIndex=','line_number':189,'multiline':True]['text':'numDocs=','line_number':189,'multiline':True]['text':'withIndex=','line_number':190,'multiline':True]['text':'numDocs=','line_number':190,'multiline':True]['text':' Reading at 'dropTS' from the original collection should not find any document as it was','line_number':194,'multiline':False]['text':' non-existent at this time.','line_number':195,'multiline':False]['text':'withIndex=','line_number':196,'multiline':True]['text':'numDocs=','line_number':196,'multiline':True]['text':'withIndex=','line_number':197,'multiline':True]['text':'numDocs=','line_number':197,'multiline':True]['text':' Reading at 'dropTS' from the renamed collection should not find any document as it was','line_number':199,'multiline':False]['text':' non-existent at this time.','line_number':200,'multiline':False]['text':'withIndex=','line_number':201,'multiline':True]['text':'numDocs=','line_number':201,'multiline':True]['text':'withIndex=','line_number':202,'multiline':True]['text':'numDocs=','line_number':202,'multiline':True]['text':' Reading at 'recreatedTS' from the original collection should not find any document yet.','line_number':206,'multiline':False]['text':' Using the index at this point returns BadValue from hint as it does not exist yet.','line_number':207,'multiline':False]['text':'withIndex=','line_number':208,'multiline':True]['text':'numDocs=','line_number':208,'multiline':True]['text':'withIndex=','line_number':210,'multiline':True]['text':'numDocs=','line_number':212,'multiline':True]['text':'expectedError=','line_number':213,'multiline':True]['text':' Reading at 'recreatedTS' from the renamed collection should not find any document as it','line_number':215,'multiline':False]['text':' was non-existent.','line_number':216,'multiline':False]['text':'withIndex=','line_number':217,'multiline':True]['text':'numDocs=','line_number':217,'multiline':True]['text':'withIndex=','line_number':218,'multiline':True]['text':'numDocs=','line_number':218,'multiline':True]['text':' Reading at 'thirdInsertTS' from the original collection should find a document. Using the','line_number':222,'multiline':False]['text':' index at this point returns BadValue from hint as it does not exist yet.','line_number':223,'multiline':False]['text':'withIndex=','line_number':224,'multiline':True]['text':'numDocs=','line_number':224,'multiline':True]['text':'withIndex=','line_number':226,'multiline':True]['text':'numDocs=','line_number':228,'multiline':True]['text':'expectedError=','line_number':229,'multiline':True]['text':' Reading at 'thirdInsertTS' from the renamed collection should not find any document as it','line_number':231,'multiline':False]['text':' was non-existent.','line_number':232,'multiline':False]['text':'withIndex=','line_number':233,'multiline':True]['text':'numDocs=','line_number':233,'multiline':True]['text':'withIndex=','line_number':234,'multiline':True]['text':'numDocs=','line_number':234,'multiline':True]['text':' Reading at 'createIndexTS' will instantiate a collection and we should be able to use the','line_number':238,'multiline':False]['text':' index that was dropped in the future.','line_number':239,'multiline':False]['text':'withIndex=','line_number':240,'multiline':True]['text':'numDocs=','line_number':240,'multiline':True]['text':'withIndex=','line_number':241,'multiline':True]['text':'numDocs=','line_number':241,'multiline':True]['text':' Reading at 'dropIndexTS' will prevent us from using the index.','line_number':243,'multiline':False]['text':'withIndex=','line_number':245,'multiline':True]['text':'numDocs=','line_number':247,'multiline':True]['text':'expectedError=','line_number':248,'multiline':True]['text':'withIndex=','line_number':249,'multiline':True]['text':'numDocs=','line_number':249,'multiline':True]['text':' Take a checkpoint and restart the node.','line_number':255,'multiline':False]['text':' We expect the same results after a restart.','line_number':259,'multiline':False]