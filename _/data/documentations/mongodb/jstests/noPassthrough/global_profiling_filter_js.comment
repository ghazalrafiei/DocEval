['text':'
 * Test the usage and behavior of the 'setProfilingFilterGlobally' command.
 *
 * @tags: [requires_sharding, requires_replication]
 ','line_number':1,'multiline':True]['text':' Updates the global profiling filter to 'newFilter' and validates that 'oldFilter' is returned in','line_number':9,'multiline':False]['text':' the response and the change is logged correctly. If `newFilter' is null, unsets the filter.','line_number':10,'multiline':False]['text':' First make sure we can't run the command with the query knob turned off.','line_number':26,'multiline':False]['text':' Test that setting the global filter overrides the startup configuration.','line_number':34,'multiline':False]['text':' Run a set of correctness tests for the setProfilingFilterGlobally command on the given','line_number':49,'multiline':False]['text':' connection.','line_number':50,'multiline':False]['text':' mongoS supports slow-query log lines but not profiling. So if we are talking to mongoS, we','line_number':52,'multiline':False]['text':' will avoid enabling profiling, or making assertions about profiling.','line_number':53,'multiline':False]['text':' Fully enable profiling to start.','line_number':63,'multiline':False]['text':' Initialize each database with some basic data and set the profiling level.','line_number':67,'multiline':False]['text':' Test queries to run.','line_number':72,'multiline':False]['text':' Profile filters matching specific test queries.','line_number':79,'multiline':False]['text':' Verify that profile filters are applied as expected for both logging and profiling, if','line_number':83,'multiline':False]['text':' applicable. 'params' must specify three fields:','line_number':84,'multiline':False]['text':'      'desc': short test description','line_number':85,'multiline':False]['text':'      'globalFilter': expected global profiling filter setting','line_number':86,'multiline':False]['text':'      'dbFilters': expected database-specific filter settings','line_number':87,'multiline':False]['text':' Create a unique comment for the query.','line_number':90,'multiline':False]['text':' Check the log for the query's profile entry, and system.profile if this is being run','line_number':95,'multiline':False]['text':' on mongod.','line_number':96,'multiline':False]['text':' First, run the query on the database.','line_number':114,'multiline':False]['text':' Validate whether or not the query was profiled based on the database's','line_number':119,'multiline':False]['text':' profile filter. We should profile *unless* there is a filter applicable to','line_number':120,'multiline':False]['text':' this database that does not match the query.','line_number':121,'multiline':False]['text':' This database has a database specific filter, does it match the query?','line_number':124,'multiline':False]['text':' No database filter, but there is a global filter, does it match the','line_number':127,'multiline':False]['text':' query?','line_number':128,'multiline':False]['text':' Now create a new database and make sure the global settings are applied correctly.','line_number':139,'multiline':False]['text':' Error cases (invalid filters or parameters).','line_number':146,'multiline':False]['text':' Make sure that behavior is as expected in the default/startup state.','line_number':159,'multiline':False]['text':' Empty filter is always true - effectively none.','line_number':166,'multiline':False]['text':' Run tests on mongod.','line_number':261,'multiline':False]['text':' Run tests on mongos.','line_number':268,'multiline':False]