['text':'*
 * Tests that serverStatus contains an indexBuilder section. This section reports
 * globally-aggregated statistics about index builds and the external sorter.
 *
 * @tags: [
 *   requires_persistence,
 *   requires_replication,
 * ]
 ','line_number':1,'multiline':True]['text':' Due to some overhead in the sorter's memory usage while spilling, add a small padding.','line_number':17,'multiline':False]['text':' Due to fragmentation in the allocator, which is counted towards mem usage, we can spill earlier','line_number':51,'multiline':False]['text':' than we would expect.','line_number':52,'multiline':False]['text':'inclusive=','line_number':57,'multiline':True]['text':'inclusive=','line_number':62,'multiline':True]['text':' We write out a single byte for every spilled doc, which is included in the uncompressed size.','line_number':63,'multiline':False]['text':'inclusive=','line_number':68,'multiline':True]['text':' Expect total bytes sorted to be greater than approxMemoryUsage because of the additional field in','line_number':70,'multiline':False]['text':' the documents inserted which accounts for more bytes than in the rough calculation.','line_number':71,'multiline':False]['text':'inclusive=','line_number':77,'multiline':True]['text':'options=','line_number':86,'multiline':True]['text':'nodeId=','line_number':93,'multiline':True]['text':' Even though the amount of index data for b_1 is well under the configured memory usage limit,','line_number':103,'multiline':False]['text':' the resumable index build logic dictates that we spill the sorter data to disk on shutdown','line_number':104,'multiline':False]['text':' and read it back on startup.','line_number':105,'multiline':False]['text':'inclusive=','line_number':113,'multiline':True]['text':' We write out some extra data for every spilled doc, which is included in the','line_number':116,'multiline':False]['text':' uncompressed size.','line_number':117,'multiline':False]['text':'inclusive=','line_number':120,'multiline':True]['text':' We expect initial sync to build at least three indexes for the test collection in addition','line_number':138,'multiline':False]['text':' to indexes for internal collections required for the proper running of the server.','line_number':139,'multiline':False]['text':' The test collection has the only index that will cause the external sorter to spill to disk,','line_number':140,'multiline':False]['text':' so the file descriptor open/closed counters should each report a value of one.','line_number':141,'multiline':False]['text':' We try building two indexes for the test collection so the memory usage limit for each index','line_number':145,'multiline':False]['text':' build during initial sync is the maxIndexBuildMemoryUsageMegabytes divided by the number of index','line_number':146,'multiline':False]['text':' builds. We end up with half of the in-memory memory so we double the amount of spills expected.','line_number':147,'multiline':False]['text':' Due to fragmentation in the allocator, which is counted towards mem usage, we can spill earlier','line_number':149,'multiline':False]['text':' than we would expect.','line_number':150,'multiline':False]['text':'inclusive=','line_number':155,'multiline':True]['text':'inclusive=','line_number':160,'multiline':True]['text':' We write out some extra data for every spilled doc, which is included in the','line_number':163,'multiline':False]['text':' uncompressed size.','line_number':164,'multiline':False]['text':'inclusive=','line_number':167,'multiline':True]['text':' Expect at least all documents in the collection are sorted for three indexes but there may also','line_number':168,'multiline':False]['text':' be internal indexes with additional sorts.','line_number':169,'multiline':False]['text':' We are sorting on index keys and keystring sizes are encoded to its necessary bytes so we are','line_number':171,'multiline':False]['text':' approximating that _id and b will be at least 3 bytes each to account for the integer value, the','line_number':172,'multiline':False]['text':' end byte, and the record id.','line_number':173,'multiline':False]['text':'inclusive=','line_number':180,'multiline':True]['text':' Building multiple indexes in a single createIndex command increases count by the number of','line_number':182,'multiline':False]['text':' indexes requested.','line_number':183,'multiline':False]['text':' The compound index is the only index that will cause the sorter to use the disk because it','line_number':184,'multiline':False]['text':' indexes large values in the field 'a'.','line_number':185,'multiline':False]['text':' The expected values in the server status should add to the numbers at the end of the resumable','line_number':186,'multiline':False]['text':' index build test case.','line_number':187,'multiline':False]['text':'inclusive=','line_number':200,'multiline':True]['text':'inclusive=','line_number':205,'multiline':True]['text':' We write out some extra data for every spilled doc, which is included in the','line_number':208,'multiline':False]['text':' uncompressed size.','line_number':209,'multiline':False]['text':'inclusive=','line_number':212,'multiline':True]['text':' We are sorting on index keys and keystring sizes are encoded to its necessary bytes so we are','line_number':214,'multiline':False]['text':' approximating that _id and b will be at least 3 bytes each to account for the integer value, the','line_number':215,'multiline':False]['text':' end byte, and the record id.','line_number':216,'multiline':False]['text':'inclusive=','line_number':223,'multiline':True]