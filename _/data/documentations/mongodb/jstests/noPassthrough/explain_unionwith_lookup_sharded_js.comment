['text':'*
 * Test that explain of $lookup and $unionWith works correctly when the involved collections are
 * sharded.
 *
 * This test was originally designed to reproduce SERVER-71636.
 ','line_number':1,'multiline':True]['text':' Explain of $lookup when neither collection is sharded.','line_number':37,'multiline':False]['text':' The two documents in the inner collection are scanned twice, leading to four docs examined in','line_number':53,'multiline':False]['text':' total.','line_number':54,'multiline':False]['text':' Explain of $unionWith when neither collection is sharded.','line_number':73,'multiline':False]['text':' Explain of nested $unionWith when neither collection is sharded.','line_number':77,'multiline':False]['text':' Shard the inner collection.','line_number':81,'multiline':False]['text':' shard key ','line_number':84,'multiline':True]['text':' split at ','line_number':85,'multiline':True]['text':' move ','line_number':86,'multiline':True]['text':' Explain of $lookup when outer collection is unsharded and inner collection is sharded.','line_number':90,'multiline':False]['text':' Now that the inner collection is sharded, the execution of the $lookup requires dispatching','line_number':93,'multiline':False]['text':' commands across the wire for the inner collection. The runtime stats currently do not reflect the','line_number':94,'multiline':False]['text':' work done by these dispatched subcommands. We could improve this in the future to more accurately','line_number':95,'multiline':False]['text':' reflect docs examined, keys examined, collection scans, etc accrued when executing the','line_number':96,'multiline':False]['text':' subpipeline.','line_number':97,'multiline':False]['text':' Explain of $unionWith when outer collection is unsharded and inner collection is sharded.','line_number':103,'multiline':False]['text':' The $unionWith explain format currently shows explains for the inner pipeline from both','line_number':106,'multiline':False]['text':' targeted shards.','line_number':107,'multiline':False]['text':' Each shard should have returned one document.','line_number':113,'multiline':False]['text':' Explain of nested $unionWith when outer collection is unsharded and inner collection is sharded.','line_number':117,'multiline':False]['text':' Shard the outer collection.','line_number':121,'multiline':False]['text':' shard key ','line_number':123,'multiline':True]['text':' split at ','line_number':124,'multiline':True]['text':' move ','line_number':125,'multiline':True]['text':' A variant of 'explainStage()' when the stage is expected to appear twice because it runs on','line_number':129,'multiline':False]['text':' two shards.','line_number':130,'multiline':False]['text':' Explain of $lookup when inner and outer collections are both sharded.','line_number':139,'multiline':False]['text':' As above, the inner collection is sharded. We don't currently ship execution stats across the','line_number':143,'multiline':False]['text':' wire alongside the query results themselves. As a result, the docs examined, total keys','line_number':144,'multiline':False]['text':' examined, etc. will currently always be reported as zero when the inner collection is','line_number':145,'multiline':False]['text':' sharded. We could improve this in the future to report the stats more accurately.','line_number':146,'multiline':False]['text':' Asserts that 'explain' is for a split pipeline with an empty shards part and a merger part with','line_number':153,'multiline':False]['text':' two stages. Asserts that the first merging stage is a $mergeCursors and then returns the second','line_number':154,'multiline':False]['text':' stage in the merging pipeline.','line_number':155,'multiline':False]['text':' Explain of $unionWith when inner and outer collections are both sharded. We expect the $unionWith','line_number':175,'multiline':False]['text':' to be part of the merging pipeline rather than pushed down to the shards.','line_number':176,'multiline':False]['text':' Nested $unionWith when inner and outer collections are sharded.','line_number':182,'multiline':False]['text':' Drop and recreate the inner collection. Re-test when the outer collection is sharded but the','line_number':188,'multiline':False]['text':' inner collection is unsharded.','line_number':189,'multiline':False]['text':' Explain of $lookup when outer collection is sharded and inner collection is unsharded. In this','line_number':192,'multiline':False]['text':' case we expect the $lookup operation to execute on the primary shard as part of the merging','line_number':193,'multiline':False]['text':' pipeline.','line_number':194,'multiline':False]['text':' Explain of $unionWith when the outer collection is sharded and the inner collection is unsharded.','line_number':200,'multiline':False]['text':' Nested $unionWith when the outer collection is sharded and the inner collection is unsharded.','line_number':206,'multiline':False]