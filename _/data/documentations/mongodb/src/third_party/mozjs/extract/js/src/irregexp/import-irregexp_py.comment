['text':'!/usr/bin/env python3','line_number':1,'multiline':False]['text':' This Source Code Form is subject to the terms of the Mozilla Public','line_number':3,'multiline':False]['text':' License, v. 2.0. If a copy of the MPL was not distributed with this file,','line_number':4,'multiline':False]['text':' You can obtain one at http://mozilla.org/MPL/2.0/.','line_number':5,'multiline':False]['text':' This script handles all the mechanical steps of importing irregexp from v8:','line_number':7,'multiline':False]['text':'','line_number':8,'multiline':False]['text':' 1. Acquire the source: either from github, or optionally from a local copy of v8.','line_number':9,'multiline':False]['text':' 2. Copy the contents of v8/src/regexp into js/src/irregexp/imported','line_number':10,'multiline':False]['text':'    - Exclude files that we have chosen not to import.','line_number':11,'multiline':False]['text':' 3. While doing so, update #includes:','line_number':12,'multiline':False]['text':'    - Change "src/regexp/*" to "irregexp/imported/*".','line_number':13,'multiline':False]['text':'    - Remove other v8-specific headers completely.','line_number':14,'multiline':False]['text':' 4. Add '#include "irregexp/RegExpShim.h" in the necessary places.','line_number':15,'multiline':False]['text':' 5. Update the IRREGEXP_VERSION file to include the correct git hash.','line_number':16,'multiline':False]['text':'','line_number':17,'multiline':False]['text':' Usage:','line_number':18,'multiline':False]['text':'  cd path/to/js/src/irregexp','line_number':19,'multiline':False]['text':'  ./import-irregexp.py --path path/to/v8/src/regexp','line_number':20,'multiline':False]['text':'','line_number':21,'multiline':False]['text':' Alternatively, without the --path argument, import-irregexp.py will','line_number':22,'multiline':False]['text':' clone v8 from github into a temporary directory.','line_number':23,'multiline':False]['text':'','line_number':24,'multiline':False]['text':' After running this script, changes to the shim code may be necessary','line_number':25,'multiline':False]['text':' to account for changes in upstream irregexp.','line_number':26,'multiline':False]['text':' Get the hash for the current git revision','line_number':36,'multiline':False]['text':' List of header files that need to include the shim header','line_number':46,'multiline':False]['text':' 1. Rewrite includes of V8 regexp headers:','line_number':63,'multiline':False]['text':' 2. Remove includes of other V8 headers','line_number':67,'multiline':False]['text':' 3. If needed, add '#include "irregexp/RegExpShim.h"'.','line_number':70,'multiline':False]['text':'    Note: We get a little fancy to ensure that header files are','line_number':71,'multiline':False]['text':'    in alphabetic order. `need_to_add_shim` is true if we still','line_number':72,'multiline':False]['text':'    have to add the shim header in this file. `adding_shim_now`','line_number':73,'multiline':False]['text':'    is true if we have found a '#include "src/*' and we are just','line_number':74,'multiline':False]['text':'    waiting to find an empty line so that we can insert the shim','line_number':75,'multiline':False]['text':'    header in the right place.','line_number':76,'multiline':False]['text':' Update IRREGEXP_VERSION file','line_number':113,'multiline':False]['text':' This script should be run from js/src/irregexp to work correctly.','line_number':124,'multiline':False]