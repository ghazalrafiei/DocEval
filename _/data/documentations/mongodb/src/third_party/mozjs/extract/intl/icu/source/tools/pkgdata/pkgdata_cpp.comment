['text':' Â© 2016 and later: Unicode, Inc. and others.','line_number':1,'multiline':False]['text':' License & terms of use: http://www.unicode.org/copyright.html','line_number':2,'multiline':False]['text':'*****************************************************************************
 *   Copyright (C) 2000-2016, International Business Machines
 *   Corporation and others.  All Rights Reserved.
 *******************************************************************************
 *   file name:  pkgdata.cpp
 *   encoding:   ANSI X3.4 (1968)
 *   tab size:   8 (not used)
 *   indentation:4
 *
 *   created on: 2000may15
 *   created by: Steven \u24C7 Loomis
 *
 *   This program packages the ICU data into different forms
 *   (DLL, common data, etc.)
 ','line_number':3,'multiline':True]['text':' Defines _XOPEN_SOURCE for access to POSIX functions.','line_number':19,'multiline':False]['text':' Must be before any other #includes.','line_number':20,'multiline':False]['text':' popen/pclose aren't defined in strict ANSI on Cygwin and MinGW ','line_number':30,'multiline':True]['text':' This sets the modes that are available ','line_number':133,'multiline':True]['text':'00','line_number':153,'multiline':True]['text':'01','line_number':154,'multiline':True]['text':' on Win32 it is release or debug ','line_number':154,'multiline':True]['text':'02','line_number':155,'multiline':True]['text':'03','line_number':156,'multiline':True]['text':' -h ','line_number':156,'multiline':True]['text':'04','line_number':157,'multiline':True]['text':' -? ','line_number':157,'multiline':True]['text':'05','line_number':158,'multiline':True]['text':' -v ','line_number':158,'multiline':True]['text':'06','line_number':159,'multiline':True]['text':' -c ','line_number':159,'multiline':True]['text':'07','line_number':160,'multiline':True]['text':'08','line_number':161,'multiline':True]['text':' -d ','line_number':161,'multiline':True]['text':'11','line_number':162,'multiline':True]['text':'12','line_number':163,'multiline':True]['text':'13','line_number':164,'multiline':True]['text':'14','line_number':165,'multiline':True]['text':'15','line_number':166,'multiline':True]['text':'16','line_number':167,'multiline':True]['text':'17','line_number':168,'multiline':True]['text':'18','line_number':169,'multiline':True]['text':'19','line_number':170,'multiline':True]['text':'20','line_number':171,'multiline':True]['text':'21','line_number':172,'multiline':True]['text':'22','line_number':173,'multiline':True]['text':'23','line_number':174,'multiline':True]['text':'24','line_number':175,'multiline':True]['text':' This enum and the following char array should be kept in sync. ','line_number':178,'multiline':True]['text':' FileStream  *out; ','line_number':275,'multiline':True]['text':' char         tmp[1024]; ','line_number':280,'multiline':True]['text':' read command line options ','line_number':290,'multiline':True]['text':' error handling, printing usage message ','line_number':293,'multiline':True]['text':' I've decided to simply print an error and quit. This tool has too
    many options to just display them all of the time. ','line_number':294,'multiline':True]['text':' -O we already have - don't report it. ','line_number':325,'multiline':True]['text':' end !needsHelp ','line_number':338,'multiline':True]['text':' OK, fill in the options struct ','line_number':371,'multiline':True]['text':' get libname from shortname, or explicit -L parameter ','line_number':395,'multiline':True]['text':' on UNIX, we'll just include the file... ','line_number':422,'multiline':True]['text':' cwd ','line_number':438,'multiline':True]['text':' OK options are set up. Now the file lists. ','line_number':481,'multiline':True]['text':' load the files ','line_number':487,'multiline':True]['text':' system() result code is platform specific.','line_number':556,'multiline':False]['text':' Copy the raw data to the installation directory. ','line_number':582,'multiline':True]['text':' if (IN_COMMON_MODE(mode) || IN_DLL_MODE(mode) || IN_STATIC_MODE(mode)) ','line_number':596,'multiline':True]['text':' Move the dat file created to the target directory. ','line_number':627,'multiline':True]['text':' if (IN_STATIC_MODE(mode) || IN_DLL_MODE(mode)) ','line_number':657,'multiline':True]['text':' Get the version major number. ','line_number':663,'multiline':True]['text':' Certain platforms have different library extension ordering. (e.g. libicudata.##.so vs libicudata.so.##)
             * reverseExt is FALSE if the suffix should be the version number.
             ','line_number':680,'multiline':True]['text':' Using the base libName and version number, generate the library file names. ','line_number':687,'multiline':True]['text':' Check to see if a previous built data library file exists and check if it is the latest. ','line_number':691,'multiline':True]['text':' Error occurred. ','line_number':715,'multiline':True]['text':' Offset genccodeAssembly by 3 because "-a " ','line_number':727,'multiline':True]['text':' This error should not occur. ','line_number':764,'multiline':True]['text':' Try to detect the arch type, use NULL if unsuccessful ','line_number':769,'multiline':True]['text':' Certain platforms uses archive library. (e.g. AIX) ','line_number':802,'multiline':True]['text':' Create symbolic links for the final library file. ','line_number':813,'multiline':True]['text':' !IN_STATIC_MODE ','line_number':825,'multiline':True]['text':' Install the libraries if option was set. ','line_number':829,'multiline':True]['text':' Initialize the pkgDataFlags with the option file given. ','line_number':846,'multiline':True]['text':' Initialize pkgdataFlags ','line_number':853,'multiline':True]['text':' If we run out of space, allocate more ','line_number':856,'multiline':True]['text':' If an error occurs, ensure that the rest of the array is NULL ','line_number':867,'multiline':True]['text':' Read in options file. ','line_number':884,'multiline':True]['text':'
 * Given the base libName and version numbers, generate the libary file names and store it in libFileNames.
 * Depending on the configuration, the library name may either end with version number or shared object suffix.
 ','line_number':918,'multiline':True]['text':' MinGW does not need the library prefix when building in dll mode. ','line_number':927,'multiline':True]['text':' Name the import library lib*.dll.a','line_number':947,'multiline':False]['text':' Cygwin and MinGW only deals with the version major number. ','line_number':1027,'multiline':True]['text':' Create the symbolic links for the final library file. ','line_number':1040,'multiline':True]['text':' symlink file name ','line_number':1044,'multiline':True]['text':' file name to symlink ','line_number':1045,'multiline':True]['text':' No symbolic link to make. ','line_number':1049,'multiline':True]['text':' Create the symbolic links for the import data ','line_number':1074,'multiline':True]['text':' Use the cmd buffer to store path to import data file to check its existence ','line_number':1075,'multiline':True]['text':' Needs to be set here because special handling skips it ','line_number':1105,'multiline':True]['text':' Copy commands for installing the raw data files on Windows. ','line_number':1231,'multiline':True]['text':' Remove new line character. ','line_number':1257,'multiline':True]['text':' Archiving of the library file may be needed depending on the platform and options given.
 * If archiving is not needed, copy over the library file name.
 ','line_number':1300,'multiline':True]['text':' If the shared object suffix and the final object suffix is different and the final object suffix and the
     * archive file suffix is the same, then the final library needs to be archived.
     ','line_number':1307,'multiline':True]['text':' Remove unneeded library file. ','line_number':1342,'multiline':True]['text':'
 * Using the compiler information from the configuration file set by -O option, generate the library file.
 * command may be given to allow for a larger buffer for cmd.
 ','line_number':1361,'multiline':True]['text':' Suppress unused variable compiler warnings on platforms where all usage','line_number':1371,'multiline':False]['text':' of this parameter is #ifdefed out.','line_number':1372,'multiline':False]['text':' This is necessary because if packaging is done without assembly code, objectFile might be extremely large
     * containing many object files and so the calling function should supply a command buffer that is large
     * enough to handle this. Otherwise, use the default size.
     ','line_number':1374,'multiline':True]['text':' if (IN_DLL_MODE(mode)) ','line_number':1408,'multiline':True]['text':' Generate the library file. ','line_number':1464,'multiline':True]['text':''",','line_number':1508,'multiline':False]['text':' Remove the ending .s and replace it with .o for the new object file. ','line_number':1544,'multiline':True]['text':' Generate the object file. ','line_number':1556,'multiline':True]['text':'
 * Generation of the data library without assembly code needs to compile each data file
 * individually and then link it all together.
 * Note: Any update to the directory structure of the data needs to be reflected here.
 ','line_number':1574,'multiline':True]['text':' Remove previous icudtall.c file. ','line_number':1621,'multiline':True]['text':' list and listNames should never be NULL since we are looping through the CharList with
         * the given size.
         ','line_number':1634,'multiline':True]['text':' The first iteration calls the gencmn function and initailizes the buffer. ','line_number':1654,'multiline':True]['text':' If the name contains a prefix (indicating directory), alter the new name accordingly. ','line_number':1686,'multiline':True]['text':' don't delete the file ','line_number':1736,'multiline':True]['text':' Generate the library file. ','line_number':1787,'multiline':True]['text':' Check if dll file and lib file exists and that it is not newer than genc file. ','line_number':1880,'multiline':True]['text':' AIX needs a map file. ','line_number':1929,'multiline':True]['text':' This portion of the code removes 'rm -f all' in the GENLIB.
     * Only occurs in AIX.
     ','line_number':1942,'multiline':True]['text':' Memory allocation error ','line_number':1952,'multiline':True]['text':' Zero terminate the string ','line_number':1965,'multiline':True]['text':' Cygwin needs to change flag options. ','line_number':2027,'multiline':True]['text':' OS/400 needs to fix the ld options (swap single quote with double quote) ','line_number':2045,'multiline':True]['text':' Don't really need a return value, just need to stop compiler warnings about','line_number':2060,'multiline':False]['text':' the unused parameter 'o' on platforms where it is not otherwise used.','line_number':2061,'multiline':False]['text':' line number ','line_number':2075,'multiline':True]['text':' TODO: stdin ','line_number':2081,'multiline':True]['text':' open files list ','line_number':2082,'multiline':True]['text':' for each line ','line_number':2090,'multiline':True]['text':' remove spaces at the beginning ','line_number':2096,'multiline':True]['text':' On z/OS, disable call to isspace (#9996).  Investigate using uprv_isspace instead (#9999) ','line_number':2098,'multiline':True]['text':' remove trailing newline characters ','line_number':2105,'multiline':True]['text':' comment or empty line ','line_number':2114,'multiline':True]['text':' Now, process the line ','line_number':2117,'multiline':True]['text':' process space-separated items ','line_number':2120,'multiline':True]['text':' Find the next quote ','line_number':2124,'multiline':True]['text':' terminate at space ','line_number':2147,'multiline':True]['text':' add the file ','line_number':2152,'multiline':True]['text':' normal mode.. o->files is just the bare list without package names ','line_number':2155,'multiline':True]['text':' The +5 is to add a little extra space for, among other things, PKGDATA_FILE_SEP_STRING ','line_number':2161,'multiline':True]['text':' for each entry on line ','line_number':2172,'multiline':True]['text':' for each line ','line_number':2173,'multiline':True]['text':' for each file list file ','line_number':2175,'multiline':True]['text':' Helper for pkg_getPkgDataPath() ','line_number':2178,'multiline':True]['text':' Get path to pkgdata.inc. Try pkg-config first, falling back to icu-config. ','line_number':2202,'multiline':True]['text':' Create optMatchArch for genccode architecture detection ','line_number':2250,'multiline':True]