['text':' -*- Mode: C++; tab-width: 8; indent-tabs-mode: nil; c-basic-offset: 2 -*-
 * vim: set ts=8 sts=2 et sw=2 tw=80:
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. ','line_number':1,'multiline':True]['text':' [SMDOC] WebAssembly feature gating','line_number':10,'multiline':False]['text':'','line_number':11,'multiline':False]['text':' Declarative listing of WebAssembly optional features. This macro is used to','line_number':12,'multiline':False]['text':' generate most of the feature gating code in a centralized manner. See','line_number':13,'multiline':False]['text':' 'Adding a feature' below for the exact steps needed to add a new feature.','line_number':14,'multiline':False]['text':'','line_number':15,'multiline':False]['text':' Each feature is either `DEFAULT` or `EXPERIMENTAL`. Default features are','line_number':16,'multiline':False]['text':' enabled by default in ContextOptions and in the JS-shell. Default features','line_number':17,'multiline':False]['text':' are given a `--no-wasm-FEATURE` shell flag, while experimental features are','line_number':18,'multiline':False]['text':' given a `--wasm-FEATURE` shell flag.','line_number':19,'multiline':False]['text':'','line_number':20,'multiline':False]['text':' The browser pref is `javascript.options.wasm-FEATURE` for both default and','line_number':21,'multiline':False]['text':' experimental features.','line_number':22,'multiline':False]['text':'','line_number':23,'multiline':False]['text':' # Adding a feature','line_number':24,'multiline':False]['text':'','line_number':25,'multiline':False]['text':' 1. Add a configure switch for the feature in js/moz.configure','line_number':26,'multiline':False]['text':' 2. Add a WASM_FEATURE_ENABLED #define below','line_number':27,'multiline':False]['text':' 3. Add the feature to JS_FOR_WASM_FEATURES','line_number':28,'multiline':False]['text':'   a. capitalized name: Used for naming of feature functions, including','line_number':29,'multiline':False]['text':'      wasmFeatureEnabled shell function.','line_number':30,'multiline':False]['text':'   b. lower case name: Used for naming of feature flag variables, including','line_number':31,'multiline':False]['text':'      in wasm::FeatureArgs.','line_number':32,'multiline':False]['text':'   c. compile predicate: Set to WASM_FEATURE_ENABLED','line_number':33,'multiline':False]['text':'   d. compiler predicate: Expression of compilers that this feature depends','line_number':34,'multiline':False]['text':'      on.','line_number':35,'multiline':False]['text':'   e. flag predicate: Expression used to predicate enablement of feature','line_number':36,'multiline':False]['text':'      flag. Useful for disabling a feature when dependent feature is not','line_number':37,'multiline':False]['text':'      enabled or if we are fuzzing.','line_number':38,'multiline':False]['text':'   f. shell flag: The stem of the JS-shell flag. Will be expanded to','line_number':39,'multiline':False]['text':'      --no-wasm-FEATURE for default features, or --wasm-FEATURE for','line_number':40,'multiline':False]['text':'      experimental features.','line_number':41,'multiline':False]['text':'   g. preference name: The stem of the browser preference. Will be expanded','line_number':42,'multiline':False]['text':'      to `javascript.options.wasm-FEATURE`.','line_number':43,'multiline':False]['text':' 4. Add the preference to module/libpref/init/StaticPrefList.yaml','line_number':44,'multiline':False]['text':'   a. Use conditionally compiled flag','line_number':45,'multiline':False]['text':'   b. Set value to 'true' for default features, 'false' or @IS_NIGHTLY_BUILD@','line_number':46,'multiline':False]['text':'      for experimental features.','line_number':47,'multiline':False]['text':'','line_number':48,'multiline':False]['text':' clang-format off','line_number':81,'multiline':False]['text':' capitalized name   ','line_number':83,'multiline':True]['text':' lower case name    ','line_number':84,'multiline':True]['text':' compile predicate  ','line_number':85,'multiline':True]['text':' compiler predicate ','line_number':86,'multiline':True]['text':' flag predicate     ','line_number':87,'multiline':True]['text':' shell flag         ','line_number':89,'multiline':True]['text':' preference name    ','line_number':90,'multiline':True]['text':' capitalized name   ','line_number':91,'multiline':True]['text':' lower case name    ','line_number':92,'multiline':True]['text':' compile predicate  ','line_number':93,'multiline':True]['text':' compiler predicate ','line_number':94,'multiline':True]['text':' flag predicate     ','line_number':95,'multiline':True]['text':' shell flag         ','line_number':96,'multiline':True]['text':' preference name    ','line_number':97,'multiline':True]['text':' capitalized name   ','line_number':99,'multiline':True]['text':' lower case name    ','line_number':100,'multiline':True]['text':' compile predicate  ','line_number':101,'multiline':True]['text':' compiler predicate ','line_number':102,'multiline':True]['text':' flag predicate     ','line_number':103,'multiline':True]['text':' shell flag         ','line_number':104,'multiline':True]['text':' preference name    ','line_number':105,'multiline':True]['text':' capitalized name   ','line_number':106,'multiline':True]['text':' lower case name    ','line_number':107,'multiline':True]['text':' compile predicate  ','line_number':108,'multiline':True]['text':' compiler predicate ','line_number':109,'multiline':True]['text':' flag predicate     ','line_number':110,'multiline':True]['text':' shell flag         ','line_number':112,'multiline':True]['text':' preference name    ','line_number':113,'multiline':True]['text':' capitalized name   ','line_number':114,'multiline':True]['text':' lower case name    ','line_number':115,'multiline':True]['text':' compile predicate  ','line_number':116,'multiline':True]['text':' compiler predicate ','line_number':117,'multiline':True]['text':' flag predicate     ','line_number':118,'multiline':True]['text':' shell flag         ','line_number':119,'multiline':True]['text':' preference name    ','line_number':120,'multiline':True]['text':' capitalized name   ','line_number':121,'multiline':True]['text':' lower case name    ','line_number':122,'multiline':True]['text':' compile predicate  ','line_number':123,'multiline':True]['text':' compiler predicate ','line_number':124,'multiline':True]['text':' flag predicate     ','line_number':125,'multiline':True]['text':' shell flag         ','line_number':127,'multiline':True]['text':' preference name    ','line_number':128,'multiline':True]['text':' clang-format on','line_number':130,'multiline':False]['text':' js_WasmFeatures_h','line_number':132,'multiline':False]