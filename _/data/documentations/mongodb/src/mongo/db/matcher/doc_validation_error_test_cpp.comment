['text':'*
 *    Copyright (C) 2020-present MongoDB, Inc.
 *
 *    This program is free software: you can redistribute it and/or modify
 *    it under the terms of the Server Side Public License, version 1,
 *    as published by MongoDB, Inc.
 *
 *    This program is distributed in the hope that it will be useful,
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *    Server Side Public License for more details.
 *
 *    You should have received a copy of the Server Side Public License
 *    along with this program. If not, see
 *    <http://www.mongodb.com/licensing/server-side-public-license>.
 *
 *    As a special exception, the copyright holders give permission to link the
 *    code of portions of this program with the OpenSSL library under certain
 *    conditions as described in each individual source file and distribute
 *    linked combinations including the program with the OpenSSL library. You
 *    must comply with the Server Side Public License in all respects for
 *    all of the code used other than as permitted herein. If you modify file(s)
 *    with this exception, you may extend this exception to your version of the
 *    file(s), but you are not obligated to do so. If you do not wish to do so,
 *    delete this exception statement from your version. If you delete this
 *    exception statement from all source files in the program, then also delete
 *    it in the license file.
 ','line_number':1,'multiline':True]['text':'*
 * Parses a MatchExpression from 'query' and returns a validation error generated by the parsed
 * MatchExpression against document 'document'.
 ','line_number':63,'multiline':True]['text':' Verify that the document fails to match against the query or whether it should throw based','line_number':79,'multiline':False]['text':' on the value of 'shouldThrow'.','line_number':80,'multiline':False]['text':' namespace','line_number':93,'multiline':False]['text':' Verify that the generated error details match the expected error.','line_number':101,'multiline':False]['text':' Verifies that 'failingDocumentId' attribute is correctly set in a document validation error.','line_number':109,'multiline':False]['text':' shouldThrow ','line_number':120,'multiline':True]['text':'*
 * Utility which verifies that 'obj' has no fields from 'missingFields'.
 ','line_number':124,'multiline':True]['text':'*
 * Generates a document validation error for 'query' and 'document' and verifies that it is a
 * truncated error. Most importantly, the generated error should be a valid BSONObj (i.e.
 * does not exceed 16MB), but should have a 'truncated' field at the top level with a value
 * of 'true', and there should be no 'consideredValues' or 'specifiedAs' fields within the
 * error.
 ','line_number':146,'multiline':True]['text':' shouldThrow ','line_number':159,'multiline':True]['text':' Comparison operators.','line_number':171,'multiline':False]['text':' $eq','line_number':172,'multiline':False]['text':' $ne','line_number':261,'multiline':False]['text':' $lt','line_number':284,'multiline':False]['text':' $lte','line_number':317,'multiline':False]['text':' $gt','line_number':350,'multiline':False]['text':' $gte','line_number':383,'multiline':False]['text':' $in','line_number':427,'multiline':False]['text':' $nin','line_number':462,'multiline':False]['text':' Verify that Comparison operators which accept a regex ($in and $nin) work as expected.','line_number':486,'multiline':False]['text':' Logical operators','line_number':515,'multiline':False]['text':' $and','line_number':516,'multiline':False]['text':' $or','line_number':588,'multiline':False]['text':' $nor','line_number':630,'multiline':False]['text':' $not','line_number':673,'multiline':False]['text':' Combine logical operators','line_number':738,'multiline':False]['text':' Miscellaneous operators.','line_number':837,'multiline':False]['text':' $exists','line_number':838,'multiline':False]['text':' $type','line_number':857,'multiline':False]['text':' $expr','line_number':932,'multiline':False]['text':' shouldThrow ','line_number':985,'multiline':True]['text':' shouldThrow ','line_number':1010,'multiline':True]['text':' shouldThrow ','line_number':1027,'multiline':True]['text':' shouldThrow ','line_number':1052,'multiline':True]['text':' $sampleRate','line_number':1055,'multiline':False]['text':' $mod','line_number':1105,'multiline':False]['text':' $regex','line_number':1204,'multiline':False]['text':' Verifies that $bitsAllClear expression with numeric bitmask correctly generates a validation','line_number':1333,'multiline':False]['text':' error.','line_number':1334,'multiline':False]['text':' Verifies that $bitsAllClear expression with numeric bitmask correctly generates a validation','line_number':1346,'multiline':False]['text':' error on unexpected match of value.','line_number':1347,'multiline':False]['text':' Verifies that $bitsAllClear expression with position list correctly generates a validation','line_number':1363,'multiline':False]['text':' error.','line_number':1364,'multiline':False]['text':' Verifies that $bitsAllClear expression with BinData bitmask correctly generates a validation','line_number':1376,'multiline':False]['text':' error.','line_number':1377,'multiline':False]['text':' Verifies that $bitsAllSet expression correctly generates a validation error.','line_number':1391,'multiline':False]['text':' Verifies that $bitsAllSet expression with position list correctly generates a validation','line_number':1403,'multiline':False]['text':' error.','line_number':1404,'multiline':False]['text':' Verifies that $bitsAllSet expression with BinData bitmask correctly generates a validation','line_number':1416,'multiline':False]['text':' error.','line_number':1417,'multiline':False]['text':' Verifies that $bitsAnyClear expression correctly generates a validation error.','line_number':1431,'multiline':False]['text':' Verifies that $bitsAnyClear expression with position list correctly generates a validation','line_number':1443,'multiline':False]['text':' error.','line_number':1444,'multiline':False]['text':' Verifies that $bitsAnyClear expression with BinData bitmask correctly generates a validation','line_number':1456,'multiline':False]['text':' error.','line_number':1457,'multiline':False]['text':' Verifies that $bitsAnySet expression correctly generates a validation error.','line_number':1471,'multiline':False]['text':' Verifies that $bitsAnySet expression with position list correctly generates a validation','line_number':1483,'multiline':False]['text':' error.','line_number':1484,'multiline':False]['text':' Verifies that $bitsAnySet expression with BinData bitmask correctly generates a validation','line_number':1496,'multiline':False]['text':' error.','line_number':1497,'multiline':False]['text':' Verifies that $bitsAnyClear expression correctly generates a validation error on value type','line_number':1511,'multiline':False]['text':' mismatch.','line_number':1512,'multiline':False]['text':' Verifies that $bitsAllClear expression with numeric bitmask correctly generates a validation','line_number':1534,'multiline':False]['text':' error when applied on an array of numeric values.','line_number':1535,'multiline':False]['text':' Verifies that $geoIntersects expression correctly generates a validation error.','line_number':1548,'multiline':False]['text':' Verifies that $geoIntersects expression correctly generates a missing field validation error.','line_number':1566,'multiline':False]['text':' Verifies that $geoIntersects expression correctly generates a validation error on unexpected','line_number':1582,'multiline':False]['text':' match of value.','line_number':1583,'multiline':False]['text':' Verifies that $geoIntersects expression correctly generates a correct validation error on value','line_number':1606,'multiline':False]['text':' type mismatch.','line_number':1607,'multiline':False]['text':' 'arr' is of $geoWithin's expected type (an array), but is not a valid geometry.','line_number':1641,'multiline':False]['text':' Verifies that $geoIntersects expression correctly generates a validation error when applied on an','line_number':1654,'multiline':False]['text':' array of points.','line_number':1655,'multiline':False]['text':' Verifies that $geoWithin expression correctly generates a validation error.','line_number':1677,'multiline':False]['text':' Verifies that $geoWithin expression correctly generates an inverse validation error.','line_number':1695,'multiline':False]['text':' Array operators.','line_number':1716,'multiline':False]['text':' $size','line_number':1718,'multiline':False]['text':' $all','line_number':1772,'multiline':False]['text':' $elemMatch','line_number':1828,'multiline':False]['text':' $all and $elemMatch','line_number':1933,'multiline':False]['text':' Truncation tests','line_number':1949,'multiline':False]['text':'*
 * Generates a query of nested $ors that is 'desiredDepth' levels deep.
 ','line_number':1951,'multiline':True]['text':' 'i' is cast to an int so that it can be used in constructing the deep query.','line_number':1957,'multiline':False]['text':' The number of levels of nesting that a single failed $or will contribute to the generated','line_number':1966,'multiline':False]['text':' error.','line_number':1967,'multiline':False]['text':' Verify that a query that is too deep will not return any error detail.','line_number':1970,'multiline':False]['text':' 'failingQuery' will generate a truncated error with no detail.','line_number':1972,'multiline':False]['text':' shouldThrow ','line_number':1973,'multiline':True]['text':' Build a query which will generate an error that is deeper than the maximum allowed','line_number':1983,'multiline':False]['text':' BSONDepth.','line_number':1984,'multiline':False]['text':' Should still fail when just above the maximum allowed depth.','line_number':1988,'multiline':False]['text':' Should no longer fail when below the maximum allowed depth.','line_number':1991,'multiline':False]['text':' shouldThrow ','line_number':1994,'multiline':True]['text':' Build a large array of numbers.','line_number':2001,'multiline':False]['text':' shouldThrow ','line_number':2031,'multiline':True]['text':' Should not report 'consideredValuesTruncated: true'','line_number':2032,'multiline':False]['text':' Configure error generation to use a maximum error size of 10KB. This allows for us to test','line_number':2037,'multiline':False]['text':' truncation behavior without constructing massive errors.','line_number':2038,'multiline':False]['text':' Target size to use for constructing large queries/documents.','line_number':2040,'multiline':False]['text':' Constructs an array of numbers of the desired size in bytes.','line_number':2042,'multiline':False]['text':' $in predicate that is of size 'maxSize' gets omitted from error output.','line_number':2052,'multiline':False]['text':' Document which contains an array of size 'maxSize' will result in 'consideredValues' field','line_number':2060,'multiline':False]['text':' being omitted.','line_number':2061,'multiline':False]['text':' We use the number of elements returned here to ensure that none of the values in the','line_number':2066,'multiline':False]['text':' generated array get truncated.','line_number':2067,'multiline':False]['text':' Construct the $in predicate and the array of values such that each have a size in bytes of','line_number':2071,'multiline':False]['text':' 7 KB that is under the 10KB size limit, but their combined size exceeds the configured size','line_number':2072,'multiline':False]['text':' limit of 10KB.','line_number':2073,'multiline':False]['text':' Both the query and the doc should be underneath 'maxSize' individually.','line_number':2080,'multiline':False]['text':' The combined size exceeds 'maxSize' and will result in a truncated error.','line_number':2083,'multiline':False]['text':' The number of $eq predicates is large enough that we will not be able to generate a detailed','line_number':2087,'multiline':False]['text':' error as the size of the truncated error details will dwarf the 1 KB limit.','line_number':2088,'multiline':False]['text':' shouldThrow ','line_number':2101,'multiline':True]['text':' Generated error should have a note field and a failingDocumentId field, but no details','line_number':2104,'multiline':False]['text':' field.','line_number':2105,'multiline':False]['text':' An internal error thrown by the doc_validation_error module should be caught and handled','line_number':2115,'multiline':False]['text':' appropriately.','line_number':2116,'multiline':False]['text':' shouldThrow ','line_number':2122,'multiline':True]['text':' There should be an error with 'note' and 'details' fields.','line_number':2125,'multiline':False]['text':' namespace','line_number':2136,'multiline':False]['text':' namespace mongo::doc_validation_error','line_number':2137,'multiline':False]