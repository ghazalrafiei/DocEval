['text':'---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------','line_number':1,'multiline':True]['text':'*
 * The main VS Code application. There will only ever be one instance,
 * even if the user starts many instances (e.g. from the command line).
 ','line_number':124,'multiline':True]['text':'#region Security related measures (https://electronjs.org/docs/tutorial/security)','line_number':161,'multiline':False]['text':'','line_number':162,'multiline':False]['text':' !!! DO NOT CHANGE without consulting the documentation !!!','line_number':163,'multiline':False]['text':'','line_number':164,'multiline':False]['text':'`);','line_number':166,'multiline':False]['text':'#endregion','line_number':189,'multiline':False]['text':'#region Request filtering','line_number':191,'multiline':False]['text':' Block all SVG requests from unsupported origins','line_number':193,'multiline':False]['text':' But allow them if the are made from inside an webview','line_number':196,'multiline':False]['text':'`)) {','line_number':199,'multiline':False]['text':' Check to see if the request comes from one of the main windows (or shared process) and not from embedded content','line_number':216,'multiline':False]['text':' Only restrict top level page of webviews: index.html','line_number':229,'multiline':False]['text':' Check to see if the request comes from one of the main editor windows.','line_number':237,'multiline':False]['text':' Block most svgs','line_number':265,'multiline':False]['text':' Configure SVG header content type properly','line_number':276,'multiline':False]['text':' https://github.com/microsoft/vscode/issues/97564','line_number':277,'multiline':False]['text':' remote extension schemes have the following format','line_number':292,'multiline':False]['text':' http://127.0.0.1:<port>/vscode-remote-resource?path=','line_number':293,'multiline':False]['text':'#endregion','line_number':302,'multiline':False]['text':'#region Code Cache','line_number':304,'multiline':False]['text':'*
			 * Sets code cache directory. By default, the directory will be `Code Cache` under
			 * the respective user data folder.
			 ','line_number':307,'multiline':True]['text':' Make sure to partition Chrome's code cache folder','line_number':316,'multiline':False]['text':' in the same way as our code cache path to help','line_number':317,'multiline':False]['text':' invalidate caches that we know are invalid','line_number':318,'multiline':False]['text':' (https://github.com/microsoft/vscode/issues/120655)','line_number':319,'multiline':False]['text':'#endregion','line_number':323,'multiline':False]['text':'#region UNC Host Allowlist (Windows)','line_number':325,'multiline':False]['text':'#endregion','line_number':335,'multiline':False]['text':' We handle uncaught exceptions here to prevent electron from opening a dialog to the user','line_number':340,'multiline':False]['text':' Dispose on shutdown','line_number':349,'multiline':False]['text':' Contextmenu via IPC support','line_number':352,'multiline':False]['text':' Accessibility change event','line_number':355,'multiline':False]['text':' macOS dock activate','line_number':360,'multiline':False]['text':' Mac only event: open new window when we get activated','line_number':364,'multiline':False]['text':'#region Security related measures (https://electronjs.org/docs/tutorial/security)','line_number':370,'multiline':False]['text':'','line_number':371,'multiline':False]['text':' !!! DO NOT CHANGE without consulting the documentation !!!','line_number':372,'multiline':False]['text':'','line_number':373,'multiline':False]['text':' Auxiliary Window: delegate to `AuxiliaryWindow` class','line_number':376,'multiline':False]['text':' Block any in-page navigation','line_number':383,'multiline':False]['text':' All Windows: only allow about:blank auxiliary windows to open','line_number':390,'multiline':False]['text':' For all other URLs, delegate to the OS.','line_number':391,'multiline':False]['text':' about:blank windows can open as window witho our default options','line_number':394,'multiline':False]['text':' Any other URL: delegate to OS','line_number':404,'multiline':False]['text':'#endregion','line_number':415,'multiline':False]['text':' Keep in array because more might come!','line_number':423,'multiline':False]['text':' Clear previous handler if any','line_number':426,'multiline':False]['text':' Handle paths delayed in case more are coming!','line_number':432,'multiline':False]['text':' can also be opening from finder while app is running ','line_number':435,'multiline':True]['text':' dropping on the dock or opening from finder prefers to open in a new window ','line_number':439,'multiline':True]['text':'macOS native tab "+" button','line_number':448,'multiline':False]['text':'#region Bootstrap IPC Handlers','line_number':451,'multiline':False]['text':' Prefer to use the args and env from the target window','line_number':455,'multiline':False]['text':' when resolving the shell env. It is possible that','line_number':456,'multiline':False]['text':' a first window was opened from the UI but a second','line_number':457,'multiline':False]['text':' from the CLI and that has implications for whether to','line_number':458,'multiline':False]['text':' resolve the shell environment or not.','line_number':459,'multiline':False]['text':'','line_number':460,'multiline':False]['text':' Window can be undefined for e.g. the shared process','line_number':461,'multiline':False]['text':' that is not part of our windows registry!','line_number':462,'multiline':False]['text':' Note: this can be `undefined` for the shared process','line_number':463,'multiline':False]['text':' Resolve shell env','line_number':474,'multiline':False]['text':'#endregion','line_number':501,'multiline':False]['text':' take only the message and stack property','line_number':527,'multiline':False]['text':' handle on client side','line_number':533,'multiline':False]['text':' Make sure we associate the program with the app user model id','line_number':548,'multiline':False]['text':' This will help Windows to associate the running program with','line_number':549,'multiline':False]['text':' any shortcut that is pinned to the taskbar and prevent showing','line_number':550,'multiline':False]['text':' two icons in the taskbar for the same app.','line_number':551,'multiline':False]['text':' Fix native tabs on macOS 10.13','line_number':557,'multiline':False]['text':' macOS enables a compatibility patch for any bundle ID beginning with','line_number':558,'multiline':False]['text':' "com.microsoft.", which breaks native tabs for VS Code when using this','line_number':559,'multiline':False]['text':' identifier (from the official build).','line_number':560,'multiline':False]['text':' Explicitly opt out of the patch here before creating any windows.','line_number':561,'multiline':False]['text':' See: https://github.com/microsoft/vscode/issues/35361#issuecomment-399794085','line_number':562,'multiline':False]['text':' Main process server (electron IPC based)','line_number':571,'multiline':False]['text':' When we go down abnormally, make sure to free up','line_number':575,'multiline':False]['text':' any IPC we accept from other windows to reduce','line_number':576,'multiline':False]['text':' the chance of doing work after we go down. Kill','line_number':577,'multiline':False]['text':' is special in that it does not orderly shutdown','line_number':578,'multiline':False]['text':' windows.','line_number':579,'multiline':False]['text':' Resolve unique machine ID','line_number':584,'multiline':False]['text':' Shared process','line_number':592,'multiline':False]['text':' Services','line_number':595,'multiline':False]['text':' Auth Handler','line_number':598,'multiline':False]['text':' Transient profiles handler','line_number':601,'multiline':False]['text':' Init Channels','line_number':604,'multiline':False]['text':' Setup Protocol URL Handlers','line_number':607,'multiline':False]['text':' Setup vscode-remote-resource protocol handler.','line_number':610,'multiline':False]['text':' Signal phase: ready - before opening first window','line_number':613,'multiline':False]['text':' Open Windows','line_number':616,'multiline':False]['text':' Signal phase: after window open','line_number':619,'multiline':False]['text':' Post Open Windows Tasks','line_number':622,'multiline':False]['text':' Set lifecycle phase to `Eventually` after a short delay and when idle (min 2.5sec, max 5sec)','line_number':625,'multiline':False]['text':' Install URL handlers that deal with protocl URLs either','line_number':638,'multiline':False]['text':' from this process by opening windows and/or by forwarding','line_number':639,'multiline':False]['text':' the URLs into a window process to be handled there.','line_number':640,'multiline':False]['text':'*
		 * Protocol URL handling on startup is complex, refer to
		 * {@link IInitialProtocolUrls} for an explainer.
		 ','line_number':689,'multiline':True]['text':' Windows/Linux: protocol handler invokes CLI with --open-url','line_number':694,'multiline':False]['text':' macOS: open-url events that were received before the app is ready','line_number':700,'multiline':False]['text':' invalid','line_number':727,'multiline':False]['text':' blocked','line_number':735,'multiline':False]['text':' handled as window to open','line_number':739,'multiline':False]['text':' handled within active window','line_number':744,'multiline':False]['text':' !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!','line_number':767,'multiline':False]['text':'','line_number':768,'multiline':False]['text':' NOTE: we currently only ask for confirmation for `file` and `vscode-remote`','line_number':769,'multiline':False]['text':' authorities here. There is an additional confirmation for `extension.id`','line_number':770,'multiline':False]['text':' authorities from within the window.','line_number':771,'multiline':False]['text':'','line_number':772,'multiline':False]['text':' IF YOU ARE PLANNING ON ADDING ANOTHER AUTHORITY HERE, MAKE SURE TO ALSO','line_number':773,'multiline':False]['text':' ADD IT TO THE CONFIRMATION CODE BELOW OR INSIDE THE WINDOW!','line_number':774,'multiline':False]['text':'','line_number':775,'multiline':False]['text':' !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!','line_number':776,'multiline':False]['text':' not blocked via settings','line_number':783,'multiline':False]['text':' blocked by user choice','line_number':799,'multiline':False]['text':' Due to https://github.com/microsoft/vscode/issues/195436, we can only','line_number':803,'multiline':False]['text':' update settings from within a window. But we do not know if a window','line_number':804,'multiline':False]['text':' is about to open or can already handle the request, so we have to send','line_number':805,'multiline':False]['text':' to any current window and any newly opening window.','line_number':806,'multiline':False]['text':' not blocked by user choice','line_number':812,'multiline':False]['text':' File path','line_number':820,'multiline':False]['text':' Remote path','line_number':831,'multiline':False]['text':' Example conversion:','line_number':834,'multiline':False]['text':' From: vscode://vscode-remote/wsl+ubuntu/mnt/c/GitDevelopment/monaco','line_number':835,'multiline':False]['text':'   To: vscode-remote://wsl+ubuntu/mnt/c/GitDevelopment/monaco','line_number':836,'multiline':False]['text':' skip over the leading slash ','line_number':838,'multiline':True]['text':' Make sure to unset any `windowId=_blank` here','line_number':846,'multiline':False]['text':' https://github.com/microsoft/vscode/issues/191902','line_number':847,'multiline':False]['text':' path with :line:column syntax','line_number':859,'multiline':False]['text':' Support 'workspace' URLs (https://github.com/microsoft/vscode/issues/124263)','line_number':873,'multiline':False]['text':' We should handle the URI in a new window if the URL contains `windowId=_blank`','line_number':884,'multiline':False]['text':' or if no window is open (macOS only)','line_number':895,'multiline':False]['text':' Pass along whether the application is being opened via a Continue On flow','line_number':902,'multiline':False]['text':' Check if the protocol URL is a window openable to open...','line_number':913,'multiline':False]['text':' If openable should be blocked, behave as if it's handled','line_number':919,'multiline':False]['text':' remoteAuthority: will be determined based on windowOpenableFromProtocolUrl','line_number':929,'multiline':False]['text':' this should help ensuring that the right window gets focus when multiple are opened','line_number':932,'multiline':False]['text':' ...or if we should open in a new window and then handle it within that window','line_number':938,'multiline':False]['text':' Update','line_number':986,'multiline':False]['text':' Windows','line_number':1005,'multiline':False]['text':' Dialogs','line_number':1009,'multiline':False]['text':' Launch','line_number':1013,'multiline':False]['text':' proxied to other processes ','line_number':1014,'multiline':True]['text':' Diagnostics','line_number':1016,'multiline':False]['text':' proxied to other processes ','line_number':1017,'multiline':True]['text':' Issues','line_number':1020,'multiline':False]['text':' Encryption','line_number':1023,'multiline':False]['text':' Keyboard Layout','line_number':1026,'multiline':False]['text':' Native Host','line_number':1029,'multiline':False]['text':' proxied to other processes ','line_number':1030,'multiline':True]['text':' Webview Manager','line_number':1032,'multiline':False]['text':' Menubar','line_number':1035,'multiline':False]['text':' Extension Host Starter','line_number':1038,'multiline':False]['text':' Storage','line_number':1041,'multiline':False]['text':' Terminal','line_number':1045,'multiline':False]['text':' External terminal','line_number':1059,'multiline':False]['text':' Backups','line_number':1068,'multiline':False]['text':' Workspaces','line_number':1072,'multiline':False]['text':' proxied to other processes ','line_number':1075,'multiline':True]['text':' URL handling','line_number':1078,'multiline':False]['text':' proxied to other processes ','line_number':1079,'multiline':True]['text':' Telemetry','line_number':1081,'multiline':False]['text':' Default Extensions Profile Init','line_number':1095,'multiline':False]['text':' Utility Process Worker','line_number':1099,'multiline':False]['text':' Init services that require it','line_number':1102,'multiline':False]['text':' Channels registered to node.js are exposed to second instances','line_number':1113,'multiline':False]['text':' launching because that is the only way the second instance','line_number':1114,'multiline':False]['text':' can talk to the first instance. Electron IPC does not work','line_number':1115,'multiline':False]['text':' across apps until `requestSingleInstance` APIs are adopted.','line_number':1116,'multiline':False]['text':' Policies (main & shared process)','line_number':1126,'multiline':False]['text':' Local Files','line_number':1131,'multiline':False]['text':' User Data Profiles','line_number':1138,'multiline':False]['text':' Request','line_number':1143,'multiline':False]['text':' Update','line_number':1147,'multiline':False]['text':' Issues','line_number':1151,'multiline':False]['text':' Encryption','line_number':1155,'multiline':False]['text':' Signing','line_number':1159,'multiline':False]['text':' Keyboard Layout','line_number':1163,'multiline':False]['text':' Native host (main & shared process)','line_number':1167,'multiline':False]['text':' Workspaces','line_number':1173,'multiline':False]['text':' Menubar','line_number':1177,'multiline':False]['text':' URL handling','line_number':1181,'multiline':False]['text':' Webview Manager','line_number':1185,'multiline':False]['text':' Storage (main & shared process)','line_number':1189,'multiline':False]['text':' Profile Storage Changes Listener (shared process)','line_number':1194,'multiline':False]['text':' Terminal','line_number':1198,'multiline':False]['text':' External Terminal','line_number':1202,'multiline':False]['text':' Logger','line_number':1206,'multiline':False]['text':' Extension Host Debug Broadcasting','line_number':1211,'multiline':False]['text':' Extension Host Starter','line_number':1215,'multiline':False]['text':' Utility Process Worker','line_number':1219,'multiline':False]['text':' First check for windows from protocol links to open','line_number':1231,'multiline':False]['text':' Openables can open as windows directly','line_number':1234,'multiline':False]['text':' remoteAuthority: will be determined based on openables','line_number':1242,'multiline':False]['text':' Protocol links with `windowId=_blank` on startup','line_number':1246,'multiline':False]['text':' should be handled in a special way:','line_number':1247,'multiline':False]['text':' We take the first one of these and open an empty','line_number':1248,'multiline':False]['text':' window for it. This ensures we are not restoring','line_number':1249,'multiline':False]['text':' all windows of the previous session.','line_number':1250,'multiline':False]['text':' If there are any more URLs like these, they will','line_number':1251,'multiline':False]['text':' be handled from the URL listeners installed later.','line_number':1252,'multiline':False]['text':' It is important here that we remove `windowId=_blank` from','line_number':1259,'multiline':False]['text':' this URL because here we open an empty window for it.','line_number':1260,'multiline':False]['text':' remoteAuthority: will be determined based on openables','line_number':1273,'multiline':False]['text':' Started without file/folder arguments','line_number':1290,'multiline':False]['text':' Force new window','line_number':1293,'multiline':False]['text':' mac: open-file event received on startup','line_number':1309,'multiline':False]['text':' remoteAuthority: will be determined based on macOpenFiles','line_number':1318,'multiline':False]['text':' default: read paths from cli','line_number':1323,'multiline':False]['text':' Windows: mutex','line_number':1342,'multiline':False]['text':' Remote Authorities','line_number':1345,'multiline':False]['text':' Start to fetch shell environment (if needed) after window has opened','line_number':1353,'multiline':False]['text':' Since this operation can take a long time, we want to warm it up while','line_number':1354,'multiline':False]['text':' the window is opening.','line_number':1355,'multiline':False]['text':' We also show an error to the user in case this fails.','line_number':1356,'multiline':False]['text':' Crash reporter','line_number':1359,'multiline':False]['text':' If enable-crash-reporter argv is undefined then this is a fresh start,','line_number':1398,'multiline':False]['text':' based on `telemetry.enableCrashreporter` settings, generate a UUID which','line_number':1399,'multiline':False]['text':' will be used as crash reporter id and also update the json file.','line_number':1400,'multiline':False]['text':' Initial startup','line_number':1409,'multiline':False]['text':' Subsequent startup: update crash reporter value if changed','line_number':1427,'multiline':False]