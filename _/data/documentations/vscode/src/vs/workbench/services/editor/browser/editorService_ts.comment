['text':'---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------','line_number':1,'multiline':True]['text':'#region events','line_number':42,'multiline':False]['text':'#endregion','line_number':62,'multiline':False]['text':' Editor & group changes','line_number':95,'multiline':False]['text':' Out of workspace file watchers','line_number':105,'multiline':False]['text':' File changes & operations','line_number':108,'multiline':False]['text':' Note: there is some duplication with the two file event handlers- Since we cannot always rely on the disk events','line_number':109,'multiline':False]['text':' carrying all necessary data in all environments, we also use the file operation events to make sure operations are handled.','line_number':110,'multiline':False]['text':' In any case there is no guarantee if the local event is fired first or the disk one. Thus, code must handle the case','line_number':111,'multiline':False]['text':' that the event ordering is random as well as might not carry all information needed.','line_number':112,'multiline':False]['text':' Configuration','line_number':116,'multiline':False]['text':'#region Editor & group event handlers','line_number':120,'multiline':False]['text':' Register listeners to each opened group','line_number':126,'multiline':False]['text':' Fire initial set of editor events if there is an active editor','line_number':131,'multiline':False]['text':' ignore if not the active group','line_number':140,'multiline':False]['text':' ignore if we still have no active editor','line_number':144,'multiline':False]['text':' Remember as last active','line_number':152,'multiline':False]['text':' Fire event to outside parties','line_number':156,'multiline':False]['text':'#endregion','line_number':185,'multiline':False]['text':'#region Visible Editors Change: Install file watchers for out of workspace resources that became visible','line_number':187,'multiline':False]['text':' Handle no longer visible out of workspace resources','line_number':207,'multiline':False]['text':' Handle newly visible out of workspace resources','line_number':215,'multiline':False]['text':'#endregion','line_number':224,'multiline':False]['text':'#region File Changes: Move & Deletes to move or close opend editors','line_number':226,'multiline':False]['text':' Handle moves specially when file is opened','line_number':230,'multiline':False]['text':' Handle deletes','line_number':235,'multiline':False]['text':' not matching our resource','line_number':254,'multiline':False]['text':' Determine new resulting target resource','line_number':257,'multiline':False]['text':' file got moved','line_number':260,'multiline':False]['text':' parent folder got moved','line_number':263,'multiline':False]['text':' Delegate rename() to editor instance','line_number':266,'multiline':False]['text':' not target - ignore','line_number':269,'multiline':False]['text':' Construct a replacement with our extra options mixed in','line_number':280,'multiline':False]['text':' Apply replacements','line_number':304,'multiline':False]['text':' default','line_number':322,'multiline':False]['text':' Handle deletes in opened editors depending on:','line_number':334,'multiline':False]['text':' - we close any editor when `closeOnFileDelete: true`','line_number':335,'multiline':False]['text':' - we close any editor when the delete occurred from within VSCode','line_number':336,'multiline':False]['text':' Do NOT close any opened editor that matches the resource path (either equal or being parent) of the','line_number':339,'multiline':False]['text':' resource we move to (movedTo). Otherwise we would close a resource that has been renamed to the same','line_number':340,'multiline':False]['text':' path but different casing.','line_number':341,'multiline':False]['text':' We have received reports of users seeing delete events even though the file still','line_number':357,'multiline':False]['text':' exists (network shares issue: https://github.com/microsoft/vscode/issues/13665).','line_number':358,'multiline':False]['text':' Since we do not want to close an editor without reason, we have to check if the','line_number':359,'multiline':False]['text':' file is really gone and not just a faulty file event.','line_number':360,'multiline':False]['text':' This only applies to external file events, so we need to check for the isExternal','line_number':361,'multiline':False]['text':' flag.','line_number':362,'multiline':False]['text':'#endregion','line_number':404,'multiline':False]['text':'#region Editor accessors','line_number':406,'multiline':False]['text':' MRU','line_number':453,'multiline':False]['text':' Sequential','line_number':461,'multiline':False]['text':'#endregion','line_number':500,'multiline':False]['text':'#region openEditor()','line_number':502,'multiline':False]['text':' Resolve override unless disabled','line_number':519,'multiline':False]['text':' skip editor if override is aborted','line_number':524,'multiline':False]['text':' We resolved an editor to use','line_number':527,'multiline':False]['text':' Override is disabled or did not apply: fallback to default','line_number':535,'multiline':False]['text':' If group still isn't defined because of a disabled override we resolve it','line_number':540,'multiline':False]['text':' Mixin editor group activation if returned','line_number':550,'multiline':False]['text':'#endregion','line_number':559,'multiline':False]['text':'#region openEditors()','line_number':561,'multiline':False]['text':' Pass all editors to trust service to determine if','line_number':568,'multiline':False]['text':' we should proceed with opening the editors if we','line_number':569,'multiline':False]['text':' are asked to validate trust.','line_number':570,'multiline':False]['text':' Find target groups for editors to open','line_number':578,'multiline':False]['text':' Resolve override unless disabled','line_number':584,'multiline':False]['text':' skip editor if override is aborted','line_number':589,'multiline':False]['text':' We resolved an editor to use','line_number':592,'multiline':False]['text':' Override is disabled or did not apply: fallback to default','line_number':599,'multiline':False]['text':' If group still isn't defined because of a disabled override we resolve it','line_number':604,'multiline':False]['text':' Update map of groups to editors','line_number':614,'multiline':False]['text':' Open in target groups','line_number':624,'multiline':False]['text':' Typed Editor','line_number':655,'multiline':False]['text':' Untyped editor','line_number':673,'multiline':False]['text':'#endregion','line_number':716,'multiline':False]['text':'#region isOpened() / isVisible()','line_number':718,'multiline':False]['text':'#endregion','line_number':738,'multiline':False]['text':'#region closeEditor()','line_number':740,'multiline':False]['text':'#endregion','line_number':748,'multiline':False]['text':'#region closeEditors()','line_number':750,'multiline':False]['text':'#endregion','line_number':775,'multiline':False]['text':'#region findEditors()','line_number':777,'multiline':False]['text':' Do a quick check for the resource via the editor observer','line_number':788,'multiline':False]['text':' which is a very efficient way to find an editor by resource.','line_number':789,'multiline':False]['text':' However, we can only do that unless we are asked to find an','line_number':790,'multiline':False]['text':' editor on the secondary side of a side by side editor, because','line_number':791,'multiline':False]['text':' the editor observer provides fast lookups only for primary','line_number':792,'multiline':False]['text':' editors.','line_number':793,'multiline':False]['text':' Search only in specific group','line_number':804,'multiline':False]['text':' Resource provided: result is an array','line_number':808,'multiline':False]['text':' Editor identifier provided, result is single','line_number':817,'multiline':False]['text':' Search across all groups in MRU order','line_number':834,'multiline':False]['text':' Resource provided: result is an array','line_number':841,'multiline':False]['text':' Editor identifier provided, result is single','line_number':846,'multiline':False]['text':'#endregion','line_number':861,'multiline':False]['text':'#region replaceEditors()','line_number':863,'multiline':False]['text':' Convert all replacements to typed editors unless already','line_number':870,'multiline':False]['text':' typed and handle overrides properly.','line_number':871,'multiline':False]['text':' Resolve override unless disabled','line_number':876,'multiline':False]['text':' skip editor if override is aborted','line_number':884,'multiline':False]['text':' We resolved an editor to use','line_number':887,'multiline':False]['text':' Override is disabled or did not apply: fallback to default','line_number':898,'multiline':False]['text':'#endregion','line_number':914,'multiline':False]['text':'#region save/revert','line_number':916,'multiline':False]['text':' Convert to array','line_number':920,'multiline':False]['text':' Make sure to not save the same editor multiple times','line_number':925,'multiline':False]['text':' by using the `matches()` method to find duplicates','line_number':926,'multiline':False]['text':' Split editors up into a bucket that is saved in parallel','line_number':929,'multiline':False]['text':' and sequentially. Unless "Save As", all non-untitled editors','line_number':930,'multiline':False]['text':' can be saved in parallel to speed up the operation. Remaining','line_number':931,'multiline':False]['text':' editors are potentially bringing up some UI and thus run','line_number':932,'multiline':False]['text':' sequentially.','line_number':933,'multiline':False]['text':' Editors to save in parallel','line_number':948,'multiline':False]['text':' Use save as a hint to pin the editor if used explicitly','line_number':951,'multiline':False]['text':' Save','line_number':956,'multiline':False]['text':' Editors to save sequentially','line_number':960,'multiline':False]['text':' might have been disposed from the save already','line_number':963,'multiline':False]['text':' Preserve view state by opening the editor first if the editor','line_number':966,'multiline':False]['text':' is untitled or we "Save As". This also allows the user to review','line_number':967,'multiline':False]['text':' the contents of the editor before making a decision.','line_number':968,'multiline':False]['text':' failed or cancelled, abort','line_number':979,'multiline':False]['text':' Replace editor preserving viewstate (either across all groups or','line_number':982,'multiline':False]['text':' only selected group) if the resulting editor is different from the','line_number':983,'multiline':False]['text':' current one.','line_number':984,'multiline':False]['text':' untitled replaces across all groups ','line_number':986,'multiline':True]['text':' Convert to array','line_number':1008,'multiline':False]['text':' Make sure to not revert the same editor multiple times','line_number':1013,'multiline':False]['text':' by using the `matches()` method to find duplicates','line_number':1014,'multiline':False]['text':' Use revert as a hint to pin the editor','line_number':1019,'multiline':False]['text':'#endregion','line_number':1074,'multiline':False]['text':' Dispose remaining watchers if any','line_number':1079,'multiline':False]