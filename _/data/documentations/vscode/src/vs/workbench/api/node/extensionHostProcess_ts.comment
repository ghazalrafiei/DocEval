['text':'---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------','line_number':1,'multiline':True]['text':' use a string, as undefined is also a valid value','line_number':35,'multiline':False]['text':' workaround for https://github.com/microsoft/vscode/issues/85490','line_number':38,'multiline':False]['text':' remove --inspect-port=0 after start so that it doesn't trigger LSP debugging','line_number':39,'multiline':False]['text':' 'true' | 'false' | undefined','line_number':55,'multiline':False]['text':' With Electron 2.x and node.js 8.x the "natives" module','line_number':59,'multiline':False]['text':' can cause a native crash (see https://github.com/nodejs/node/issues/19891 and','line_number':60,'multiline':False]['text':' https://github.com/electron/electron/issues/10905). To prevent this from','line_number':61,'multiline':False]['text':' happening we essentially blocklist this module from getting loaded in any','line_number':62,'multiline':False]['text':' extension by patching the node require() function.','line_number':63,'multiline':False]['text':' custom process.exit logic...','line_number':77,'multiline':False]['text':' override Electron's process.crash() method','line_number':89,'multiline':False]['text':' Set ELECTRON_RUN_AS_NODE environment variable for extensions that use','line_number':95,'multiline':False]['text':' child_process.spawn with process.execPath and expect to run as node process','line_number':96,'multiline':False]['text':' on the desktop.','line_number':97,'multiline':False]['text':' Refs https://github.com/microsoft/vscode/issues/151012#issuecomment-1156593228','line_number':98,'multiline':False]['text':' This calls exit directly in case the initialization is not finished and we need to exit','line_number':107,'multiline':False]['text':' Otherwise, if initialization completed we go to extensionHostMain.terminate()','line_number':108,'multiline':False]['text':' Disable Nagle's algorithm. We also do this on the server process,','line_number':155,'multiline':False]['text':' but nodejs doesn't document if this option is transferred with the socket','line_number':156,'multiline':False]['text':' reconnection case','line_number':168,'multiline':False]['text':' Wait for rich client to reconnect','line_number':181,'multiline':False]['text':' The socket has closed, let's give the renderer a certain amount of time to reconnect','line_number':183,'multiline':False]['text':' we are disconnected and already running the short reconnection timer','line_number':190,'multiline':False]['text':' we are disconnected and running the long reconnection timer','line_number':194,'multiline':False]['text':' Now that we have managed to install a message listener, ask the other side to send us the socket','line_number':200,'multiline':False]['text':' Listen init data message','line_number':266,'multiline':False]['text':' Running in the built version where commits are defined','line_number':276,'multiline':False]['text':' Kill oneself if one's parent dies. Much drama.','line_number':283,'multiline':False]['text':' throws an exception if the main process doesn't exist anymore.','line_number':287,'multiline':False]['text':' Even if the parent process is still alive,','line_number':291,'multiline':False]['text':' some antivirus software can lead to an EPERM error to be thrown here.','line_number':292,'multiline':False]['text':' Let's terminate only if we get 3 consecutive EPERM errors.','line_number':293,'multiline':False]['text':' In certain cases, the event loop can become busy and never yield','line_number':304,'multiline':False]['text':' e.g. while-true or process.nextTick endless loops','line_number':305,'multiline':False]['text':' So also use the native node module to do it from a separate thread','line_number':306,'multiline':False]['text':' no problem...','line_number':312,'multiline':False]['text':' Tell the outside that we are initialized','line_number':317,'multiline':False]['text':' Tell the outside that we are ready to receive messages','line_number':323,'multiline':False]['text':' Print a console message when rejection isn't handled within N seconds. For details:','line_number':330,'multiline':False]['text':' see https://nodejs.org/api/process.html#process_event_unhandledrejection','line_number':331,'multiline':False]['text':' and https://nodejs.org/api/process.html#process_event_rejectionhandled','line_number':332,'multiline':False]['text':' Print a console message when an exception isn't handled.','line_number':362,'multiline':False]['text':' setup things','line_number':375,'multiline':False]['text':' to support other test frameworks like Jasmin that use process.exit (https://github.com/microsoft/vscode/issues/37708)','line_number':376,'multiline':False]['text':' host abstraction','line_number':380,'multiline':False]['text':' Attempt to load uri transformer','line_number':389,'multiline':False]['text':' rewrite onTerminate-function to be a proper shutdown','line_number':402,'multiline':False]