['text':'---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------','line_number':1,'multiline':True]['text':' #region TextBuffer','line_number':53,'multiline':False]['text':' offsets use the text EOL, so we need to compensate for length differences','line_number':125,'multiline':False]['text':' if the requested EOL doesn't match the text EOL','line_number':126,'multiline':False]['text':' we must count by iterating','line_number':141,'multiline':False]['text':' check if the new inserted text contains RTL','line_number':259,'multiline':False]['text':' check if the new inserted text contains unusual line terminators','line_number':263,'multiline':False]['text':' Sort operations ascending','line_number':300,'multiline':False]['text':' overlapping ranges','line_number':310,'multiline':False]['text':' Delta encode operations','line_number':321,'multiline':False]['text':' Record already the future line numbers that might be auto whitespace removal candidates on next edit','line_number':330,'multiline':False]['text':' Can only sort reverse operations when the order is not significant','line_number':366,'multiline':False]['text':' sort line numbers auto whitespace removal candidates for next edit descending','line_number':381,'multiline':False]['text':' Do not have the same line number twice','line_number':388,'multiline':False]['text':'*
	 * Transform operations such that they represent the same logic edit,
	 * but that they also do not cause OOM crashes.
	 ','line_number':412,'multiline':True]['text':' We know from empirical testing that a thousand edits work fine regardless of their shape.','line_number':418,'multiline':False]['text':' At one point, due to how events are emitted and how each operation is handled,','line_number':422,'multiline':False]['text':' some operations can trigger a high amount of temporary string allocations,','line_number':423,'multiline':False]['text':' that will immediately get edited again.','line_number':424,'multiline':False]['text':' e.g. a formatter inserting ridiculous ammounts of \n on a model with a single line','line_number':425,'multiline':False]['text':' Therefore, the strategy is to collapse all the operations into a huge single edit operation','line_number':426,'multiline':False]['text':' (1) -- Push old text','line_number':445,'multiline':False]['text':' (2) -- Push new text','line_number':448,'multiline':False]['text':' operations are from bottom to top','line_number':480,'multiline':False]['text':' no-op','line_number':490,'multiline':False]['text':' replacement','line_number':495,'multiline':False]['text':' deletion','line_number':500,'multiline':False]['text':' #endregion','line_number':520,'multiline':False]['text':' #region helper','line_number':522,'multiline':False]['text':' testing purpose.','line_number':523,'multiline':False]['text':' the operation inserts something','line_number':535,'multiline':False]['text':' single line insert','line_number':539,'multiline':False]['text':' multi line insert','line_number':542,'multiline':False]['text':' There is nothing to insert','line_number':546,'multiline':False]['text':'*
	 * Assumes `operations` are validated and sorted ascending
	 ','line_number':553,'multiline':True]['text':' the operation inserts something','line_number':584,'multiline':False]['text':' single line insert','line_number':588,'multiline':False]['text':' multi line insert','line_number':591,'multiline':False]['text':' There is nothing to insert','line_number':595,'multiline':False]['text':' #endregion','line_number':624,'multiline':False]