['text':' Welcome to the PyTorch setup.py.','line_number':1,'multiline':False]['text':'','line_number':2,'multiline':False]['text':' Environment variables you are probably interested in:','line_number':3,'multiline':False]['text':'','line_number':4,'multiline':False]['text':'   DEBUG','line_number':5,'multiline':False]['text':'     build with -O0 and -g (debug symbols)','line_number':6,'multiline':False]['text':'','line_number':7,'multiline':False]['text':'   REL_WITH_DEB_INFO','line_number':8,'multiline':False]['text':'     build with optimizations and -g (debug symbols)','line_number':9,'multiline':False]['text':'','line_number':10,'multiline':False]['text':'   USE_CUSTOM_DEBINFO="path/to/file1.cpp;path/to/file2.cpp"','line_number':11,'multiline':False]['text':'     build with debug info only for specified files','line_number':12,'multiline':False]['text':'','line_number':13,'multiline':False]['text':'   MAX_JOBS','line_number':14,'multiline':False]['text':'     maximum number of compile jobs we should use to compile your code','line_number':15,'multiline':False]['text':'','line_number':16,'multiline':False]['text':'   USE_CUDA=0','line_number':17,'multiline':False]['text':'     disables CUDA build','line_number':18,'multiline':False]['text':'','line_number':19,'multiline':False]['text':'   CFLAGS','line_number':20,'multiline':False]['text':'     flags to apply to both C and C++ files to be compiled (a quirk of setup.py','line_number':21,'multiline':False]['text':'     which we have faithfully adhered to in our build system is that CFLAGS','line_number':22,'multiline':False]['text':'     also applies to C++ files (unless CXXFLAGS is set), in contrast to the','line_number':23,'multiline':False]['text':'     default behavior of autogoo and cmake build systems.)','line_number':24,'multiline':False]['text':'','line_number':25,'multiline':False]['text':'   CC','line_number':26,'multiline':False]['text':'     the C/C++ compiler to use','line_number':27,'multiline':False]['text':'','line_number':28,'multiline':False]['text':' Environment variables for feature toggles:','line_number':29,'multiline':False]['text':'','line_number':30,'multiline':False]['text':'   DEBUG_CUDA=1','line_number':31,'multiline':False]['text':'     if used in conjunction with DEBUG or REL_WITH_DEB_INFO, will also','line_number':32,'multiline':False]['text':'     build CUDA kernels with -lineinfo --source-in-ptx.  Note that','line_number':33,'multiline':False]['text':'     on CUDA 12 this may cause nvcc to OOM, so this is disabled by default.','line_number':34,'multiline':False]['text':'   USE_CUDNN=0','line_number':36,'multiline':False]['text':'     disables the cuDNN build','line_number':37,'multiline':False]['text':'','line_number':38,'multiline':False]['text':'   USE_CUSPARSELT=0','line_number':39,'multiline':False]['text':'     disables the cuSPARSELt build','line_number':40,'multiline':False]['text':'','line_number':41,'multiline':False]['text':'   USE_FBGEMM=0','line_number':42,'multiline':False]['text':'     disables the FBGEMM build','line_number':43,'multiline':False]['text':'','line_number':44,'multiline':False]['text':'   USE_KINETO=0','line_number':45,'multiline':False]['text':'     disables usage of libkineto library for profiling','line_number':46,'multiline':False]['text':'','line_number':47,'multiline':False]['text':'   USE_NUMPY=0','line_number':48,'multiline':False]['text':'     disables the NumPy build','line_number':49,'multiline':False]['text':'','line_number':50,'multiline':False]['text':'   BUILD_TEST=0','line_number':51,'multiline':False]['text':'     disables the test build','line_number':52,'multiline':False]['text':'','line_number':53,'multiline':False]['text':'   USE_MKLDNN=0','line_number':54,'multiline':False]['text':'     disables use of MKLDNN','line_number':55,'multiline':False]['text':'','line_number':56,'multiline':False]['text':'   USE_MKLDNN_ACL','line_number':57,'multiline':False]['text':'     enables use of Compute Library backend for MKLDNN on Arm;','line_number':58,'multiline':False]['text':'     USE_MKLDNN must be explicitly enabled.','line_number':59,'multiline':False]['text':'','line_number':60,'multiline':False]['text':'   MKLDNN_CPU_RUNTIME','line_number':61,'multiline':False]['text':'     MKL-DNN threading mode: TBB or OMP (default)','line_number':62,'multiline':False]['text':'','line_number':63,'multiline':False]['text':'   USE_STATIC_MKL','line_number':64,'multiline':False]['text':'     Prefer to link with MKL statically - Unix only','line_number':65,'multiline':False]['text':'   USE_ITT=0','line_number':66,'multiline':False]['text':'     disable use of Intel(R) VTune Profiler's ITT functionality','line_number':67,'multiline':False]['text':'','line_number':68,'multiline':False]['text':'   USE_NNPACK=0','line_number':69,'multiline':False]['text':'     disables NNPACK build','line_number':70,'multiline':False]['text':'','line_number':71,'multiline':False]['text':'   USE_QNNPACK=0','line_number':72,'multiline':False]['text':'     disables QNNPACK build (quantized 8-bit operators)','line_number':73,'multiline':False]['text':'','line_number':74,'multiline':False]['text':'   USE_DISTRIBUTED=0','line_number':75,'multiline':False]['text':'     disables distributed (c10d, gloo, mpi, etc.) build','line_number':76,'multiline':False]['text':'','line_number':77,'multiline':False]['text':'   USE_TENSORPIPE=0','line_number':78,'multiline':False]['text':'     disables distributed Tensorpipe backend build','line_number':79,'multiline':False]['text':'','line_number':80,'multiline':False]['text':'   USE_GLOO=0','line_number':81,'multiline':False]['text':'     disables distributed gloo backend build','line_number':82,'multiline':False]['text':'','line_number':83,'multiline':False]['text':'   USE_MPI=0','line_number':84,'multiline':False]['text':'     disables distributed MPI backend build','line_number':85,'multiline':False]['text':'','line_number':86,'multiline':False]['text':'   USE_SYSTEM_NCCL=0','line_number':87,'multiline':False]['text':'     disables use of system-wide nccl (we will use our submoduled','line_number':88,'multiline':False]['text':'     copy in third_party/nccl)','line_number':89,'multiline':False]['text':'','line_number':90,'multiline':False]['text':'   BUILD_CAFFE2_OPS=0','line_number':91,'multiline':False]['text':'     disable Caffe2 operators build','line_number':92,'multiline':False]['text':'','line_number':93,'multiline':False]['text':'   BUILD_CAFFE2=0','line_number':94,'multiline':False]['text':'     disable Caffe2 build','line_number':95,'multiline':False]['text':'','line_number':96,'multiline':False]['text':'   USE_IBVERBS','line_number':97,'multiline':False]['text':'     toggle features related to distributed support','line_number':98,'multiline':False]['text':'','line_number':99,'multiline':False]['text':'   USE_OPENCV','line_number':100,'multiline':False]['text':'     enables use of OpenCV for additional operators','line_number':101,'multiline':False]['text':'','line_number':102,'multiline':False]['text':'   USE_OPENMP=0','line_number':103,'multiline':False]['text':'     disables use of OpenMP for parallelization','line_number':104,'multiline':False]['text':'','line_number':105,'multiline':False]['text':'   USE_FFMPEG','line_number':106,'multiline':False]['text':'     enables use of ffmpeg for additional operators','line_number':107,'multiline':False]['text':'','line_number':108,'multiline':False]['text':'   USE_FLASH_ATTENTION=0','line_number':109,'multiline':False]['text':'     disables building flash attention for scaled dot product attention','line_number':110,'multiline':False]['text':'','line_number':111,'multiline':False]['text':'   USE_MEM_EFF_ATTENTION=0','line_number':112,'multiline':False]['text':'    disables building memory efficient attention for scaled dot product attention','line_number':113,'multiline':False]['text':'','line_number':114,'multiline':False]['text':'   USE_LEVELDB','line_number':115,'multiline':False]['text':'     enables use of LevelDB for storage','line_number':116,'multiline':False]['text':'','line_number':117,'multiline':False]['text':'   USE_LMDB','line_number':118,'multiline':False]['text':'     enables use of LMDB for storage','line_number':119,'multiline':False]['text':'','line_number':120,'multiline':False]['text':'   BUILD_BINARY','line_number':121,'multiline':False]['text':'     enables the additional binaries/ build','line_number':122,'multiline':False]['text':'','line_number':123,'multiline':False]['text':'   ATEN_AVX512_256=TRUE','line_number':124,'multiline':False]['text':'     ATen AVX2 kernels can use 32 ymm registers, instead of the default 16.','line_number':125,'multiline':False]['text':'     This option can be used if AVX512 doesn't perform well on a machine.','line_number':126,'multiline':False]['text':'     The FBGEMM library also uses AVX512_256 kernels on Xeon D processors,','line_number':127,'multiline':False]['text':'     but it also has some (optimized) assembly code.','line_number':128,'multiline':False]['text':'','line_number':129,'multiline':False]['text':'   PYTORCH_BUILD_VERSION','line_number':130,'multiline':False]['text':'   PYTORCH_BUILD_NUMBER','line_number':131,'multiline':False]['text':'     specify the version of PyTorch, rather than the hard-coded version','line_number':132,'multiline':False]['text':'     in this file; used when we're building binaries for distribution','line_number':133,'multiline':False]['text':'','line_number':134,'multiline':False]['text':'   TORCH_CUDA_ARCH_LIST','line_number':135,'multiline':False]['text':'     specify which CUDA architectures to build for.','line_number':136,'multiline':False]['text':'     ie `TORCH_CUDA_ARCH_LIST="6.0;7.0"`','line_number':137,'multiline':False]['text':'     These are not CUDA versions, instead, they specify what','line_number':138,'multiline':False]['text':'     classes of NVIDIA hardware we should generate PTX for.','line_number':139,'multiline':False]['text':'','line_number':140,'multiline':False]['text':'   PYTORCH_ROCM_ARCH','line_number':141,'multiline':False]['text':'     specify which AMD GPU targets to build for.','line_number':142,'multiline':False]['text':'     ie `PYTORCH_ROCM_ARCH="gfx900;gfx906"`','line_number':143,'multiline':False]['text':'','line_number':144,'multiline':False]['text':'   ONNX_NAMESPACE','line_number':145,'multiline':False]['text':'     specify a namespace for ONNX built here rather than the hard-coded','line_number':146,'multiline':False]['text':'     one in this file; needed to build with other frameworks that share ONNX.','line_number':147,'multiline':False]['text':'','line_number':148,'multiline':False]['text':'   BLAS','line_number':149,'multiline':False]['text':'     BLAS to be used by Caffe2. Can be MKL, Eigen, ATLAS, FlexiBLAS, or OpenBLAS. If set','line_number':150,'multiline':False]['text':'     then the build will fail if the requested BLAS is not found, otherwise','line_number':151,'multiline':False]['text':'     the BLAS will be chosen based on what is found on your system.','line_number':152,'multiline':False]['text':'','line_number':153,'multiline':False]['text':'   MKL_THREADING','line_number':154,'multiline':False]['text':'     MKL threading mode: SEQ, TBB or OMP (default)','line_number':155,'multiline':False]['text':'','line_number':156,'multiline':False]['text':'   USE_REDIS','line_number':157,'multiline':False]['text':'     Whether to use Redis for distributed workflows (Linux only)','line_number':158,'multiline':False]['text':'','line_number':159,'multiline':False]['text':'   USE_ZSTD','line_number':160,'multiline':False]['text':'     Enables use of ZSTD, if the libraries are found','line_number':161,'multiline':False]['text':'','line_number':162,'multiline':False]['text':'   USE_ROCM_KERNEL_ASSERT=1','line_number':163,'multiline':False]['text':'     Enable kernel assert in ROCm platform','line_number':164,'multiline':False]['text':'','line_number':165,'multiline':False]['text':' Environment variables we respect (these environment variables are','line_number':166,'multiline':False]['text':' conventional and are often understood/set by other software.)','line_number':167,'multiline':False]['text':'','line_number':168,'multiline':False]['text':'   CUDA_HOME (Linux/OS X)','line_number':169,'multiline':False]['text':'   CUDA_PATH (Windows)','line_number':170,'multiline':False]['text':'     specify where CUDA is installed; usually /usr/local/cuda or','line_number':171,'multiline':False]['text':'     /usr/local/cuda-x.y','line_number':172,'multiline':False]['text':'   CUDAHOSTCXX','line_number':173,'multiline':False]['text':'     specify a different compiler than the system one to use as the CUDA','line_number':174,'multiline':False]['text':'     host compiler for nvcc.','line_number':175,'multiline':False]['text':'','line_number':176,'multiline':False]['text':'   CUDA_NVCC_EXECUTABLE','line_number':177,'multiline':False]['text':'     Specify a NVCC to use. This is used in our CI to point to a cached nvcc','line_number':178,'multiline':False]['text':'','line_number':179,'multiline':False]['text':'   CUDNN_LIB_DIR','line_number':180,'multiline':False]['text':'   CUDNN_INCLUDE_DIR','line_number':181,'multiline':False]['text':'   CUDNN_LIBRARY','line_number':182,'multiline':False]['text':'     specify where cuDNN is installed','line_number':183,'multiline':False]['text':'','line_number':184,'multiline':False]['text':'   MIOPEN_LIB_DIR','line_number':185,'multiline':False]['text':'   MIOPEN_INCLUDE_DIR','line_number':186,'multiline':False]['text':'   MIOPEN_LIBRARY','line_number':187,'multiline':False]['text':'     specify where MIOpen is installed','line_number':188,'multiline':False]['text':'','line_number':189,'multiline':False]['text':'   NCCL_ROOT','line_number':190,'multiline':False]['text':'   NCCL_LIB_DIR','line_number':191,'multiline':False]['text':'   NCCL_INCLUDE_DIR','line_number':192,'multiline':False]['text':'     specify where nccl is installed','line_number':193,'multiline':False]['text':'','line_number':194,'multiline':False]['text':'   NVTOOLSEXT_PATH (Windows only)','line_number':195,'multiline':False]['text':'     specify where nvtoolsext is installed','line_number':196,'multiline':False]['text':'','line_number':197,'multiline':False]['text':'   ACL_ROOT_DIR','line_number':198,'multiline':False]['text':'     specify where Compute Library is installed','line_number':199,'multiline':False]['text':'','line_number':200,'multiline':False]['text':'   LIBRARY_PATH','line_number':201,'multiline':False]['text':'   LD_LIBRARY_PATH','line_number':202,'multiline':False]['text':'     we will search for libraries in these paths','line_number':203,'multiline':False]['text':'','line_number':204,'multiline':False]['text':'   ATEN_THREADING','line_number':205,'multiline':False]['text':'     ATen parallel backend to use for intra- and inter-op parallelism','line_number':206,'multiline':False]['text':'     possible values:','line_number':207,'multiline':False]['text':'       OMP - use OpenMP for intra-op and native backend for inter-op tasks','line_number':208,'multiline':False]['text':'       NATIVE - use native thread pool for both intra- and inter-op tasks','line_number':209,'multiline':False]['text':'       TBB - using TBB for intra- and native thread pool for inter-op parallelism','line_number':210,'multiline':False]['text':'','line_number':211,'multiline':False]['text':'   USE_TBB','line_number':212,'multiline':False]['text':'      enable TBB support','line_number':213,'multiline':False]['text':'','line_number':214,'multiline':False]['text':'   USE_SYSTEM_TBB','line_number':215,'multiline':False]['text':'      Use system-provided Intel TBB.','line_number':216,'multiline':False]['text':'','line_number':217,'multiline':False]['text':'   USE_SYSTEM_LIBS (work in progress)','line_number':218,'multiline':False]['text':'      Use system-provided libraries to satisfy the build dependencies.','line_number':219,'multiline':False]['text':'      When turned on, the following cmake variables will be toggled as well:','line_number':220,'multiline':False]['text':'        USE_SYSTEM_CPUINFO=ON USE_SYSTEM_SLEEF=ON BUILD_CUSTOM_PROTOBUF=OFF','line_number':221,'multiline':False]['text':'','line_number':222,'multiline':False]['text':'   USE_MIMALLOC','line_number':223,'multiline':False]['text':'      Static link mimalloc into C10, and use mimalloc in alloc_cpu & alloc_free.','line_number':224,'multiline':False]['text':'      By default, It is only enabled on Windows.','line_number':225,'multiline':False]['text':'###############################################################################','line_number':267,'multiline':False]['text':' Parameters parsed from environment','line_number':268,'multiline':False]['text':'###############################################################################','line_number':269,'multiline':False]['text':' see if the user passed a quiet flag to setup.py arguments and respect','line_number':273,'multiline':False]['text':' that in our parts of the build','line_number':274,'multiline':False]['text':' Stop once cmake terminates. Leave users a chance to adjust build','line_number':284,'multiline':False]['text':' options.','line_number':285,'multiline':False]['text':' rebuild is gone, make it build','line_number':289,'multiline':False]['text':' Make distutils respect --quiet too','line_number':311,'multiline':False]['text':' Constant known variables used throughout this file','line_number':314,'multiline':False]['text':' CMAKE: full path to python library','line_number':320,'multiline':False]['text':' Fix virtualenv builds','line_number':325,'multiline':False]['text':'###############################################################################','line_number':337,'multiline':False]['text':' Version, create_version_file, and package_name','line_number':338,'multiline':False]['text':'###############################################################################','line_number':339,'multiline':False]['text':' If none of the submodule folders exists, try to initialize them','line_number':388,'multiline':False]['text':' Windows has very bad support for symbolic links.','line_number':424,'multiline':False]['text':' Instead of using symlinks, we're going to copy files over','line_number':425,'multiline':False]['text':' (new_path, orig_path)','line_number':427,'multiline':False]['text':' Directories are OK and are recursively mirrored.','line_number':428,'multiline':False]['text':' Create the dirs involved in new_path if they don't exist','line_number':440,'multiline':False]['text':' Copy the files from the orig location to the new location','line_number':444,'multiline':False]['text':' copytree fails if the tree exists already, so remove it.','line_number':450,'multiline':False]['text':' all the work we need to do _before_ setup runs','line_number':457,'multiline':False]['text':' Use copies instead of symbolic files.','line_number':481,'multiline':False]['text':' Windows has very poor support for them.','line_number':482,'multiline':False]['text':'###############################################################################','line_number':504,'multiline':False]['text':' Building dependent libraries','line_number':505,'multiline':False]['text':'###############################################################################','line_number':506,'multiline':False]['text':' Copy libiomp5.dylib inside the wheel package on OS X','line_number':524,'multiline':False]['text':' Parse libtorch_cpu load commands','line_number':530,'multiline':False]['text':' Copy libiomp5 from rpath locations','line_number':552,'multiline':False]['text':' Report build options. This is run after the build completes so # `CMakeCache.txt` exists and we can get an','line_number':562,'multiline':False]['text':' accurate report on what is used and what is not.','line_number':563,'multiline':False]['text':' Do not use clang to compile extensions if `-fstack-clash-protection` is defined','line_number':635,'multiline':False]['text':' in system CFLAGS','line_number':636,'multiline':False]['text':' It's an old-style class in Python 2.7...','line_number':645,'multiline':False]['text':' Copy the essential export library to compile C++ extensions.','line_number':651,'multiline':False]['text':' Create "torch/lib" directory if not exists.','line_number':668,'multiline':False]['text':' (It is not created yet in "develop" mode.)','line_number':669,'multiline':False]['text':' The caffe2 extensions are created in','line_number':678,'multiline':False]['text':' tmp_install/lib/pythonM.m/site-packages/caffe2/python/','line_number':679,'multiline':False]['text':' and need to be copied to build/lib.linux.... , which will be a','line_number':680,'multiline':False]['text':' platform dependent build folder created by the "build" command of','line_number':681,'multiline':False]['text':' setuptools. Only the contents of this folder are installed in the','line_number':682,'multiline':False]['text':' "install" command by default.','line_number':683,'multiline':False]['text':' We only make this copy for Caffe2's pybind extensions','line_number':684,'multiline':False]['text':' Copy functorch extension','line_number':718,'multiline':False]['text':' cquery does not like c++ compiles that start with gcc.','line_number':751,'multiline':False]['text':' It forgets to include the c++ header directories.','line_number':752,'multiline':False]['text':' We can work around this by replacing the gcc calls that python','line_number':753,'multiline':False]['text':' setup.py generates with g++ calls instead','line_number':754,'multiline':False]['text':' This is useful when wheel is not installed and bdist_wheel is not','line_number':811,'multiline':False]['text':' specified on the command line. If it _is_ specified, parsing the command','line_number':812,'multiline':False]['text':' line will fail before wheel_concatenate is needed','line_number':813,'multiline':False]['text':' Need to create the proper LICENSE.txt for the wheel','line_number':816,'multiline':False]['text':' Marker is found and stop reading .gitignore.','line_number':850,'multiline':False]['text':' Ignore lines which begin with '#'.','line_number':852,'multiline':False]['text':' Don't remove absolute paths from the system','line_number':854,'multiline':False]['text':' CMakeCache.txt does not exist. Probably running "python setup.py clean" over a clean directory.','line_number':874,'multiline':False]['text':'###############################################################################','line_number':887,'multiline':False]['text':' Configure compile flags','line_number':888,'multiline':False]['text':'###############################################################################','line_number':889,'multiline':False]['text':' /NODEFAULTLIB makes sure we only link to DLL runtime','line_number':895,'multiline':False]['text':' and matches the flags set for protobuf and ONNX','line_number':896,'multiline':False]['text':' /MD links against DLL runtime','line_number':898,'multiline':False]['text':' and matches the flags set for protobuf and ONNX','line_number':899,'multiline':False]['text':' /EHsc is about standard C++ exception handling','line_number':900,'multiline':False]['text':' Python 2.6 requires -fno-strict-aliasing, see','line_number':911,'multiline':False]['text':' http://legacy.python.org/dev/peps/pep-3123/','line_number':912,'multiline':False]['text':' We also depend on it in our code (even Python 3).','line_number':913,'multiline':False]['text':' pypi cuda package that requires installation of cuda runtime, cudnn and cublas','line_number':943,'multiline':False]['text':' should be included in all wheels uploaded to pypi','line_number':944,'multiline':False]['text':' Cross-compile for M1','line_number':954,'multiline':False]['text':'###############################################################################','line_number':983,'multiline':False]['text':' Declare extensions and package','line_number':984,'multiline':False]['text':'###############################################################################','line_number':985,'multiline':False]['text':' These extensions are built by cmake and copied manually in build_extensions()','line_number':1008,'multiline':False]['text':' inside the build_ext implementation','line_number':1009,'multiline':False]['text':' post run, warnings, printed at the end to make them more visible','line_number':1046,'multiline':False]['text':' the list of runtime dependencies required by this built package','line_number':1069,'multiline':False]['text':' Parse the command line and check the arguments before we proceed with','line_number':1079,'multiline':False]['text':' building deps and setup. We need to set values so `--help` works.','line_number':1080,'multiline':False]['text':' Read in README.md for our long_description','line_number':1109,'multiline':False]['text':' Recursive glob doesn't work in setup.py,','line_number':1310,'multiline':False]['text':' https://github.com/pypa/setuptools/issues/1806','line_number':1311,'multiline':False]['text':' To make this robust we should replace it with some code that','line_number':1312,'multiline':False]['text':' returns a list of everything under packaged/','line_number':1313,'multiline':False]['text':' PyPI package information.','line_number':1347,'multiline':False]