['text':'*
 * Copyright (c) 2016-present, Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ','line_number':1,'multiline':True]['text':' Based on https://github.com/daijifeng001/caffe-rfcn/blob/r-fcn/src/caffe/layers/psroi_pooling_layer.cu','line_number':17,'multiline':False]['text':'','line_number':18,'multiline':False]['text':' ------------------------------------------------------------------','line_number':19,'multiline':False]['text':' R-FCN','line_number':20,'multiline':False]['text':' Copyright (c) 2016 Microsoft','line_number':21,'multiline':False]['text':' Licensed under The MIT License [see r-fcn/LICENSE for details]','line_number':22,'multiline':False]['text':' Written by Yi Li','line_number':23,'multiline':False]['text':' ------------------------------------------------------------------','line_number':24,'multiline':False]['text':'','line_number':25,'multiline':False]['text':' COPYRIGHT','line_number':26,'multiline':False]['text':'','line_number':27,'multiline':False]['text':' All contributions by the University of California:','line_number':28,'multiline':False]['text':' Copyright (c) 2014, 2015, The Regents of the University of California','line_number':29,'multiline':False]['text':' (Regents)','line_number':30,'multiline':False]['text':' All rights reserved.','line_number':31,'multiline':False]['text':'','line_number':32,'multiline':False]['text':' All other contributions:','line_number':33,'multiline':False]['text':' Copyright (c) 2014, 2015, the respective contributors','line_number':34,'multiline':False]['text':' All rights reserved.','line_number':35,'multiline':False]['text':'','line_number':36,'multiline':False]['text':' Caffe uses a shared copyright model: each contributor holds copyright over','line_number':37,'multiline':False]['text':' their contributions to Caffe. The project versioning records all such','line_number':38,'multiline':False]['text':' contribution and copyright details. If a contributor wants to further mark','line_number':39,'multiline':False]['text':' their specific copyright on a particular contribution, they should indicate','line_number':40,'multiline':False]['text':' their copyright solely in the commit message of the change when it is','line_number':41,'multiline':False]['text':' committed.','line_number':42,'multiline':False]['text':'','line_number':43,'multiline':False]['text':' LICENSE','line_number':44,'multiline':False]['text':'','line_number':45,'multiline':False]['text':' Redistribution and use in source and binary forms, with or without','line_number':46,'multiline':False]['text':' modification, are permitted provided that the following conditions are met:','line_number':47,'multiline':False]['text':'','line_number':48,'multiline':False]['text':' 1. Redistributions of source code must retain the above copyright notice,','line_number':49,'multiline':False]['text':'    this list of conditions and the following disclaimer.','line_number':50,'multiline':False]['text':' 2. Redistributions in binary form must reproduce the above copyright notice,','line_number':51,'multiline':False]['text':'    this list of conditions and the following disclaimer in the documentation','line_number':52,'multiline':False]['text':'    and/or other materials provided with the distribution.','line_number':53,'multiline':False]['text':'','line_number':54,'multiline':False]['text':' THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"','line_number':55,'multiline':False]['text':' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE','line_number':56,'multiline':False]['text':' IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE','line_number':57,'multiline':False]['text':' ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE','line_number':58,'multiline':False]['text':' LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR','line_number':59,'multiline':False]['text':' CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF','line_number':60,'multiline':False]['text':' SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS','line_number':61,'multiline':False]['text':' INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN','line_number':62,'multiline':False]['text':' CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)','line_number':63,'multiline':False]['text':' ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE','line_number':64,'multiline':False]['text':' POSSIBILITY OF SUCH DAMAGE.','line_number':65,'multiline':False]['text':'','line_number':66,'multiline':False]['text':' CONTRIBUTION AGREEMENT','line_number':67,'multiline':False]['text':'','line_number':68,'multiline':False]['text':' By contributing to the BVLC/caffe repository through pull-request, comment,','line_number':69,'multiline':False]['text':' or otherwise, the contributor releases their content to the','line_number':70,'multiline':False]['text':' license and copyright terms herein.','line_number':71,'multiline':False]['text':' The output is in order (n, ctop, ph, pw)','line_number':107,'multiline':False]['text':' [start, end) interval for spatial sampling','line_number':113,'multiline':False]['text':' Force too small ROIs to be 1x1','line_number':125,'multiline':False]['text':' avoid 0','line_number':126,'multiline':False]['text':' Compute w and h at bottom','line_number':129,'multiline':False]['text':' Add roi offsets and clip to input boundaries','line_number':133,'multiline':False]['text':' The output is in order (n, ctop, ph, pw)','line_number':185,'multiline':False]['text':' [start, end) interval for spatial sampling','line_number':190,'multiline':False]['text':' Force too small ROIs to be 1x1','line_number':202,'multiline':False]['text':'avoid 0','line_number':203,'multiline':False]['text':' Compute w and h at bottom','line_number':206,'multiline':False]['text':' Add roi offsets and clip to input boundaries','line_number':218,'multiline':False]['text':' Compute c at bottom','line_number':225,'multiline':False]['text':' namespace','line_number':240,'multiline':False]['text':' Input data to pool','line_number':244,'multiline':False]['text':' RoIs','line_number':245,'multiline':False]['text':' PSRoI pooled data','line_number':247,'multiline':False]['text':' mapping_channel','line_number':248,'multiline':False]['text':' Input data to pool','line_number':263,'multiline':False]['text':' RoIs','line_number':264,'multiline':False]['text':' mapping channels','line_number':265,'multiline':False]['text':' Gradient of net w.r.t. output of "forward" op','line_number':266,'multiline':False]['text':' (aka "gradOutput")','line_number':267,'multiline':False]['text':' Gradient of net w.r.t. input to "forward" op','line_number':269,'multiline':False]['text':' (aka "gradInput")','line_number':270,'multiline':False]['text':' Must zero-out dX before accumulating gradients','line_number':271,'multiline':False]['text':' namespace caffe2','line_number':289,'multiline':False]