['text':'','line_number':16,'multiline':False]['text':' Should match original Detectron code at','line_number':17,'multiline':False]['text':' https://github.com/facebookresearch/Detectron/blob/master/lib/ops/collect_and_distribute_fpn_rpn_proposals.py','line_number':18,'multiline':False]['text':'','line_number':19,'multiline':False]['text':' Compute level ids','line_number':38,'multiline':False]['text':' Eqn.(1) in FPN paper','line_number':41,'multiline':False]['text':' rois are in [[batch_idx, x0, y0, x1, y2], ...] format','line_number':55,'multiline':False]['text':' Combine predictions across all levels and retain the top scoring','line_number':56,'multiline':False]['text':'','line_number':57,'multiline':False]['text':' equivalent to Detectron code','line_number':58,'multiline':False]['text':'   rois = np.concatenate([blob.data for blob in roi_inputs])','line_number':59,'multiline':False]['text':'   scores = np.concatenate([blob.data for blob in score_inputs]).squeeze()','line_number':60,'multiline':False]['text':' equivalent to Detectron code','line_number':73,'multiline':False]['text':'   lvl_min = cfg.FPN.ROI_MIN_LEVEL','line_number':74,'multiline':False]['text':'   lvl_max = cfg.FPN.ROI_MAX_LEVEL','line_number':75,'multiline':False]['text':' equivalent to Detectron code','line_number':84,'multiline':False]['text':'   outputs[0].reshape(rois.shape)','line_number':85,'multiline':False]['text':'   outputs[0].data[...] = rois','line_number':86,'multiline':False]['text':' Create new roi blobs for each FPN level','line_number':89,'multiline':False]['text':' (See: modeling.FPN.add_multilevel_roi_blobs which is similar but annoying','line_number':90,'multiline':False]['text':' to generalize to support this particular case.)','line_number':91,'multiline':False]['text':' equivalent to Detectron code','line_number':96,'multiline':False]['text':'   outputs[output_idx + 1].reshape(blob_roi_level.shape)','line_number':97,'multiline':False]['text':'   outputs[output_idx + 1].data[...] = blob_roi_level','line_number':98,'multiline':False]['text':' equivalent to Detectron code','line_number':102,'multiline':False]['text':'   py_op_copy_blob(','line_number':103,'multiline':False]['text':'       rois_idx_restore.astype(np.int32), outputs[-1])','line_number':104,'multiline':False]['text':' remove the first rois from output of distribute','line_number':146,'multiline':False]['text':' Make RoIs have positive area, since they','line_number':165,'multiline':False]['text':' are in the format [[batch_idx, x0, y0, x1, y2], ...]','line_number':166,'multiline':False]