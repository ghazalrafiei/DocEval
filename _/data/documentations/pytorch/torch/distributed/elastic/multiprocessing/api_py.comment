['text':'!/usr/bin/env python3','line_number':1,'multiline':False]['text':' Copyright (c) Facebook, Inc. and its affiliates.','line_number':3,'multiline':False]['text':' All rights reserved.','line_number':4,'multiline':False]['text':'','line_number':5,'multiline':False]['text':' This source code is licensed under the BSD-style license found in the','line_number':6,'multiline':False]['text':' LICENSE file in the root directory of this source tree.','line_number':7,'multiline':False]['text':' type: ignore[attr-defined] # noqa: F821','line_number':68,'multiline':False]['text':' type: ignore[attr-defined] # noqa: F821','line_number':76,'multiline':False]['text':' type: ignore[return]','line_number':115,'multiline':False]['text':' return None -> should NEVER reach here since we regex check input','line_number':119,'multiline':False]['text':' vm is a number (e.g. 0)','line_number':121,'multiline':False]['text':' vm is a mapping (e.g. 0:1,1:2)','line_number':123,'multiline':False]['text':' validate that all mappings have the same number of keys and','line_number':207,'multiline':False]['text':' all local ranks are accounted for','line_number':208,'multiline':False]['text':' redirect file for stdout (to console if None)','line_number':337,'multiline':False]['text':' redirect file for stderr (to console if None)','line_number':338,'multiline':False]['text':' get the per-rank params up front so we fail fast if no mapping is found','line_number':342,'multiline':False]['text':' each ret_val queue will always contain a single element.','line_number':393,'multiline':False]['text':' see comments in ``join()`` for what this is','line_number':399,'multiline':False]['text':' Note: set method should ONLY be invoked for the use case when all processes finished','line_number':402,'multiline':False]['text':' successfully. If any process died on event.wait() calling set() method will deadlock.','line_number':403,'multiline':False]['text':' assertion for mypy type checker','line_number':433,'multiline':False]['text':' torch.mp.ProcessContext Throws an Exception if some/all of','line_number':436,'multiline':False]['text':' worker processes failed','line_number':437,'multiline':False]['text':' timeout < 0 checks worker status and return immediately','line_number':438,'multiline':False]['text':' Join will never return success since we use synchronize.Event to wait','line_number':439,'multiline':False]['text':' for all processes to finish.','line_number':440,'multiline':False]['text':' IMPORTANT: we use multiprocessing.Queue to carry worker return values','line_number':443,'multiline':False]['text':' back to the parent, the worker process will wait before terminating','line_number':444,'multiline':False]['text':' until all the buffered items are fed by the feeder thread to the underlying','line_number':445,'multiline':False]['text':' pipe. Hence to prevent deadlocks on large return values,','line_number':446,'multiline':False]['text':' we opportunistically try queue.get on each join call','line_number':447,'multiline':False]['text':' See: https://docs.python.org/2/library/multiprocessing.html#all-platforms','line_number':448,'multiline':False]['text':' save the return values temporarily into a member var','line_number':452,'multiline':False]['text':' we should ALWAYS have ALL the return values when all the processes are done','line_number':456,'multiline':False]['text':' Wait untill all processes are finished. At this point workers finished executing','line_number':458,'multiline':False]['text':' user function','line_number':459,'multiline':False]['text':' entrypoint for MultiprocessContext will always be a Callable','line_number':475,'multiline':False]['text':' type: ignore[union-attr]','line_number':476,'multiline':False]['text':' assertion for mypy type checking','line_number':504,'multiline':False]['text':' If the process exited because of some reason,','line_number':516,'multiline':False]['text':' `ProcessLookupError` will be raised, it is safe to ignore it.','line_number':517,'multiline':False]['text':' If the process exited because of some reason,','line_number':534,'multiline':False]['text':' `ProcessLookupError` will be raised, it is safe to ignore it.','line_number':535,'multiline':False]['text':' inherit parent environment vars','line_number':556,'multiline':False]['text':' pyre-fixme[6]: Expected `Union[typing.Sequence[Union[_PathLike[bytes],','line_number':568,'multiline':False]['text':'  _PathLike[str], bytes, str]], bytes, str]` for 1st param but got','line_number':569,'multiline':False]['text':'  `Tuple[str, *Tuple[Any, ...]]`.','line_number':570,'multiline':False]['text':' state vector; _vdone[local_rank] -> is local_rank finished or not','line_number':620,'multiline':False]['text':' type: ignore[arg-type] # entrypoint is always a str','line_number':632,'multiline':False]['text':' failed or signaled','line_number':648,'multiline':False]['text':' else: --> succeeded; nothing to do','line_number':655,'multiline':False]['text':' if ALL procs are finished or ANY have failed','line_number':659,'multiline':False]['text':' terminate all running procs','line_number':661,'multiline':False]['text':' Populate return with dummy values. This provides consistency with MultiprocessingHandler','line_number':676,'multiline':False]['text':' there are no failures and procs still running','line_number':682,'multiline':False]['text':' Ignore the timeout expired exception, since','line_number':708,'multiline':False]['text':' the child process will be forcefully terminated via SIGKILL','line_number':709,'multiline':False]