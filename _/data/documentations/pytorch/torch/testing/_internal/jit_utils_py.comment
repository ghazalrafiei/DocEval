['text':' Torch','line_number':1,'multiline':False]['text':' noqa: F401','line_number':4,'multiline':False]['text':' Testing utils','line_number':16,'multiline':False]['text':' noqa: F401','line_number':22,'multiline':False]['text':' Standard library','line_number':24,'multiline':False]['text':' HIP supports half, no version check necessary','line_number':45,'multiline':False]['text':' unittest overrides all warning filters and forces all of them to show up','line_number':141,'multiline':False]['text':' after we install our own to silence those coming from inside PyTorch.','line_number':142,'multiline':False]['text':' This will ensure that our filter still takes precedence.','line_number':143,'multiline':False]['text':' needs to be cleared because python might be unloaded before','line_number':151,'multiline':False]['text':' the callback gets destructed','line_number':152,'multiline':False]['text':' note this helper collects nodes on 'fast path' only','line_number':158,'multiline':False]['text':' i.e. the true blocks of specialized checks','line_number':159,'multiline':False]['text':' the block contains one FUSION_GROUP and the rest of nodes are `allowed_nodes`','line_number':181,'multiline':False]['text':' crack open the zip format to get at the main module code','line_number':197,'multiline':False]['text':' check that we have no duplicate names','line_number':199,'multiline':False]['text':' unwrap all the code files into strings','line_number':202,'multiline':False]['text':' unpickled all the debug files','line_number':207,'multiline':False]['text':' disable the hook while we parse code, otherwise we will re-enter the hook','line_number':213,'multiline':False]['text':' short-circuit if this is an empty function or module','line_number':216,'multiline':False]['text':' save the module to a buffer','line_number':223,'multiline':False]['text':' copy the data in the buffer so we can restore it later. This','line_number':226,'multiline':False]['text':' is because py2 and py3 have different semantics with zipfile','line_number':227,'multiline':False]['text':' and it's easier to just work with a fresh copy each time.','line_number':228,'multiline':False]['text':' import the model again (from a the copy we made of the original)','line_number':239,'multiline':False]['text':' save it again','line_number':243,'multiline':False]['text':' func has invalid names for export, skip the jitter check','line_number':258,'multiline':False]['text':' Ideally we would like to not have to manually delete the file, but NamedTemporaryFile','line_number':279,'multiline':False]['text':' opens the file, and it cannot be opened multiple times in Windows. To support Windows,','line_number':280,'multiline':False]['text':' close the file after creation and try to remove it manually','line_number':281,'multiline':False]['text':' Normal Python','line_number':404,'multiline':False]['text':' String frontend','line_number':418,'multiline':False]['text':' Python AST frontend','line_number':430,'multiline':False]['text':' Compile the string to a Script function','line_number':464,'multiline':False]['text':' with enable_profiling_mode():','line_number':465,'multiline':False]['text':' Execute the Python function so we can run it later and get its','line_number':468,'multiline':False]['text':' outputs','line_number':469,'multiline':False]['text':' Check the string frontend first','line_number':480,'multiline':False]['text':' Continue checking the Python frontend','line_number':492,'multiline':False]['text':' profiling run','line_number':512,'multiline':False]['text':' optimized run','line_number':516,'multiline':False]['text':' TODO: check gradients for parameters, not just inputs','line_number':530,'multiline':False]['text':' drop allows us to remove some values from ever being used','line_number':532,'multiline':False]['text':' to test unused outputs','line_number':533,'multiline':False]['text':' we don't want all the grad for all the outputs to be the same','line_number':536,'multiline':False]['text':' so we multiply each by a constant','line_number':537,'multiline':False]['text':' `check_trace` is set to False because check_trace is run with @no_grad','line_number':560,'multiline':False]['text':' Also, `checkTrace` already does all the checks','line_number':561,'multiline':False]['text':' against python function','line_number':562,'multiline':False]['text':' test no gradients case','line_number':572,'multiline':False]['text':' test gradients case','line_number':577,'multiline':False]['text':' test the grad grad case','line_number':591,'multiline':False]['text':' note: not re-entrant, use unnested only','line_number':669,'multiline':False]['text':' this exists for forward compatibility reasons temporarily.','line_number':685,'multiline':False]['text':' TODO(suo) remove','line_number':686,'multiline':False]['text':' make it easy to quicky define/trace a function for these tests','line_number':694,'multiline':False]['text':' TODO: Remove me once https://bugs.python.org/issue42666 is resolved','line_number':750,'multiline':False]['text':' Helper function to eval Python3 code without causing a syntax error for','line_number':755,'multiline':False]['text':' this file under py2','line_number':756,'multiline':False]['text':' Assert type to meet MyPy requirement','line_number':765,'multiline':False]['text':' tuples of (variant, sample)','line_number':810,'multiline':False]['text':' Acquires variants to test','line_number':815,'multiline':False]['text':' TODO: inplace tests currently fail, fix and add inplace variant','line_number':819,'multiline':False]['text':' TODO: find better way to standardize on op registration itself..','line_number':823,'multiline':False]['text':' In eager mode, these ops can take (Tensor, bool) args; but in','line_number':829,'multiline':False]['text':' JIT they can only take (Tensor, Scalar), and bool is not a','line_number':830,'multiline':False]['text':' scalar in the JIT type system. So to test these in JIT, the bool','line_number':831,'multiline':False]['text':' is converted to an int for the test.','line_number':832,'multiline':False]['text':' doesn't support tracing','line_number':864,'multiline':False]['text':' types.LambdaType gave false positives','line_number':888,'multiline':False]['text':' noqa: E731','line_number':890,'multiline':False]