['text':' keep track of the min and mix of the range for average batch and epoch as a whole','line_number':58,'multiline':False]['text':' keep track of per channel min max information using the given channel','line_number':63,'multiline':False]['text':' keep track of percentile ratio information per channel','line_number':68,'multiline':False]['text':' avoid keeping autograd tape','line_number':75,'multiline':False]['text':' return the passed in the value','line_number':82,'multiline':False]['text':' get the min, max values of the data','line_number':93,'multiline':False]['text':' calculate new epoch range values','line_number':96,'multiline':False]['text':' calculate the average batch activation range','line_number':103,'multiline':False]['text':' new batch was processed','line_number':111,'multiline':False]['text':' get the current min and max vals','line_number':124,'multiline':False]['text':' noqa: C416','line_number':129,'multiline':False]['text':' Need to match dtype of min/max because the updates to buffers','line_number':133,'multiline':False]['text':' are done in place and types need to match for comparisons','line_number':134,'multiline':False]['text':' get the dimension of the copy','line_number':160,'multiline':False]['text':' noqa: C416','line_number':163,'multiline':False]['text':' Need to match dtype of min/max because the updates to buffers','line_number':167,'multiline':False]['text':' are done in place and types need to match for comparisons','line_number':168,'multiline':False]['text':' find the percentile values along the axis','line_number':173,'multiline':False]['text':' we want both 100th percentile and comp_percentile','line_number':174,'multiline':False]['text':' we also want to find 0th quartile to see if we have constant channel','line_number':175,'multiline':False]['text':' find the quantiles','line_number':179,'multiline':False]['text':' if any of the channels have 0s, we ignore that channel for this calculation','line_number':185,'multiline':False]['text':' transform boolean values to int values','line_number':187,'multiline':False]['text':' we also check if we have a constant channel','line_number':189,'multiline':False]['text':' transform boolean values to int values','line_number':191,'multiline':False]['text':' possibilities to get nan as an answer','line_number':193,'multiline':False]['text':'   will ignore any of these three cases with 0s and just not deal with them for now','line_number':194,'multiline':False]['text':' case (1) 0 in numerator: issue if 0 is largest, all negative, and rest are really negative','line_number':195,'multiline':False]['text':' case (2) 0 in denominator: is possible unless case 3, we just ignore','line_number':196,'multiline':False]['text':' case (3) 0 in both: not outlier, channel just kinda useless, ignore','line_number':197,'multiline':False]['text':' get the ratio and get rid of nan values','line_number':199,'multiline':False]['text':' update averages, remembering to only update if didn't have zeros','line_number':202,'multiline':False]['text':' if num_batches and average_ratio are not initialized, we want to initialize them','line_number':205,'multiline':False]['text':' also initialize the constant channel var if that is not initialized separately','line_number':210,'multiline':False]['text':' get current num batches and average ratio','line_number':214,'multiline':False]['text':' calculate new_number of batches, new_ratios, and get rid of nans because of 0 size batches','line_number':218,'multiline':False]['text':' update the number of non-constant channels','line_number':223,'multiline':False]['text':' update the values locally','line_number':226,'multiline':False]['text':' set all the values back to their original defaults for a new epoch','line_number':248,'multiline':False]['text':' keep device','line_number':249,'multiline':False]