['text':'
 * TODO: rename this file to something like vulkan_experimental_test and move
 * this under caffe2/fb/vulkan. This file should be used to test experimental
 * features of the Vulkan backend. vulkan_api_test cannot serve this purpose
 * because it cannot link against symbols in the ATen/native/vulkan folder.
 ','line_number':27,'multiline':True]['text':' Unused function
bool exactlyEqual(const at::Tensor& a, const at::Tensor& b) {
  return (a - b).abs().max().item<float>() == 0.0f;
}
','line_number':71,'multiline':True]['text':' namespace','line_number':164,'multiline':False]['text':' tensor is randomly generated with values in the range','line_number':193,'multiline':False]['text':' [-shift * s, (1-shift) * s), where s is randomly generated in the range','line_number':194,'multiline':False]['text':' [s_min, s_max]','line_number':195,'multiline':False]['text':' with these default values, s is randomly generated in the range [1, 100]','line_number':196,'multiline':False]['text':' this means that the range of the tensor values could be as narrow as','line_number':197,'multiline':False]['text':' [-0.45, 0.55) or as wide as [-45.0, 55.0)','line_number':198,'multiline':False]['text':' scale is randomly generated in the range [scale_min, scale_max)','line_number':210,'multiline':False]['text':'min=','line_number':256,'multiline':True]['text':'max=','line_number':257,'multiline':True]['text':'qmin=','line_number':258,'multiline':True]['text':'qmax=','line_number':259,'multiline':True]['text':'preserve_sparsity=','line_number':260,'multiline':True]['text':'force_scale_power_of_two=','line_number':261,'multiline':True]['text':'reduce_range=','line_number':262,'multiline':True]['text':' namespace','line_number':266,'multiline':False]['text':' 4D','line_number':367,'multiline':False]['text':' 3D','line_number':370,'multiline':False]['text':' 2D','line_number':372,'multiline':False]['text':' 1D','line_number':374,'multiline':False]['text':' 4D','line_number':400,'multiline':False]['text':' TODO: Fix vulkan to cpu on Android','line_number':419,'multiline':False]['text':' produce random quantized cpu tensor','line_number':463,'multiline':False]['text':' copy quantized cpu tensor to vulkan','line_number':467,'multiline':False]['text':' copy quantized vulkan tensor to cpu','line_number':470,'multiline':False]['text':' check that the copy equals the original','line_number':473,'multiline':False]['text':' TODO: Fix vulkan to cpu on Android','line_number':499,'multiline':False]['text':' TODO: Fix vulkan to cpu on Android','line_number':526,'multiline':False]['text':' TODO: Fix vulkan to cpu on Android','line_number':553,'multiline':False]['text':' produce random quantized cpu tensor','line_number':585,'multiline':False]['text':' copy quantized cpu tensor to vulkan','line_number':589,'multiline':False]['text':' dequantize tensors','line_number':592,'multiline':False]['text':' check dequantized tensors are equal','line_number':597,'multiline':False]['text':' TODO: Fix vulkan to cpu on Android','line_number':697,'multiline':False]['text':' tolerance = 1, to allow for precision differences after dividing by random','line_number':732,'multiline':False]['text':' scale which could result on a difference of 1 unit in the quantized result','line_number':733,'multiline':False]['text':' quantize tensor','line_number':737,'multiline':False]['text':' copy vulkan tensor to cpu','line_number':744,'multiline':False]['text':' TODO: Fix vulkan to cpu on Android','line_number':774,'multiline':False]['text':' TODO: Fix vulkan to cpu on Android','line_number':805,'multiline':False]['text':' TODO: Fix vulkan to cpu on Android','line_number':836,'multiline':False]['text':' quantize tensors','line_number':882,'multiline':False]['text':' dequantize tensors','line_number':887,'multiline':False]['text':' quantize tensors','line_number':926,'multiline':False]['text':' dequantize tensors','line_number':947,'multiline':False]['text':' check dequantized tensor are equal','line_number':952,'multiline':False]['text':' tolerated error = scale, to allow for precision differences after dividing','line_number':954,'multiline':False]['text':' by random scale, which could result on a difference of 1 unit in the','line_number':955,'multiline':False]['text':' quantized result.','line_number':956,'multiline':False]['text':' TODO: Support conv2d with dilation != 1','line_number':1439,'multiline':False]['text':' in order to make sure we start with input tensors that are numerically','line_number':1952,'multiline':False]['text':' the same (cpu vs vulkan), we allow multiple attempts when randomly','line_number':1953,'multiline':False]['text':' generating the inputs. If the cpu quantized tensor and the vk quantized','line_number':1954,'multiline':False]['text':' tensors are not the same (maybe off by 1 due to differences in rounding','line_number':1955,'multiline':False]['text':' and precision), we try again.','line_number':1956,'multiline':False]['text':' produce random inputs','line_number':1958,'multiline':False]['text':' compute appropiate scale and zero point for inputs','line_number':1963,'multiline':False]['text':' produce random scale and zero point for inputs','line_number':1972,'multiline':False]['text':' we do this, to avoid dividing by zero','line_number':1980,'multiline':False]['text':' we might end up dividing by 0, if we allow random scale and zero point','line_number':1982,'multiline':False]['text':' of the divisor.','line_number':1983,'multiline':False]['text':' non_zero_sign = 1 if the value is non negative, and -1 if it is','line_number':1992,'multiline':False]['text':' negative','line_number':1993,'multiline':False]['text':' this will force abs(input2_cpu) >= in2_scale, which means that none of','line_number':1995,'multiline':False]['text':' the quantized values of the second input will be equal to the zero','line_number':1996,'multiline':False]['text':' point.','line_number':1997,'multiline':False]['text':' quantize cpu inputs','line_number':2000,'multiline':False]['text':' dequantize quantized cpu inputs','line_number':2006,'multiline':False]['text':' vulkan quantized inputs','line_number':2010,'multiline':False]['text':' dequantize quantized vulkan inputs','line_number':2018,'multiline':False]['text':' produce inputs','line_number':2090,'multiline':False]['text':' apply op on dequantized cpu tensors','line_number':2129,'multiline':False]['text':' compute appropiate scale and zero point for output','line_number':2134,'multiline':False]['text':' quantize and dequantize cpu output','line_number':2140,'multiline':False]['text':' vulkan quantized output','line_number':2145,'multiline':False]['text':' check','line_number':2152,'multiline':False]['text':' fixed params','line_number':2176,'multiline':False]['text':' broadcasting','line_number':2184,'multiline':False]['text':' broadcasting','line_number':2186,'multiline':False]['text':' broadcasting','line_number':2188,'multiline':False]['text':' broadcasting','line_number':2190,'multiline':False]['text':' broadcasting','line_number':2192,'multiline':False]['text':' broadcasting','line_number':2194,'multiline':False]['text':' broadcasting','line_number':2196,'multiline':False]['text':' broadcasting','line_number':2198,'multiline':False]['text':' compute params','line_number':2200,'multiline':False]['text':' broadcasting','line_number':2208,'multiline':False]['text':' broadcasting','line_number':2210,'multiline':False]['text':' broadcasting','line_number':2212,'multiline':False]['text':' broadcasting','line_number':2214,'multiline':False]['text':' broadcasting','line_number':2216,'multiline':False]['text':' broadcasting','line_number':2218,'multiline':False]['text':' broadcasting','line_number':2220,'multiline':False]['text':' broadcasting','line_number':2222,'multiline':False]['text':' random params','line_number':2224,'multiline':False]['text':' broadcasting','line_number':2232,'multiline':False]['text':' broadcasting','line_number':2234,'multiline':False]['text':' broadcasting','line_number':2236,'multiline':False]['text':' broadcasting','line_number':2238,'multiline':False]['text':' broadcasting','line_number':2240,'multiline':False]['text':' broadcasting','line_number':2242,'multiline':False]['text':' broadcasting','line_number':2244,'multiline':False]['text':' broadcasting','line_number':2246,'multiline':False]['text':' random shape and params','line_number':2248,'multiline':False]['text':' input cpu','line_number':2348,'multiline':False]['text':' input cpu tensor','line_number':2349,'multiline':False]['text':' input cpu tensor -> quantized','line_number':2350,'multiline':False]['text':' input cpu tensor -> quantized -> dequantized','line_number':2351,'multiline':False]['text':' input vulkan','line_number':2353,'multiline':False]['text':' input cpu tensor -> to vulkan','line_number':2354,'multiline':False]['text':' input cpu tensor -> to vulkan -> quantized','line_number':2355,'multiline':False]['text':' input cpu tensor -> to vulkan -> quantized -> dequantized','line_number':2357,'multiline':False]['text':' input cpu tensor -> to vulkan -> quantized ->','line_number':2358,'multiline':False]['text':' dequantized -> to cpu','line_number':2359,'multiline':False]['text':' weight cpu','line_number':2361,'multiline':False]['text':' weight cpu tensor','line_number':2362,'multiline':False]['text':' weight cpu tensor -> quantized','line_number':2363,'multiline':False]['text':' weight cpu tensor -> quantized -> dequantized','line_number':2364,'multiline':False]['text':' bias cpu','line_number':2366,'multiline':False]['text':' bias cpu tensor','line_number':2367,'multiline':False]['text':' bias cpu tensor -> quantized','line_number':2368,'multiline':False]['text':' bias cpu tensor -> quantized -> dequantized','line_number':2369,'multiline':False]['text':' When we randomly generate the input tensor, we might get unlucky','line_number':2371,'multiline':False]['text':' and one of the entries might be generated such that when it is divided','line_number':2372,'multiline':False]['text':' by the scale we get something like 2.50003 for example which could be','line_number':2373,'multiline':False]['text':' rounded to 2 or 3 depending on the precision and rounding method.','line_number':2374,'multiline':False]['text':' Because of that possibility, we generate the input and check the','line_number':2375,'multiline':False]['text':' difference between input_cpu_deq and input_vk_deq_cpu','line_number':2376,'multiline':False]['text':' If they are different we regenerated them again (up to 3 times)','line_number':2377,'multiline':False]['text':' The goal is to start with input tensors that remain equal after','line_number':2378,'multiline':False]['text':' quantization.','line_number':2379,'multiline':False]['text':' produce random input, weight and bias','line_number':2382,'multiline':False]['text':' compute appropiate scale and zero point for input, weight and bias','line_number':2388,'multiline':False]['text':' produce random scale and zero point for inputs','line_number':2411,'multiline':False]['text':' quantize cpu input, weight and bias','line_number':2422,'multiline':False]['text':' dequantize quantized cpu input, weight and bias','line_number':2430,'multiline':False]['text':' vulkan quantized input','line_number':2435,'multiline':False]['text':' dequantize quantized vulkan input','line_number':2440,'multiline':False]['text':' conv2d on dequantized cpu tensors','line_number':2459,'multiline':False]['text':' Note: we apply the convolution to the dequantized quantized tensors, that','line_number':2460,'multiline':False]['text':' way we are performing the operations on the same numeric values.','line_number':2461,'multiline':False]['text':' compute appropiate scale and zero point for output','line_number':2472,'multiline':False]['text':' quantize and dequantize cpu output','line_number':2478,'multiline':False]['text':' vulkan quantized output','line_number':2483,'multiline':False]['text':' vulkan quantized conv2d','line_number':2487,'multiline':False]['text':' vulkan quantized conv2d call by name','line_number':2499,'multiline':False]['text':' dequantize vulkan output','line_number':2521,'multiline':False]['text':' check','line_number':2525,'multiline':False]['text':' prepacking? ','line_number':2548,'multiline':True]['text':' compute params ','line_number':2549,'multiline':True]['text':' random params ','line_number':2550,'multiline':True]['text':' input_shape ','line_number':2551,'multiline':True]['text':' weight_shape ','line_number':2552,'multiline':True]['text':' bias_shape ','line_number':2553,'multiline':True]['text':' weight_dtype ','line_number':2554,'multiline':True]['text':' bias_dtype ','line_number':2555,'multiline':True]['text':' stride ','line_number':2556,'multiline':True]['text':' padding ','line_number':2557,'multiline':True]['text':' dilation ','line_number':2558,'multiline':True]['text':' groups ','line_number':2559,'multiline':True]['text':' prepacking? ','line_number':2564,'multiline':True]['text':' compute params ','line_number':2565,'multiline':True]['text':' random params ','line_number':2566,'multiline':True]['text':' input_shape ','line_number':2567,'multiline':True]['text':' weight_shape ','line_number':2568,'multiline':True]['text':' bias_shape ','line_number':2569,'multiline':True]['text':' weight_dtype ','line_number':2570,'multiline':True]['text':' bias_dtype ','line_number':2571,'multiline':True]['text':' stride ','line_number':2572,'multiline':True]['text':' padding ','line_number':2573,'multiline':True]['text':' dilation ','line_number':2574,'multiline':True]['text':' groups ','line_number':2575,'multiline':True]['text':' prepacking? ','line_number':2580,'multiline':True]['text':' compute params ','line_number':2581,'multiline':True]['text':' random params ','line_number':2582,'multiline':True]['text':' input_shape ','line_number':2583,'multiline':True]['text':' weight_shape ','line_number':2584,'multiline':True]['text':' bias_shape ','line_number':2585,'multiline':True]['text':' weight_dtype ','line_number':2586,'multiline':True]['text':' bias_dtype ','line_number':2587,'multiline':True]['text':' stride ','line_number':2588,'multiline':True]['text':' padding ','line_number':2589,'multiline':True]['text':' dilation ','line_number':2590,'multiline':True]['text':' groups ','line_number':2591,'multiline':True]['text':' prepacking? ','line_number':2596,'multiline':True]['text':' compute params ','line_number':2597,'multiline':True]['text':' random params ','line_number':2598,'multiline':True]['text':' input_shape ','line_number':2599,'multiline':True]['text':' weight_shape ','line_number':2600,'multiline':True]['text':' bias_shape ','line_number':2601,'multiline':True]['text':' weight_dtype ','line_number':2602,'multiline':True]['text':' bias_dtype ','line_number':2603,'multiline':True]['text':' stride ','line_number':2604,'multiline':True]['text':' padding ','line_number':2605,'multiline':True]['text':' dilation ','line_number':2606,'multiline':True]['text':' groups ','line_number':2607,'multiline':True]['text':' prepacking? ','line_number':2612,'multiline':True]['text':' compute params ','line_number':2613,'multiline':True]['text':' random params ','line_number':2614,'multiline':True]['text':' input_shape ','line_number':2615,'multiline':True]['text':' weight_shape ','line_number':2616,'multiline':True]['text':' bias_shape ','line_number':2617,'multiline':True]['text':' weight_dtype ','line_number':2618,'multiline':True]['text':' bias_dtype ','line_number':2619,'multiline':True]['text':' stride ','line_number':2620,'multiline':True]['text':' padding ','line_number':2621,'multiline':True]['text':' dilation ','line_number':2622,'multiline':True]['text':' groups ','line_number':2623,'multiline':True]['text':' prepacking? ','line_number':2628,'multiline':True]['text':' compute params ','line_number':2629,'multiline':True]['text':' random params ','line_number':2630,'multiline':True]['text':' input_shape ','line_number':2631,'multiline':True]['text':' weight_shape ','line_number':2632,'multiline':True]['text':' bias_shape ','line_number':2633,'multiline':True]['text':' weight_dtype ','line_number':2634,'multiline':True]['text':' bias_dtype ','line_number':2635,'multiline':True]['text':' stride ','line_number':2636,'multiline':True]['text':' padding ','line_number':2637,'multiline':True]['text':' dilation ','line_number':2638,'multiline':True]['text':' groups ','line_number':2639,'multiline':True]['text':' prepacking? ','line_number':2644,'multiline':True]['text':' compute params ','line_number':2645,'multiline':True]['text':' random params ','line_number':2646,'multiline':True]['text':' input_shape ','line_number':2647,'multiline':True]['text':' weight_shape ','line_number':2648,'multiline':True]['text':' bias_shape ','line_number':2649,'multiline':True]['text':' weight_dtype ','line_number':2650,'multiline':True]['text':' bias_dtype ','line_number':2651,'multiline':True]['text':' stride ','line_number':2652,'multiline':True]['text':' padding ','line_number':2653,'multiline':True]['text':' dilation ','line_number':2654,'multiline':True]['text':' groups ','line_number':2655,'multiline':True]['text':' prepacking? ','line_number':2660,'multiline':True]['text':' compute params ','line_number':2661,'multiline':True]['text':' random params ','line_number':2662,'multiline':True]['text':' input_shape ','line_number':2663,'multiline':True]['text':' weight_shape ','line_number':2664,'multiline':True]['text':' bias_shape ','line_number':2665,'multiline':True]['text':' weight_dtype ','line_number':2666,'multiline':True]['text':' bias_dtype ','line_number':2667,'multiline':True]['text':' stride ','line_number':2668,'multiline':True]['text':' padding ','line_number':2669,'multiline':True]['text':' dilation ','line_number':2670,'multiline':True]['text':' groups ','line_number':2671,'multiline':True]['text':' prepacking? ','line_number':2676,'multiline':True]['text':' compute params ','line_number':2677,'multiline':True]['text':' random params ','line_number':2678,'multiline':True]['text':' input_shape ','line_number':2679,'multiline':True]['text':' weight_shape ','line_number':2680,'multiline':True]['text':' bias_shape ','line_number':2681,'multiline':True]['text':' weight_dtype ','line_number':2682,'multiline':True]['text':' bias_dtype ','line_number':2683,'multiline':True]['text':' stride ','line_number':2684,'multiline':True]['text':' padding ','line_number':2685,'multiline':True]['text':' dilation ','line_number':2686,'multiline':True]['text':' groups ','line_number':2687,'multiline':True]['text':' prepacking? ','line_number':2692,'multiline':True]['text':' compute params ','line_number':2693,'multiline':True]['text':' random params ','line_number':2694,'multiline':True]['text':' input_shape ','line_number':2695,'multiline':True]['text':' weight_shape ','line_number':2696,'multiline':True]['text':' bias_shape ','line_number':2697,'multiline':True]['text':' weight_dtype ','line_number':2698,'multiline':True]['text':' bias_dtype ','line_number':2699,'multiline':True]['text':' stride ','line_number':2700,'multiline':True]['text':' padding ','line_number':2701,'multiline':True]['text':' dilation ','line_number':2702,'multiline':True]['text':' groups ','line_number':2703,'multiline':True]['text':' prepacking? ','line_number':2708,'multiline':True]['text':' compute params ','line_number':2709,'multiline':True]['text':' random params ','line_number':2710,'multiline':True]['text':' input_shape ','line_number':2711,'multiline':True]['text':' weight_shape ','line_number':2712,'multiline':True]['text':' bias_shape ','line_number':2713,'multiline':True]['text':' weight_dtype ','line_number':2714,'multiline':True]['text':' bias_dtype ','line_number':2715,'multiline':True]['text':' stride ','line_number':2716,'multiline':True]['text':' padding ','line_number':2717,'multiline':True]['text':' dilation ','line_number':2718,'multiline':True]['text':' groups ','line_number':2719,'multiline':True]['text':' prepacking? ','line_number':2724,'multiline':True]['text':' compute params ','line_number':2725,'multiline':True]['text':' random params ','line_number':2726,'multiline':True]['text':' input_shape ','line_number':2727,'multiline':True]['text':' weight_shape ','line_number':2728,'multiline':True]['text':' bias_shape ','line_number':2729,'multiline':True]['text':' weight_dtype ','line_number':2730,'multiline':True]['text':' bias_dtype ','line_number':2731,'multiline':True]['text':' stride ','line_number':2732,'multiline':True]['text':' padding ','line_number':2733,'multiline':True]['text':' dilation ','line_number':2734,'multiline':True]['text':' groups ','line_number':2735,'multiline':True]['text':' prepacking? ','line_number':2740,'multiline':True]['text':' compute params ','line_number':2741,'multiline':True]['text':' random params ','line_number':2742,'multiline':True]['text':' input_shape ','line_number':2743,'multiline':True]['text':' weight_shape ','line_number':2744,'multiline':True]['text':' bias_shape ','line_number':2745,'multiline':True]['text':' weight_dtype ','line_number':2746,'multiline':True]['text':' bias_dtype ','line_number':2747,'multiline':True]['text':' stride ','line_number':2748,'multiline':True]['text':' padding ','line_number':2749,'multiline':True]['text':' dilation ','line_number':2750,'multiline':True]['text':' groups ','line_number':2751,'multiline':True]['text':' prepacking? ','line_number':2756,'multiline':True]['text':' compute params ','line_number':2757,'multiline':True]['text':' random params ','line_number':2758,'multiline':True]['text':' input_shape ','line_number':2759,'multiline':True]['text':' weight_shape ','line_number':2760,'multiline':True]['text':' bias_shape ','line_number':2761,'multiline':True]['text':' weight_dtype ','line_number':2762,'multiline':True]['text':' bias_dtype ','line_number':2763,'multiline':True]['text':' stride ','line_number':2764,'multiline':True]['text':' padding ','line_number':2765,'multiline':True]['text':' dilation ','line_number':2766,'multiline':True]['text':' groups ','line_number':2767,'multiline':True]['text':' prepacking? ','line_number':2772,'multiline':True]['text':' compute params ','line_number':2773,'multiline':True]['text':' random params ','line_number':2774,'multiline':True]['text':' input_shape ','line_number':2775,'multiline':True]['text':' weight_shape ','line_number':2776,'multiline':True]['text':' bias_shape ','line_number':2777,'multiline':True]['text':' weight_dtype ','line_number':2778,'multiline':True]['text':' bias_dtype ','line_number':2779,'multiline':True]['text':' stride ','line_number':2780,'multiline':True]['text':' padding ','line_number':2781,'multiline':True]['text':' dilation ','line_number':2782,'multiline':True]['text':' groups ','line_number':2783,'multiline':True]['text':' prepacking? ','line_number':2788,'multiline':True]['text':' compute params ','line_number':2789,'multiline':True]['text':' random params ','line_number':2790,'multiline':True]['text':' input_shape ','line_number':2791,'multiline':True]['text':' weight_shape ','line_number':2792,'multiline':True]['text':' bias_shape ','line_number':2793,'multiline':True]['text':' weight_dtype ','line_number':2794,'multiline':True]['text':' bias_dtype ','line_number':2795,'multiline':True]['text':' stride ','line_number':2796,'multiline':True]['text':' padding ','line_number':2797,'multiline':True]['text':' dilation ','line_number':2798,'multiline':True]['text':' groups ','line_number':2799,'multiline':True]['text':' prepacking? ','line_number':2804,'multiline':True]['text':' compute params ','line_number':2805,'multiline':True]['text':' random params ','line_number':2806,'multiline':True]['text':' input_shape ','line_number':2807,'multiline':True]['text':' weight_shape ','line_number':2808,'multiline':True]['text':' bias_shape ','line_number':2809,'multiline':True]['text':' weight_dtype ','line_number':2810,'multiline':True]['text':' bias_dtype ','line_number':2811,'multiline':True]['text':' stride ','line_number':2812,'multiline':True]['text':' padding ','line_number':2813,'multiline':True]['text':' dilation ','line_number':2814,'multiline':True]['text':' groups ','line_number':2815,'multiline':True]['text':' prepacking? ','line_number':2820,'multiline':True]['text':' compute params ','line_number':2821,'multiline':True]['text':' random params ','line_number':2822,'multiline':True]['text':' input_shape ','line_number':2823,'multiline':True]['text':' weight_shape ','line_number':2824,'multiline':True]['text':' bias_shape ','line_number':2825,'multiline':True]['text':' weight_dtype ','line_number':2826,'multiline':True]['text':' bias_dtype ','line_number':2827,'multiline':True]['text':' stride ','line_number':2828,'multiline':True]['text':' padding ','line_number':2829,'multiline':True]['text':' dilation ','line_number':2830,'multiline':True]['text':' groups ','line_number':2831,'multiline':True]['text':' prepacking? ','line_number':2836,'multiline':True]['text':' compute params ','line_number':2837,'multiline':True]['text':' random params ','line_number':2838,'multiline':True]['text':' input_shape ','line_number':2839,'multiline':True]['text':' weight_shape ','line_number':2840,'multiline':True]['text':' bias_shape ','line_number':2841,'multiline':True]['text':' weight_dtype ','line_number':2842,'multiline':True]['text':' bias_dtype ','line_number':2843,'multiline':True]['text':' stride ','line_number':2844,'multiline':True]['text':' padding ','line_number':2845,'multiline':True]['text':' dilation ','line_number':2846,'multiline':True]['text':' groups ','line_number':2847,'multiline':True]['text':' prepacking? ','line_number':2852,'multiline':True]['text':' compute params ','line_number':2853,'multiline':True]['text':' random params ','line_number':2854,'multiline':True]['text':' input_shape ','line_number':2855,'multiline':True]['text':' weight_shape ','line_number':2856,'multiline':True]['text':' bias_shape ','line_number':2857,'multiline':True]['text':' weight_dtype ','line_number':2858,'multiline':True]['text':' bias_dtype ','line_number':2859,'multiline':True]['text':' stride ','line_number':2860,'multiline':True]['text':' padding ','line_number':2861,'multiline':True]['text':' dilation ','line_number':2862,'multiline':True]['text':' groups ','line_number':2863,'multiline':True]['text':' prepacking? ','line_number':2868,'multiline':True]['text':' compute params ','line_number':2869,'multiline':True]['text':' random params ','line_number':2870,'multiline':True]['text':' input_shape ','line_number':2871,'multiline':True]['text':' weight_shape ','line_number':2872,'multiline':True]['text':' bias_shape ','line_number':2873,'multiline':True]['text':' weight_dtype ','line_number':2874,'multiline':True]['text':' bias_dtype ','line_number':2875,'multiline':True]['text':' stride ','line_number':2876,'multiline':True]['text':' padding ','line_number':2877,'multiline':True]['text':' dilation ','line_number':2878,'multiline':True]['text':' groups ','line_number':2879,'multiline':True]['text':' prepacking? ','line_number':2884,'multiline':True]['text':' compute params ','line_number':2885,'multiline':True]['text':' random params ','line_number':2886,'multiline':True]['text':' input_shape ','line_number':2887,'multiline':True]['text':' weight_shape ','line_number':2888,'multiline':True]['text':' bias_shape ','line_number':2889,'multiline':True]['text':' weight_dtype ','line_number':2890,'multiline':True]['text':' bias_dtype ','line_number':2891,'multiline':True]['text':' stride ','line_number':2892,'multiline':True]['text':' padding ','line_number':2893,'multiline':True]['text':' dilation ','line_number':2894,'multiline':True]['text':' groups ','line_number':2895,'multiline':True]['text':' prepacking? ','line_number':2900,'multiline':True]['text':' compute params ','line_number':2901,'multiline':True]['text':' random params ','line_number':2902,'multiline':True]['text':' input_shape ','line_number':2903,'multiline':True]['text':' weight_shape ','line_number':2904,'multiline':True]['text':' bias_shape ','line_number':2905,'multiline':True]['text':' weight_dtype ','line_number':2906,'multiline':True]['text':' bias_dtype ','line_number':2907,'multiline':True]['text':' stride ','line_number':2908,'multiline':True]['text':' padding ','line_number':2909,'multiline':True]['text':' dilation ','line_number':2910,'multiline':True]['text':' groups ','line_number':2911,'multiline':True]['text':' prepacking? ','line_number':2916,'multiline':True]['text':' compute params ','line_number':2917,'multiline':True]['text':' random params ','line_number':2918,'multiline':True]['text':' input_shape ','line_number':2919,'multiline':True]['text':' weight_shape ','line_number':2920,'multiline':True]['text':' bias_shape ','line_number':2921,'multiline':True]['text':' weight_dtype ','line_number':2922,'multiline':True]['text':' bias_dtype ','line_number':2923,'multiline':True]['text':' stride ','line_number':2924,'multiline':True]['text':' padding ','line_number':2925,'multiline':True]['text':' dilation ','line_number':2926,'multiline':True]['text':' groups ','line_number':2927,'multiline':True]['text':' prepacking? ','line_number':2932,'multiline':True]['text':' compute params ','line_number':2933,'multiline':True]['text':' random params ','line_number':2934,'multiline':True]['text':' input_shape ','line_number':2935,'multiline':True]['text':' weight_shape ','line_number':2936,'multiline':True]['text':' bias_shape ','line_number':2937,'multiline':True]['text':' weight_dtype ','line_number':2938,'multiline':True]['text':' bias_dtype ','line_number':2939,'multiline':True]['text':' stride ','line_number':2940,'multiline':True]['text':' padding ','line_number':2941,'multiline':True]['text':' dilation ','line_number':2942,'multiline':True]['text':' groups ','line_number':2943,'multiline':True]['text':' prepacking? ','line_number':2948,'multiline':True]['text':' compute params ','line_number':2949,'multiline':True]['text':' random params ','line_number':2950,'multiline':True]['text':' input_shape ','line_number':2951,'multiline':True]['text':' weight_shape ','line_number':2952,'multiline':True]['text':' bias_shape ','line_number':2953,'multiline':True]['text':' weight_dtype ','line_number':2954,'multiline':True]['text':' bias_dtype ','line_number':2955,'multiline':True]['text':' stride ','line_number':2956,'multiline':True]['text':' padding ','line_number':2957,'multiline':True]['text':' dilation ','line_number':2958,'multiline':True]['text':' groups ','line_number':2959,'multiline':True]['text':' prepacking? ','line_number':2964,'multiline':True]['text':' compute params ','line_number':2965,'multiline':True]['text':' random params ','line_number':2966,'multiline':True]['text':' input_shape ','line_number':2967,'multiline':True]['text':' weight_shape ','line_number':2968,'multiline':True]['text':' bias_shape ','line_number':2969,'multiline':True]['text':' weight_dtype ','line_number':2970,'multiline':True]['text':' bias_dtype ','line_number':2971,'multiline':True]['text':' stride ','line_number':2972,'multiline':True]['text':' padding ','line_number':2973,'multiline':True]['text':' dilation ','line_number':2974,'multiline':True]['text':' groups ','line_number':2975,'multiline':True]['text':' prepacking? ','line_number':2980,'multiline':True]['text':' compute params ','line_number':2981,'multiline':True]['text':' random params ','line_number':2982,'multiline':True]['text':' input_shape ','line_number':2983,'multiline':True]['text':' weight_shape ','line_number':2984,'multiline':True]['text':' bias_shape ','line_number':2985,'multiline':True]['text':' weight_dtype ','line_number':2986,'multiline':True]['text':' bias_dtype ','line_number':2987,'multiline':True]['text':' stride ','line_number':2988,'multiline':True]['text':' padding ','line_number':2989,'multiline':True]['text':' dilation ','line_number':2990,'multiline':True]['text':' groups ','line_number':2991,'multiline':True]['text':' prepacking? ','line_number':2996,'multiline':True]['text':' compute params ','line_number':2997,'multiline':True]['text':' random params ','line_number':2998,'multiline':True]['text':' input_shape ','line_number':2999,'multiline':True]['text':' weight_shape ','line_number':3000,'multiline':True]['text':' bias_shape ','line_number':3001,'multiline':True]['text':' weight_dtype ','line_number':3002,'multiline':True]['text':' bias_dtype ','line_number':3003,'multiline':True]['text':' stride ','line_number':3004,'multiline':True]['text':' padding ','line_number':3005,'multiline':True]['text':' dilation ','line_number':3006,'multiline':True]['text':' groups ','line_number':3007,'multiline':True]['text':' prepacking? ','line_number':3012,'multiline':True]['text':' compute params ','line_number':3013,'multiline':True]['text':' random params ','line_number':3014,'multiline':True]['text':' input_shape ','line_number':3015,'multiline':True]['text':' weight_shape ','line_number':3016,'multiline':True]['text':' bias_shape ','line_number':3017,'multiline':True]['text':' weight_dtype ','line_number':3018,'multiline':True]['text':' bias_dtype ','line_number':3019,'multiline':True]['text':' stride ','line_number':3020,'multiline':True]['text':' padding ','line_number':3021,'multiline':True]['text':' dilation ','line_number':3022,'multiline':True]['text':' groups ','line_number':3023,'multiline':True]['text':' prepacking? ','line_number':3028,'multiline':True]['text':' compute params ','line_number':3029,'multiline':True]['text':' random params ','line_number':3030,'multiline':True]['text':' input_shape ','line_number':3031,'multiline':True]['text':' weight_shape ','line_number':3032,'multiline':True]['text':' bias_shape ','line_number':3033,'multiline':True]['text':' weight_dtype ','line_number':3034,'multiline':True]['text':' bias_dtype ','line_number':3035,'multiline':True]['text':' stride ','line_number':3036,'multiline':True]['text':' padding ','line_number':3037,'multiline':True]['text':' dilation ','line_number':3038,'multiline':True]['text':' groups ','line_number':3039,'multiline':True]['text':' prepacking? ','line_number':3044,'multiline':True]['text':' compute params ','line_number':3045,'multiline':True]['text':' random params ','line_number':3046,'multiline':True]['text':' input_shape ','line_number':3047,'multiline':True]['text':' weight_shape ','line_number':3048,'multiline':True]['text':' bias_shape ','line_number':3049,'multiline':True]['text':' weight_dtype ','line_number':3050,'multiline':True]['text':' bias_dtype ','line_number':3051,'multiline':True]['text':' stride ','line_number':3052,'multiline':True]['text':' padding ','line_number':3053,'multiline':True]['text':' dilation ','line_number':3054,'multiline':True]['text':' groups ','line_number':3055,'multiline':True]['text':' prepacking? ','line_number':3060,'multiline':True]['text':' compute params ','line_number':3061,'multiline':True]['text':' random params ','line_number':3062,'multiline':True]['text':' input_shape ','line_number':3063,'multiline':True]['text':' weight_shape ','line_number':3064,'multiline':True]['text':' bias_shape ','line_number':3065,'multiline':True]['text':' weight_dtype ','line_number':3066,'multiline':True]['text':' bias_dtype ','line_number':3067,'multiline':True]['text':' stride ','line_number':3068,'multiline':True]['text':' padding ','line_number':3069,'multiline':True]['text':' dilation ','line_number':3070,'multiline':True]['text':' groups ','line_number':3071,'multiline':True]['text':' prepacking? ','line_number':3076,'multiline':True]['text':' compute params ','line_number':3077,'multiline':True]['text':' random params ','line_number':3078,'multiline':True]['text':' input_shape ','line_number':3079,'multiline':True]['text':' weight_shape ','line_number':3080,'multiline':True]['text':' bias_shape ','line_number':3081,'multiline':True]['text':' weight_dtype ','line_number':3082,'multiline':True]['text':' bias_dtype ','line_number':3083,'multiline':True]['text':' stride ','line_number':3084,'multiline':True]['text':' padding ','line_number':3085,'multiline':True]['text':' dilation ','line_number':3086,'multiline':True]['text':' groups ','line_number':3087,'multiline':True]['text':' prepacking? ','line_number':3092,'multiline':True]['text':' compute params ','line_number':3093,'multiline':True]['text':' random params ','line_number':3094,'multiline':True]['text':' input_shape ','line_number':3095,'multiline':True]['text':' weight_shape ','line_number':3096,'multiline':True]['text':' bias_shape ','line_number':3097,'multiline':True]['text':' weight_dtype ','line_number':3098,'multiline':True]['text':' bias_dtype ','line_number':3099,'multiline':True]['text':' stride ','line_number':3100,'multiline':True]['text':' padding ','line_number':3101,'multiline':True]['text':' dilation ','line_number':3102,'multiline':True]['text':' groups ','line_number':3103,'multiline':True]['text':' prepacking? ','line_number':3108,'multiline':True]['text':' compute params ','line_number':3109,'multiline':True]['text':' random params ','line_number':3110,'multiline':True]['text':' input_shape ','line_number':3111,'multiline':True]['text':' weight_shape ','line_number':3112,'multiline':True]['text':' bias_shape ','line_number':3113,'multiline':True]['text':' weight_dtype ','line_number':3114,'multiline':True]['text':' bias_dtype ','line_number':3115,'multiline':True]['text':' stride ','line_number':3116,'multiline':True]['text':' padding ','line_number':3117,'multiline':True]['text':' dilation ','line_number':3118,'multiline':True]['text':' groups ','line_number':3119,'multiline':True]['text':' Weight zero point is expected to always be 0','line_number':3167,'multiline':False]['text':' Vulkan','line_number':3189,'multiline':False]['text':' for 2D tensor get the row col that caused failure','line_number':3213,'multiline':False]['text':' on failure we want to print the exact row/col that causes the','line_number':3274,'multiline':False]['text':' failure in 2D, so we can debug','line_number':3275,'multiline':False]['text':' The following code is not directly releated to quantization. We put it here','line_number':3344,'multiline':False]['text':' since we are not able to run this test on GH's CI: for some unknown reason,','line_number':3345,'multiline':False]['text':' we are not able to reference symbols in the vulkan directory, hence the build','line_number':3346,'multiline':False]['text':' on GH fails. Moving the test here so we are still able to run it on','line_number':3347,'multiline':False]['text':' internally on devserver and laptops.','line_number':3348,'multiline':False]['text':' -1 is a don't care value.','line_number':3351,'multiline':False]['text':' The input tensor is a consecutive range of whole numbers from [0, n * c * h','line_number':3371,'multiline':False]['text':' * w)','line_number':3372,'multiline':False]['text':' By default, we are using channel-packed 3d tensors.','line_number':3378,'multiline':False]['text':' The x and y are typical plane.','line_number':3379,'multiline':False]['text':' The z channel is packed with batch and channel, e.g. every 4 channels are','line_number':3380,'multiline':False]['text':' packed into one texel. Hence, to access a tensor at batch nn and channel','line_number':3381,'multiline':False]['text':' cc, we will calculate the z coordinate = nn * ceil(c / 4) + cc / 4, where c','line_number':3382,'multiline':False]['text':' is the channel count.','line_number':3383,'multiline':False]['text':' We always start a new batch on a new z. Hence, when c cannot be divided by','line_number':3384,'multiline':False]['text':' 4, there are some undefined values in the padding area. We use -1 to','line_number':3385,'multiline':False]['text':' indicate that we are not performing comparsion on those values.','line_number':3386,'multiline':False]['text':' This output tensor is on vulkan, since we are interested in evaluating the','line_number':3435,'multiline':False]['text':' actual layout','line_number':3436,'multiline':False]['text':' This tensor will be height-packed. Meaning that each texel represent','line_number':3439,'multiline':False]['text':' consecutive elements along the height dimension, element difference within','line_number':3440,'multiline':False]['text':' a texel is "w".','line_number':3441,'multiline':False]['text':' This output tensor is on vulkan, since we are interested in evaluating the','line_number':3487,'multiline':False]['text':' actual layout','line_number':3488,'multiline':False]['text':' This tensor will be width-packed. Meaning that each texel represent','line_number':3491,'multiline':False]['text':' consecutive elements along the width dimension. The  differece between','line_number':3492,'multiline':False]['text':' consecutive texels is 1.','line_number':3493,'multiline':False]['text':' namespace','line_number':3522,'multiline':False]['text':' USE_VULKAN_API ','line_number':3524,'multiline':True]