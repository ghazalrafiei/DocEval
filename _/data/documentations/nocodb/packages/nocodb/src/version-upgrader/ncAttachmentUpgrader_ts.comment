['text':' import type { XKnex } from '~/db/sql-data-mapper';','line_number':6,'multiline':False]['text':' before 0.103.0, an attachment object was like','line_number':13,'multiline':False]['text':' [{','line_number':14,'multiline':False]['text':'   "url": "http://localhost:8080/download/noco/xcdb/Sheet-1/title5/39A410.jpeg",','line_number':15,'multiline':False]['text':'   "title": "foo.jpeg",','line_number':16,'multiline':False]['text':'   "mimetype": "image/jpeg",','line_number':17,'multiline':False]['text':'   "size": 6494','line_number':18,'multiline':False]['text':' }]','line_number':19,'multiline':False]['text':' in this way, if the base url is changed, the url will be broken','line_number':20,'multiline':False]['text':' this upgrader is to convert the existing local attachment object to the following format','line_number':21,'multiline':False]['text':' [{','line_number':22,'multiline':False]['text':'   "url": "http://localhost:8080/download/noco/xcdb/Sheet-1/title5/39A410.jpeg",','line_number':23,'multiline':False]['text':'   "path": "download/noco/xcdb/Sheet-1/title5/39A410.jpeg",','line_number':24,'multiline':False]['text':'   "title": "foo.jpeg",','line_number':25,'multiline':False]['text':'   "mimetype": "image/jpeg",','line_number':26,'multiline':False]['text':'   "size": 6494','line_number':27,'multiline':False]['text':' }]','line_number':28,'multiline':False]['text':' the new url will be constructed by `${ncSiteUrl}/${path}` in UI. the old url will be used for fallback','line_number':29,'multiline':False]['text':' while other non-local attachments will remain unchanged','line_number':30,'multiline':False]['text':' skip if the base_id is missing','line_number':57,'multiline':False]['text':' skip if the base is missing','line_number':66,'multiline':False]['text':' used in timeout error message','line_number':78,'multiline':False]['text':' if the table is missing in database, skip','line_number':86,'multiline':False]['text':' get all attachment & primary key columns','line_number':93,'multiline':False]['text':' and filter out the columns that are missing in database','line_number':94,'multiline':False]['text':' if parsing failed ignore the cell','line_number':133,'multiline':False]['text':' if cell data is not an array, ignore it','line_number':141,'multiline':False]['text':' e.g. http://localhost:8080/download/noco/xcdb/Sheet-1/title5/ee2G8p_nute_gunray.png','line_number':152,'multiline':False]['text':' match[1] = http://localhost:8080','line_number':153,'multiline':False]['text':' match[2] = download/noco/xcdb/Sheet-1/title5/ee2G8p_nute_gunray.png','line_number':154,'multiline':False]['text':' keep it as it is','line_number':162,'multiline':False]['text':' ignore the error related to deleted base','line_number':184,'multiline':False]['text':' throw the custom timeout error message if applicable','line_number':186,'multiline':False]['text':' throw general error','line_number':188,'multiline':False]