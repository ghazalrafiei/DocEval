['text':' SPDX-License-Identifier: MPL-2.0 ','line_number':1,'multiline':True]['text':' TODO router_t calls pipe_->rollback() here; should this be done here as','line_number':49,'multiline':False]['text':' well? then xpipe_terminated could be pulled up to routing_socket_base_t','line_number':50,'multiline':False]['text':'  If this is the first part of the message it's the ID of the','line_number':62,'multiline':False]['text':'  peer to send the message to.','line_number':63,'multiline':False]['text':'  If we have malformed message (prefix with no subsequent message)','line_number':67,'multiline':False]['text':'  then just silently ignore it.','line_number':68,'multiline':False]['text':'  TODO: The connections should be killed instead.','line_number':69,'multiline':False]['text':'  Find the pipe associated with the routing id stored in the prefix.','line_number':71,'multiline':False]['text':'  If there's no such pipe return an error','line_number':72,'multiline':False]['text':'  Expect one more message frame.','line_number':92,'multiline':False]['text':'  Ignore the MORE flag','line_number':102,'multiline':False]['text':'  This is the last part of the message.','line_number':105,'multiline':False]['text':'  Push the message into the pipe. If there's no out pipe, just drop it.','line_number':108,'multiline':False]['text':' Close the remote connection if user has asked to do so','line_number':110,'multiline':False]['text':' by sending zero length message.','line_number':111,'multiline':False]['text':' Pending messages in the pipe will be dropped (on receiving term- ack)','line_number':112,'multiline':False]['text':'  Detach the message from the data buffer.','line_number':131,'multiline':False]['text':'  We have received a frame with TCP data.','line_number':176,'multiline':False]['text':'  Rather than sending this frame, we keep it in prefetched','line_number':177,'multiline':False]['text':'  buffer and send a frame with peer's ID.','line_number':178,'multiline':False]['text':' forward metadata (if any)','line_number':185,'multiline':False]['text':'  We may already have a message pre-fetched.','line_number':201,'multiline':False]['text':'  Try to read the next message.','line_number':205,'multiline':False]['text':'  The message, if read, is kept in the pre-fetch buffer.','line_number':206,'multiline':False]['text':' forward metadata (if any)','line_number':219,'multiline':False]['text':'  In theory, STREAM socket is always ready for writing. Whether actual','line_number':236,'multiline':False]['text':'  attempt to write succeeds depends on which pipe the message is going','line_number':237,'multiline':False]['text':'  to be routed to.','line_number':238,'multiline':False]['text':'  Always assign routing id for raw-socket','line_number':244,'multiline':False]['text':'  Not allowed to duplicate an existing rid','line_number':253,'multiline':False]