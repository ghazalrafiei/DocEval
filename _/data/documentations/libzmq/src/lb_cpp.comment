['text':' SPDX-License-Identifier: MPL-2.0 ','line_number':1,'multiline':True]['text':'  If we are in the middle of multipart message and current pipe','line_number':28,'multiline':False]['text':'  have disconnected, we have to drop the remainder of the message.','line_number':29,'multiline':False]['text':'  Remove the pipe from the list; adjust number of active pipes','line_number':33,'multiline':False]['text':'  accordingly.','line_number':34,'multiline':False]['text':'  Move the pipe to the list of active pipes.','line_number':46,'multiline':False]['text':'  Drop the message if required. If we are at the end of the message','line_number':58,'multiline':False]['text':'  switch back to non-dropping mode.','line_number':59,'multiline':False]['text':' If send fails for multi-part msg rollback other','line_number':78,'multiline':False]['text':' parts sent earlier and return EAGAIN.','line_number':79,'multiline':False]['text':' Application should handle this as suitable','line_number':80,'multiline':False]['text':' At this point the pipe is already being deallocated','line_number':83,'multiline':False]['text':' and the first N frames are unreachable (_outpipe is','line_number':84,'multiline':False]['text':' most likely already NULL so rollback won't actually do','line_number':85,'multiline':False]['text':' anything and they can't be un-written to deliver later).','line_number':86,'multiline':False]['text':' Return EFAULT to socket_base caller to drop current message','line_number':87,'multiline':False]['text':' and any other subsequent frames to avoid them being','line_number':88,'multiline':False]['text':' "stuck" and received when a new client reconnects, which','line_number':89,'multiline':False]['text':' would break atomicity of multi-part messages (in blocking mode','line_number':90,'multiline':False]['text':' socket_base just tries again and again to send the same message)','line_number':91,'multiline':False]['text':' Note that given dropping mode returns 0, the user will','line_number':92,'multiline':False]['text':' never know that the message could not be delivered, but','line_number':93,'multiline':False]['text':' can't really fix it without breaking backward compatibility.','line_number':94,'multiline':False]['text':' -2/EAGAIN will make sure socket_base caller does not re-enter','line_number':95,'multiline':False]['text':' immediately or after a short sleep in blocking mode.','line_number':96,'multiline':False]['text':'  If there are no pipes we cannot send the message.','line_number':110,'multiline':False]['text':'  If it's final part of the message we can flush it downstream and','line_number':116,'multiline':False]['text':'  continue round-robining (load balance).','line_number':117,'multiline':False]['text':'  Detach the message from the data buffer.','line_number':126,'multiline':False]['text':'  If one part of the message was already written we can definitely','line_number':135,'multiline':False]['text':'  write the rest of the message.','line_number':136,'multiline':False]['text':'  Check whether a pipe has room for another message.','line_number':141,'multiline':False]['text':'  Deactivate the pipe.','line_number':145,'multiline':False]