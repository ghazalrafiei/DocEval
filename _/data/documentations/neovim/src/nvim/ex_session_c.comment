['text':' Functions for creating a session file, i.e. implementing:','line_number':1,'multiline':False]['text':'   :mkexrc','line_number':2,'multiline':False]['text':'   :mkvimrc','line_number':3,'multiline':False]['text':'   :mkview','line_number':4,'multiline':False]['text':'   :mksession','line_number':5,'multiline':False]['text':'/ Whether ":lcd" or ":tcd" was produced for a session.','line_number':44,'multiline':False]['text':' restore height when not full height','line_number':72,'multiline':False]['text':' restore width when not full width','line_number':82,'multiline':False]['text':' Just equalize window sizes.','line_number':93,'multiline':False]['text':'/ Write commands to "fd" to recursively create windows for frame "fr",','line_number':99,'multiline':False]['text':'/ horizontally and vertically split.','line_number':100,'multiline':False]['text':'/ After the commands the last window in the frame is the current window.','line_number':101,'multiline':False]['text':'/','line_number':102,'multiline':False]['text':'/ @return  FAIL when writing the commands to "fd" fails.','line_number':103,'multiline':False]['text':' Find first frame that's not skipped and then create a window for','line_number':112,'multiline':False]['text':' each following one (first frame is already there).','line_number':113,'multiline':False]['text':' Make window as big as possible so that we have lots of room','line_number':117,'multiline':False]['text':' to split.','line_number':118,'multiline':False]['text':' Go back to the first window.','line_number':128,'multiline':False]['text':' Recursively create frames/windows in each window of this column or row.','line_number':134,'multiline':False]['text':' Go to next window.','line_number':139,'multiline':False]['text':'/ Skip frames that don't contain windows we want to save in the Session.','line_number':148,'multiline':False]['text':'/','line_number':149,'multiline':False]['text':'/ @return  NULL when there none.','line_number':150,'multiline':False]['text':'/ @return  true if frame "fr" has a window somewhere that we want to save in','line_number':163,'multiline':False]['text':'/          the Session.','line_number':164,'multiline':False]['text':'/ @return  non-zero if window "wp" is to be stored in the Session.','line_number':181,'multiline':False]['text':' Skip floating windows to avoid issues when restoring the Session. #18432','line_number':184,'multiline':False]['text':' When 'buftype' is "nofile" can't restore the window contents.','line_number':189,'multiline':False]['text':'/ Writes an :argument list to the session file.','line_number':202,'multiline':False]['text':'/','line_number':203,'multiline':False]['text':'/ @param fd','line_number':204,'multiline':False]['text':'/ @param cmd','line_number':205,'multiline':False]['text':'/ @param gap','line_number':206,'multiline':False]['text':'/ @param fullname  true: use full path name','line_number':207,'multiline':False]['text':'/ @param flagp','line_number':208,'multiline':False]['text':'/','line_number':209,'multiline':False]['text':'/ @returns FAIL if writing fails.','line_number':210,'multiline':False]['text':' NULL file names are skipped (only happens when out of memory).','line_number':219,'multiline':False]['text':'/ @return  the buffer name for `buf`.','line_number':240,'multiline':False]['text':' Use the short file name if the current directory is known at the time','line_number':243,'multiline':False]['text':' the session file will be sourced.','line_number':244,'multiline':False]['text':' Don't do this for ":mkview", we don't know the current directory.','line_number':245,'multiline':False]['text':' Don't do this after ":lcd", we don't keep track of what the current','line_number':246,'multiline':False]['text':' directory is.','line_number':247,'multiline':False]['text':'/ Write a buffer name to the session file.','line_number':258,'multiline':False]['text':'/ Also ends the line, if "add_eol" is true.','line_number':259,'multiline':False]['text':'/','line_number':260,'multiline':False]['text':'/ @return  FAIL if writing fails.','line_number':261,'multiline':False]['text':'/ Escapes a filename for session writing.','line_number':272,'multiline':False]['text':'/ Takes care of "slash" flag in 'sessionoptions' and escapes special','line_number':273,'multiline':False]['text':'/ characters.','line_number':274,'multiline':False]['text':'/','line_number':275,'multiline':False]['text':'/ @return  allocated string or NULL.','line_number':276,'multiline':False]['text':' Always SSOP_SLASH: change all backslashes to forward slashes.','line_number':282,'multiline':False]['text':' Escape special characters.','line_number':289,'multiline':False]['text':'/ Write a file name to the session file.','line_number':295,'multiline':False]['text':'/ Takes care of the "slash" option in 'sessionoptions' and escapes special','line_number':296,'multiline':False]['text':'/ characters.','line_number':297,'multiline':False]['text':'/','line_number':298,'multiline':False]['text':'/ @return  FAIL if writing fails.','line_number':299,'multiline':False]['text':'/ Write commands to "fd" to restore the view of a window.','line_number':308,'multiline':False]['text':'/ Caller must make sure 'scrolloff' is zero.','line_number':309,'multiline':False]['text':'/','line_number':310,'multiline':False]['text':'/ @param add_edit  add ":edit" command to view','line_number':311,'multiline':False]['text':'/ @param flagp  vop_flags or ssop_flags','line_number':312,'multiline':False]['text':'/ @param current_arg_idx  current argument index of the window, use -1 if unknown','line_number':313,'multiline':False]['text':' Always restore cursor position for ":mksession".  For ":mkview" only','line_number':319,'multiline':False]['text':' when 'viewoptions' contains "cursor".','line_number':320,'multiline':False]['text':' Local argument list.','line_number':323,'multiline':False]['text':' Only when part of a session: restore the argument index.  Some','line_number':335,'multiline':False]['text':' arguments may have been deleted, check if the index is valid.','line_number':336,'multiline':False]['text':' Edit the file.  Skip this when ":next" already did it.','line_number':345,'multiline':False]['text':' A help buffer needs some options to be set.','line_number':351,'multiline':False]['text':' First, create a new empty buffer with "buftype=help".','line_number':352,'multiline':False]['text':' Then ":help" will re-use both the buffer and the window and set','line_number':353,'multiline':False]['text':' the options, even when "options" is not in 'sessionoptions'.','line_number':354,'multiline':False]['text':' Load the file.','line_number':365,'multiline':False]['text':' Editing a file in this buffer: use ":edit file".','line_number':367,'multiline':False]['text':' This may have side effects! (e.g., compressed or network file).','line_number':368,'multiline':False]['text':'','line_number':369,'multiline':False]['text':' Note, if a buffer for that file already exists, use :badd to','line_number':370,'multiline':False]['text':' edit that buffer, to not lose folding information (:edit resets','line_number':371,'multiline':False]['text':' folds in other buffers)','line_number':372,'multiline':False]['text':' Fixup :terminal buffer name. #7836','line_number':375,'multiline':False]['text':' No file in this buffer, just make it empty.','line_number':387,'multiline':False]['text':' The buffer does have a name, but it's not a file name.','line_number':390,'multiline':False]['text':' Set the alternate file if the buffer is listed.','line_number':404,'multiline':False]['text':' do not set balt if buffer is terminal and "terminal" is not set in options','line_number':408,'multiline':False]['text':' Local mappings and abbreviations.','line_number':416,'multiline':False]['text':' Local options.  Need to go to the window temporarily.','line_number':422,'multiline':False]['text':' Store only local values when using ":mkview" and when ":mksession" is','line_number':423,'multiline':False]['text':' used and 'sessionoptions' doesn't include "nvim/options".','line_number':424,'multiline':False]['text':' Some folding options are always stored when "folds" is included,','line_number':425,'multiline':False]['text':' otherwise the folds would not be restored correctly.','line_number':426,'multiline':False]['text':' Save Folds when 'buftype' is empty and for help files.','line_number':444,'multiline':False]['text':' Set the cursor after creating folds, since that moves the cursor.','line_number':454,'multiline':False]['text':' Restore the cursor line in the file and relatively in the','line_number':456,'multiline':False]['text':' window.  Don't use "G", it changes the jumplist.','line_number':457,'multiline':False]['text':' Restore the cursor column and left offset when not wrapping.','line_number':479,'multiline':False]['text':' Local directory, if the current flag is not view options or the "curdir"','line_number':505,'multiline':False]['text':' option is included.','line_number':506,'multiline':False]['text':'/ Writes commands for restoring the current buffers, for :mksession.','line_number':520,'multiline':False]['text':'/','line_number':521,'multiline':False]['text':'/ Legacy 'sessionoptions'/'viewoptions' flags SSOP_UNIX, SSOP_SLASH are','line_number':522,'multiline':False]['text':'/ always enabled.','line_number':523,'multiline':False]['text':'/','line_number':524,'multiline':False]['text':'/ @param dirnow  Current directory name','line_number':525,'multiline':False]['text':'/ @param fd  File descriptor to write to','line_number':526,'multiline':False]['text':'/','line_number':527,'multiline':False]['text':'/ @return FAIL on error, OK otherwise.','line_number':528,'multiline':False]['text':' Save ALL buffers','line_number':540,'multiline':False]['text':' Begin by setting v:this_session, and then other sessionable variables.','line_number':543,'multiline':False]['text':' Close all windows and tabs but one.','line_number':551,'multiline':False]['text':' Now a :cd command to the session directory or the current directory','line_number':558,'multiline':False]['text':' If there is an empty, unnamed buffer we will wipe it out later.','line_number':575,'multiline':False]['text':' Remember the buffer number.','line_number':576,'multiline':False]['text':' save 'shortmess' if not storing options','line_number':584,'multiline':False]['text':' set 'shortmess' for the following.  Add the 'A' flag if it was there','line_number':589,'multiline':False]['text':' Now save the current files, current buffer first.','line_number':596,'multiline':False]['text':' Put all buffers into the buffer list.','line_number':597,'multiline':False]['text':' Do it very early to preserve buffer order after loading session (which','line_number':598,'multiline':False]['text':' can be disrupted by prior `edit` or `tabedit` calls).','line_number':599,'multiline':False]['text':' the global argument list','line_number':616,'multiline':False]['text':' Note: after the restore we still check it worked!','line_number':623,'multiline':False]['text':' When there are two or more tabpages and 'showtabline' is 1 the tabline','line_number':631,'multiline':False]['text':' will be displayed when creating the next tab.  That resizes the windows','line_number':632,'multiline':False]['text':' in the first tab, which may cause problems.  Set 'showtabline' to 2','line_number':633,'multiline':False]['text':' temporarily to avoid that.','line_number':634,'multiline':False]['text':' "tabpages" is in 'sessionoptions': Similar to ses_win_rec() below,','line_number':641,'multiline':False]['text':' populate the tab pages first so later local options won't be copied','line_number':642,'multiline':False]['text':' to the new tabs.','line_number':643,'multiline':False]['text':' Use `bufhidden=wipe` to remove empty "placeholder" buffers once','line_number':645,'multiline':False]['text':' they are not needed. This prevents creating extra buffers (see','line_number':646,'multiline':False]['text':' cause of Vim patch 8.1.0829)','line_number':647,'multiline':False]['text':' Assume "tabpages" is in 'sessionoptions'.  If not then we only do','line_number':658,'multiline':False]['text':' "curtab" and bail out of the loop.','line_number':659,'multiline':False]['text':' May repeat putting Windows for each tab, when "tabpages" is in','line_number':664,'multiline':False]['text':' 'sessionoptions'.','line_number':665,'multiline':False]['text':' Don't use goto_tabpage(), it may change directory and trigger','line_number':666,'multiline':False]['text':' autocommands.','line_number':667,'multiline':False]['text':' Before creating the window layout, try loading one file.  If this','line_number':685,'multiline':False]['text':' is aborted we don't end up with a number of useless windows.','line_number':686,'multiline':False]['text':' This may have side effects! (e.g., compressed or network file).','line_number':687,'multiline':False]['text':' If no file got edited create an empty tab page.','line_number':709,'multiline':False]['text':' Save current window layout.','line_number':715,'multiline':False]['text':' Check if window sizes can be restored (no windows omitted).','line_number':726,'multiline':False]['text':' Remember the window number of the current window after restoring.','line_number':727,'multiline':False]['text':' Go to the first window.','line_number':741,'multiline':False]['text':' If more than one window, see if sizes can be restored.','line_number':744,'multiline':False]['text':' First set 'winheight' and 'winwidth' to 1 to avoid the windows','line_number':745,'multiline':False]['text':' being resized when moving between windows.','line_number':746,'multiline':False]['text':' Do this before restoring the view, so that the topline and the','line_number':747,'multiline':False]['text':' cursor can be set.  This is done again below.','line_number':748,'multiline':False]['text':' winminheight and winminwidth need to be set to avoid an error if','line_number':749,'multiline':False]['text':' the user has set winheight or winwidth.','line_number':750,'multiline':False]['text':' Restore the tab-local working directory if specified','line_number':765,'multiline':False]['text':' Do this before the windows, so that the window-local directory can','line_number':766,'multiline':False]['text':' override the tab-local directory.','line_number':767,'multiline':False]['text':' Restore the view of the window (options, file, cursor, etc.).','line_number':777,'multiline':False]['text':' The argument index in the first tab page is zero, need to set it in','line_number':792,'multiline':False]['text':' each window.  For further tab pages it's the window where we do','line_number':793,'multiline':False]['text':' "tabedit".','line_number':794,'multiline':False]['text':' Restore cursor to the current window if it's not the first one.','line_number':797,'multiline':False]['text':' Restore window sizes again after jumping around in windows, because','line_number':802,'multiline':False]['text':' the current window has a minimum size while others may not.','line_number':803,'multiline':False]['text':' Don't continue in another tab page when doing only the current one','line_number':808,'multiline':False]['text':' or when at the last tab page.','line_number':809,'multiline':False]['text':' Wipe out an empty unnamed buffer we started in.','line_number':824,'multiline':False]['text':' Re-apply 'winheight' and 'winwidth'.','line_number':835,'multiline':False]['text':' Restore 'shortmess'.','line_number':841,'multiline':False]['text':' Restore 'winminheight' and 'winminwidth'.','line_number':851,'multiline':False]['text':' Lastly, execute the x.vim file if it exists.','line_number':856,'multiline':False]['text':'/ ":loadview [nr]"','line_number':868,'multiline':False]['text':'/ ":mkexrc", ":mkvimrc", ":mkview", ":mksession".','line_number':882,'multiline':False]['text':'/','line_number':883,'multiline':False]['text':'/ Legacy 'sessionoptions'/'viewoptions' flags are always enabled:','line_number':884,'multiline':False]['text':'/   - SSOP_UNIX: line-endings are LF','line_number':885,'multiline':False]['text':'/   - SSOP_SLASH: filenames are written with "/" slash','line_number':886,'multiline':False]['text':' :mkview, :mksession','line_number':889,'multiline':False]['text':' using 'viewdir'?','line_number':890,'multiline':False]['text':' Use the short file name until ":lcd" is used.  We also don't use the','line_number':897,'multiline':False]['text':' short file name when 'acd' is set, that is checked later.','line_number':898,'multiline':False]['text':' ":mkview" or ":mkview 9": generate file name with 'viewdir'','line_number':902,'multiline':False]['text':' When using 'viewdir' may have to create the directory.','line_number':923,'multiline':False]['text':' Write the version command for :mkvimrc','line_number':938,'multiline':False]['text':' current directory','line_number':967,'multiline':False]['text':' Change to session file's dir.','line_number':971,'multiline':False]['text':' restore original dir','line_number':989,'multiline':False]['text':' successful session write - set v:this_session','line_number':1032,'multiline':False]['text':'/ @return  the name of the view file for the current buffer.','line_number':1044,'multiline':False]['text':' We want a file name without separators, because we're not going to make','line_number':1053,'multiline':False]['text':' a directory.','line_number':1054,'multiline':False]['text':'    "normal" path separator   -> "=+"','line_number':1055,'multiline':False]['text':'    "="                       -> "=="','line_number':1056,'multiline':False]['text':'    ":" path separator        -> "=-"','line_number':1057,'multiline':False]['text':'/ TODO(justinmk): remove this, not needed after 5ba3cecb68cd.','line_number':1091,'multiline':False]['text':'/ TODO(justinmk): remove this, not needed after 5ba3cecb68cd.','line_number':1100,'multiline':False]